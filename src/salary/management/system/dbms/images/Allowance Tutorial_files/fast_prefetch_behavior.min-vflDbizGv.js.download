define(["require","exports","tslib","external/lodash","rondo/v1/index"],(function(e,t,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.promisifyPrefetch=function(e){return new Promise((function(t,r){return window[e](t,r)}))},t.FastPrefetchBehavior=function(e){var c=e.fastPrefetchName,s=e.prefetchReadyAction,a=e.prefetchFailureAction,o=e.parseFunction,u=void 0===o?i.identity:o,h=e.fallbackFetch,f=e.onError;return(function(){function e(){this.actionPrefetchReady=s.useIn(this),this.actionPrefetchFailed=a?a.useIn(this):n.createAction()}return e.prototype.dispatchSuccess=function(e){"string"==typeof e?this.actionPrefetchReady(u(JSON.parse(e))):this.actionPrefetchReady(e)},e.prototype.dispatchFailure=function(e){var t=n.ensureError(e);this.actionPrefetchReady(t),this.actionPrefetchFailed(),f&&f(t)},e.prototype.fallback=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(r){switch(r.label){case 0:if(!h)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,h()];case 2:return e=r.sent(),this.dispatchSuccess(e),[3,4];case 3:return t=r.sent(),this.dispatchFailure(t),[3,4];case 4:return[2]}}))}))},e.prototype.ready=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,i;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.promisifyPrefetch(c)];case 1:return e=r.sent(),this.dispatchSuccess(e),[3,3];case 2:return i=r.sent(),h?this.fallback():this.dispatchFailure(i),[3,3];case 3:return[2]}}))}))},e.displayName="FastPrefetch",e})()}}));
//# sourceMappingURL=fast_prefetch_behavior.min.js-vflsrFq1Z.map