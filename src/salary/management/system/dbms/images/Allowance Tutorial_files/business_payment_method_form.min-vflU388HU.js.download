define(["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/payments/validation","modules/clean/react/payments/checkout/components/payment_method_form/credit_card_frame","modules/clean/react/payments/checkout/components/payment_method_form/direct_debit_form","modules/clean/react/payments/common/form_value_helpers","modules/clean/react/payments/checkout/components/inputs/labeled_text_input","modules/clean/payments/payment_form/payment_form_spec","modules/clean/react/payments/checkout/components/payment_method_form/payment_method_selector","modules/clean/react/payments/checkout/components/payment_method_form/address_form"],(function(e,t,a,r,o,n,i,s,l,p,m,d,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=a.__importDefault(r);var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCpfChange=function(e){t.props.actions.updateCpf(e.value)},t}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.props.actions.updateHistory()},t.prototype.prepareForSubmission=function(){return this.props.formData.paymentMethod.formattedValue===d.PaymentMethod.CreditCard?this.creditCardFrame.tokenize():Promise.resolve(!0)},t.prototype.getCreditCardFrame=function(){return this.creditCardFrame},t.prototype.onVatChange=function(e){this.props.actions.updateVat(e.value||this.props.vat||"")},t.prototype.vatErrorString=function(){var e=this.props.formData.vat;return!p.FormValueHelper.isValid(e)&&e.showError?n.intl.formatMessage({id:"iRjYtd",defaultMessage:"Please enter a valid VAT number (ex: {examples})."},{examples:i.getVatExamples(this.props.formData.countryCode.formattedValue).join(", ")}):""},t.prototype.cpfErrorString=function(){var e=this.props.formData.cpf;return!p.FormValueHelper.isValid(e)&&e.showError?n.intl.formatMessage({id:"MQDRWx",defaultMessage:"Please enter a valid CPF number."}):""},t.prototype.renderLocationFields=function(){var e=this.props,t=e.paymentSpec,a=e.formData,s=null;if(t.should_show_vat_for_country(a.countryCode.formattedValue)){var l=i.getVatPrefix(a.countryCode.formattedValue),d=r.default({"billing-vat":!0,grid__item:!0,"grid__item--medium--1-2":Boolean(!this.props.isTeam)}),u=r.default({"billing-vat-input":!0,"billing-vat-input--valid":""!==a.vat.formattedValue&&p.FormValueHelper.isValid(a.vat)});s=o.default.createElement(m.BizLabeledTextInput,{className:d,inputClassName:u,name:"vat",labelText:n.intl.formatMessage({id:"eZAuK1",defaultMessage:"VAT number (optional)"}),errorText:this.vatErrorString(),placeholder:l,onChange:this.onVatChange.bind(this)})}var f=null;if(t.should_require_cpf(a.countryCode.formattedValue,a.paymentMethod.formattedValue)){var h=r.default({"billing-cpf":!0,grid__item:!0}),y=r.default({"payment-info__cpf-input":!0,"payment-info__cpf-input--valid":""!==a.cpf.formattedValue&&p.FormValueHelper.isValid(a.cpf)});f=o.default.createElement("div",{className:"grid__item"},o.default.createElement(m.BizLabeledTextInput,{className:h,inputClassName:y,name:"cpf",labelText:n.intl.formatMessage({id:"Z1BdZ2",defaultMessage:"CPF/CNPJ"}),errorText:this.cpfErrorString(),errorHTML:a.cpf.serverError,value:a.cpf.rawValue,onChange:this.onCpfChange}))}var _=null,g=n.intl.formatMessage({id:"8vkOAo",defaultMessage:"Please note: changing your billing location could impact your applicable tax rate."});return t.should_show_vat_for_country(a.countryCode.formattedValue)&&(g=n.intl.formatMessage({id:"RCr4JC",defaultMessage:"Please note: changing your billing location or VAT number could impact your applicable tax rate."})),this.props.isTeam||(_=o.default.createElement("div",{className:"disclaimer-message"},g)),o.default.createElement("div",{className:"location-info-fields grid__item grid--x-bookend"},o.default.createElement(c.AddressForms,{paymentSpec:this.props.paymentSpec,formData:this.props.formData,actions:this.props.actions,countryList:this.props.countryList,businessStyling:!0}),s,f,_)},t.prototype.render=function(){var e=this,t=this.props,a=t.paymentSpec,n=t.actions,i=t.formData,p=this.renderLocationFields(),m=p;i.paymentMethod.formattedValue===d.PaymentMethod.DirectDeposit&&(m=o.default.createElement(l.DirectDebitForm,{locationFields:p,formData:i,actions:n}));var c=r.default({grid__item:!0,"payment-form":!0,"payment-form--responsive":this.props.isResponsive});return o.default.createElement("div",{className:c},o.default.createElement(u.PaymentMethodSelector,{isTeam:this.props.isTeam,paymentSpec:a,paymentMethod:i.paymentMethod.rawValue,updatePaymentMethod:this.props.actions.updatePaymentMethod,countryCode:i.countryCode.rawValue,zipCode:i.zipCode.rawValue}),this.props.subPaymentMethodHeader,o.default.createElement(s.CreditCardFrame,{getHeightFromIframe:!0,iframeUrl:this.props.iframeUrl,isResponsive:this.props.isResponsive,hidden:i.paymentMethod.formattedValue!==d.PaymentMethod.CreditCard,actions:this.props.actions,ref:function(t){e.creditCardFrame=t},nonce:i.nonce,bin:i.bin,submitForm:this.props.submitForm}),m)},t.defaultProps={isResponsive:!1},t})((o=a.__importDefault(o)).default.Component);t.BusinessPaymentMethodForm=f}));
//# sourceMappingURL=business_payment_method_form.min.js-vflmc65Lj.map