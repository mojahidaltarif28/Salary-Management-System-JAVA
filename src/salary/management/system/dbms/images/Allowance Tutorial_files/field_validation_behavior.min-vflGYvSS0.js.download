define(["require","exports","tslib","rondo-forms/v1/types","rondo/v1/index","rondo-saga/v1","rondo-forms/v1/utils"],(function(e,i,t,a,n,r,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FieldValidationBehavior=function(e){var i=e.validator,l=e.allowNonValid,s=e.validAction,d=e.validateAction,u=e.parseValue,c=void 0===u?function(e){return e}:u,v=e.fieldValue;return(function(){function e(){this.initialState=function(){return{validInfo:a.ValidInfoValid}},this.actionValid=n.createOrUseIn(this,s).handle((function(e,i){return{validInfo:i.validInfo}})),this.actionValidate=n.createOrUseIn(this,d).takeEvery(this.fieldChangeSaga),this.valid=n.createSelector((function(e){return e.validInfo.valid}),(function(e){return e})),this.validMessage=n.createSelector((function(e){var i=e.validInfo;return i.message?i.message:void 0})),this.validInfo=n.createSelector((function(e){return e.validInfo})),this.run=n.createSaga((function(){return t.__generator(this,(function(e){switch(e.label){case 0:return[4,this.fieldChangeSaga(v(),void 0,!1,!0)];case 1:return e.sent(),[2]}}))}))}return e.prototype.fieldChangeSaga=function(e,a,n,s){var d,u,f,h,g,p,y,I;return void 0===s&&(s=l),t.__generator(this,(function(t){switch(t.label){case 0:if(n)return[2];if(d={type:"valid",valid:!0},u=void 0!==e?e:v(),!i)return[3,6];if(f=i(c(u)),!o.isPromise(f))return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,f];case 2:return h=t.sent(),I=h.type,y=h.valid,p=h.message,d={message:p,valid:y,type:I||o.validStringType(y)},[3,4];case 3:return t.sent(),d={valid:!1,type:"error"},[3,4];case 4:return[3,6];case 5:p=(g=f).message,y=g.valid,I=g.type,d={message:p,valid:y,type:I||o.validStringType(!!y)},t.label=6;case 6:return d.valid||s?[4,r.put(this.actionValid)({fieldValue:u,validInfo:d})]:[2];case 7:return t.sent(),[2]}}))},e.displayName="FieldValidationBehavior",e})()}}));
//# sourceMappingURL=field_validation_behavior.min.js-vflXvQdHF.map