define(["require","exports","tslib","react","modules/clean/teams/admin/pages/activity/activity_modal/category_header","modules/clean/teams/admin/pages/activity/activity_modal/checkbox_with_label","modules/core/i18n"],(function(e,t,n,r,o,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r);var l=function(e){return e?"checked":"unchecked"},c=function(e){return"checked"===e},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleActivity=function(e){t.props.onSelectActivity({id:t.props.activity.id,checked:c(e)})},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.activity,n=e.category,o=e.search,i=n.checked||t.checked;return r.default.createElement(a.CheckboxWithLabel,{label:t.label,disabled:n.checked,checked:l(i),search:o,onChange:this.toggleActivity})},t})(r.default.Component),h=(function(e){function t(t){var o=e.call(this,t)||this;return o.highlighted=!1,o.toggleCategory=function(e){o.props.onSelectCategory({id:o.props.category.id,checked:c(e)})},o.getActivityCheckbox=function(e,t){var a=o.props,i=a.onSelectActivity,l=a.category,c=a.search;return r.default.createElement(s,n.__assign({},{activity:e,category:l,onSelectActivity:i,search:c,key:t}))},o.getCheckboxes=function(){var e=o.props.category.activities;return!o.state.expanded&&o.hasMore&&(e=e.slice(0,o.maxItems)),e.map(o.getActivityCheckbox)},o.toggleExpand=function(e){e.preventDefault();var t=o.state.expanded;o.setState({expanded:!t}),t&&o.scrollToElement()},o.setHeaderElement=function(e){o.headerElement=e},o.scrollToElement=function(){o.headerElement&&o.headerElement.scrollIntoView&&o.headerElement.scrollIntoView()},o.scrollSpy=function(){o.inView&&!o.highlighted&&(o.highlighted=!0,o.props.onScroll(o.props.category.id))},o.state={expanded:!1},o.highlighted=t.category.highlighted,o}return n.__extends(t,e),t.prototype.getCategoryCheckbox=function(){var e=this.props,t=e.category;return e.search?null:r.default.createElement(a.CheckboxWithLabel,{label:i.intl.formatMessage({id:"Swwdqr",defaultMessage:"All activities In {label}"},{label:t.label}),className:"select-all",checked:l(t.checked),onChange:this.toggleCategory})},t.prototype.getButtonText=function(){var e=this.numExpandItems;return this.state.expanded?i.intl.formatMessage({id:"xalATL",defaultMessage:"{count, plural, one{Hide last {count}} other{Hide last {count}}}"},{count:e}):i.intl.formatMessage({id:"xOPmrj",defaultMessage:"{count, plural, one{Show {count} more} other{Show {count} more}}"},{count:e})},t.prototype.getToggleButton=function(){return this.hasMore?r.default.createElement("a",{className:"expand",href:"#",onClick:this.toggleExpand},this.getButtonText()):null},Object.defineProperty(t.prototype,"numExpandItems",{get:function(){return this.props.category.activities.length-this.maxItems},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxItems",{get:function(){return this.props.search?16:15},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasMore",{get:function(){return this.numExpandItems>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.headerElement&&this.headerElement.parentElement&&this.headerElement.parentElement.parentElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inView",{get:function(){if(!this.headerElement||!this.parentElement)return!1;var e=this.parentElement.scrollTop,t=e+this.parentElement.clientHeight,n=this.headerElement.offsetTop-this.parentElement.offsetTop,r=n+this.headerElement.clientHeight;return n>=e&&r<=t&&n-e<100},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this.props.category;return r.default.createElement("div",{className:"category-wrap"},r.default.createElement(o.CategoryHeader,{category:e,setElement:this.setHeaderElement}),r.default.createElement("div",{className:"checkbox-wrap"},this.getCategoryCheckbox(),this.getCheckboxes()),this.getToggleButton())},t.prototype.componentDidMount=function(){this.parentElement&&this.parentElement.addEventListener("scroll",this.scrollSpy)},t.prototype.componentWillUnmount=function(){this.parentElement&&this.parentElement.removeEventListener("scroll",this.scrollSpy)},t.prototype.componentDidUpdate=function(){var e=this.props.category.highlighted;e&&!this.highlighted&&this.scrollToElement(),this.highlighted=e},t})(r.default.Component);t.CategoryView=h}));
//# sourceMappingURL=category.min.js-vflTiDde6.map