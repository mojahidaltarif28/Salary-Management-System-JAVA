define("comments2/components/annotation_utils",["require","exports","comments2/components/utils/to_percent"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRectangleStyle=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return{top:i.toPercent(n),left:i.toPercent(t),width:i.toPercent(r),height:i.toPercent(a)}},t.isVideoAnnotation=function(e){return void 0!==e&&"video"===e.type}})),define("comments2/components/utils/throttle-debounce",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=function(e,t){var i=!0,n=null;function r(){i=!0,null!==n&&(e.apply(void 0,n),n=null)}return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];i?(i=!1,e.apply(void 0,a),setTimeout(r,t)):n=a}},t.debounce=function(e,t,i){var n;return void 0===i&&(i=!1),function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var o=this,s=function(){n=void 0,i||e.apply(o,r)},d=i&&void 0===n;void 0!==n&&window.clearTimeout(n),n=window.setTimeout(s,t),d&&e.apply(o,r)}}})),define("comments2/components/utils/to_percent",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPercent=function(e){return 100*e+"%"}})),define("comments2/transforms",["require","exports","comments2/transforms/comments","comments2/transforms/threads","comments2/transforms/users","comments2/transforms/revisions","comments2/transforms/annotations","comments2/transforms/third_party_source"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iCommentContentToUserSubmittedComment=i.iCommentContentToUserSubmittedComment,t.threadsToIThreadMap=n.threadsToIThreadMap,t.threadToIThread=n.threadToIThread,t.usersToIUserMap=r.usersToIUserMap,t.userToIUser=r.userToIUser,t.streamToRevision=a.streamToRevision,t.numberedAnnotationToIInteractionAnnotation=o.numberedAnnotationToIInteractionAnnotation,t.iInteractionAnnotationToNumberedAnnotation=o.iInteractionAnnotationToNumberedAnnotation,t.thirdPartySourceToIThirdPartySource=s.thirdPartySourceToIThirdPartySource})),define("comments2/transforms/annotations",["require","exports","tslib"],(function(e,t,i){"use strict";function n(e,t){return e[".tag"]===t}Object.defineProperty(t,"__esModule",{value:!0}),t.annotationToIAnnotation=function(e){if(n(e,"video"))return{type:"video",time:e.time||0,timeSec:e.time_sec||0};if(n(e,"audio"))return{type:"audio",time:e.time};if(n(e,"document"))return{type:"document",regionType:e.region_type[".tag"],label:e.label,regions:e.regions};if(n(e,"image"))return{type:"image",region:e.region,label:e.label};throw new Error("Attempted to convert an annotation type that does not yet exist.")},t.iAnnotationToAnnotation=function(e){return"video"===e.type?{".tag":"video",time:e.time,time_sec:e.timeSec}:"audio"===e.type?{".tag":"audio",time:e.time}:"document"===e.type?{".tag":"document",regions:e.regions,region_type:{".tag":e.regionType}}:{".tag":"image",region:i.__assign(i.__assign({},e.region),{page:1})}},t.numberedAnnotationToIInteractionAnnotation=function(e){return"image"===e.type?{type:"rnd",regions:[e.region]}:"highlight"===e.regionType?{type:"highlight",regions:e.regions}:{type:"rnd",regions:e.regions}},t.iInteractionAnnotationToNumberedAnnotation=function(e,t){var n=e.type,r=e.regions;return void 0===t?{type:"image",region:r[0]}:{type:"document",regionType:"rnd"===n?"rectangle":"highlight",regions:r.map((function(e){return(function(e,t){return i.__assign(i.__assign({},e),{page:t})})(e,t)}))}}})),define("comments2/transforms/comments",["require","exports","comments2/transforms/annotations","comments2/transforms/metadata","comments2/transforms/revisions"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commentToIComment=function(e,t,i,a){return{author:i[e.author_id],content:{metadata:n.metadataToIMetadata(e.metadata),text:e.content},deleted:e.deleted,id:e.id,threadId:t,timestamp:new Date(e.timestamp),revisionInfo:a&&e.revision?r.revisionInfoToIRevisionInfo(a,e.revision):{isCurrent:!0},userPermissions:{canDelete:e.permissions.can_delete,canEdit:e.permissions.can_edit}}},t.iCommentContentToUserSubmittedComment=function(e){var t=e.annotation,a=e.content,o=e.stream;return{annotation_data:t?i.iAnnotationToAnnotation(t):void 0,content:a.text,metadata:n.iCommentMetadataToUserSubmittedMetadata(a.metadata),revision:r.streamToRevision(o)}}})),define("comments2/transforms/metadata",["require","exports","tslib"],(function(e,t,i){"use strict";function n(e,t){return e.type===t}function r(e){return n(e,"mention")}function a(e){return n(e,"style")}function o(e){return n(e,"sticker")}function s(e){var t=e.format[".tag"];if("other"===t)throw new Error('"other" is not a valid format block');return{location:e.location,style:t,type:"style"}}function d(e){var t=e.user.type[".tag"];if("other"===t)throw new Error('"other" is not a valid user type');var i={identifier:e.user.identifier,type:t};return{location:e.location,type:"mention",user:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.isMentionMetadata=r,t.isStyleMetadata=a,t.isStickerMetadata=o,t.metadataToIMetadata=function(e){var t=i.__spreadArrays(e.formatting.map(s),e.mentions.map(d));if(e.sticker){var n=(function(e){if(e.url&&e.name&&e.description)return{type:"sticker",id:e.id,url:e.url,name:e.name,description:e.description}})(e.sticker);n&&t.push(n)}return t},t.iCommentMetadataToUserSubmittedMetadata=function(e){var t=e.filter(a).map((function(e){return{format:{".tag":e.style},location:e.location}})),i=e.filter(r).map((function(e){return{user:{type:{".tag":e.user.type},identifier:e.user.identifier},location:e.location}})),n=e.find(o);return{formatting:t,mentions:i,sticker:n?{id:n.id}:void 0}}})),define("comments2/transforms/revisions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.revisionInfoToIRevisionInfo=function(e,t){var i=t.timestamp?new Date(t.timestamp):void 0;return{isCurrent:e.ns_id===t.ns_id&&e.sjid===t.sjid,revision:{nsId:t.ns_id,sjId:t.sjid},timestamp:i}},t.streamToRevision=function(e){return e&&"file"===e.type?{ns_id:e.ns_id,sjid:e.sjid}:void 0}})),define("comments2/transforms/third_party_source",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thirdPartySourceToIThirdPartySource=function(e){return e[".tag"]}})),define("comments2/transforms/threads",["require","exports","tslib","external/lodash","comments2/transforms/annotations","comments2/transforms/comments"],(function(e,t,i,n,r,a){"use strict";function o(e,t){if("resolved_no_details"===e[".tag"])return{type:"no_details"};if((function(e){return"resolved_with_details"===e[".tag"]})(e))return{type:"with_details",resolver:t[e.resolver_id],resolvedTimestamp:new Date(e.resolved_timestamp)};throw new Error("Not a valid type for ResolvedInfo.")}function s(e,t,n){var s=e.comments.map((function(i){return a.commentToIComment(i,e.id,t,n)})),d=e.resolved_info?{resolved:!0,resolvedInfo:o(e.resolved_info,t)}:{resolved:!1};return i.__assign(i.__assign({annotation:e.annotation_data?r.annotationToIAnnotation(e.annotation_data):void 0,comments:s,id:e.id,read:e.read,readonly:e.readonly,isThirdParty:e.is_third_party},d),{timestamp:s[0].timestamp})}Object.defineProperty(t,"__esModule",{value:!0}),t.resolvedInfoToIResolvedInfo=o,t.threadToIThread=s,t.threadsToIThreadMap=function(e,t,i){var r=e.map((function(e){return s(e,t,i)}));return n.keyBy(r,"id")}})),define("comments2/transforms/users",["require","exports","external/lodash"],(function(e,t,i){"use strict";function n(e){return{id:e.id,name:{display:e.display_name,initials:e.initials,public:e.public_name},photoUrl:e.photo_url}}Object.defineProperty(t,"__esModule",{value:!0}),t.userToIUser=n,t.usersToIUserMap=function(e){var t=e.map(n);return i.keyBy(t,"id")}})),define("modules/clean/bug_reporting/routing",["require","exports","tslib","react"],(function(e,t,i,n){"use strict";var r,a;Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),r||(r={});var o=window.currentBugScopes;o?a=o:window.currentBugScopes=a={nextId:0,scopes:{}},t.getBugScopes=function(){return Object.values(a.scopes)},t.RegisterComponentWithBugReporter=function(e){var t=e.componentId,i=e.componentName,r=e.children;return n.useEffect((function(){var e=(function(e,t){var i=a.nextId;return a.nextId++,a.scopes[i]={componentId:e,componentName:t},i})(t,i);return function(){return t=e,void delete a.scopes[t];var t}}),[t,i]),n.default.createElement(n.default.Fragment,null,r)},t.RegisterComponentWithBugReporter.displayName="RegisterComponentWithBugReporter"})),define("modules/clean/cloud_docs/shared_components/dynamic_routing_modal",["require","exports","tslib","modules/clean/react/modal","modules/clean/cloud_docs/open_with_utils","modules/clean/static_urls","modules/clean/react/css","modules/clean/cloud_docs/constants","react","modules/core/i18n","spectrum/button","modules/clean/cloud_docs/event_logging","modules/clean/cloud_docs/types","modules/clean/metrics/index"],(function(e,t,i,n,r,a,o,s,d,l,u,c,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=(function(e){function t(t){var i=e.call(this,t)||this;return i.editorToString={preview:l.intl.formatMessage({id:"N5Byoz",defaultMessage:"Dropbox Preview"}),word:l.intl.formatMessage({id:"Y9FcUQ",defaultMessage:"Word for the web"}),excel:l.intl.formatMessage({id:"o3mRdr",defaultMessage:"Excel for the web"}),powerpoint:l.intl.formatMessage({id:"RTj2SO",defaultMessage:"PowerPoint for the web"}),gdoc:l.intl.formatMessage({id:"+HsOFj",defaultMessage:"Google Docs"}),gsheet:l.intl.formatMessage({id:"cpuRML",defaultMessage:"Google Sheets"}),gslides:l.intl.formatMessage({id:"PcJCVL",defaultMessage:"Google Slides"})},i.state={set_routing_dest:!1},i}return i.__extends(t,e),t.prototype.componentDidMount=function(){c.logUserAction({actionEvent:f.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor}})},t.prototype.componentWillUnmount=function(){if(!this.state.set_routing_dest){c.logUserAction({actionEvent:f.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor,routingDest:"Dismissed"}});var e=m.getMetricsReporter(),t={origin:this.props.currentEditor,destination:"Dismissed"};e.createStats({ns:s.CLOUD_DOCS_AMP_NAMESPACE,name:"web/dynamicRoutingEvent"},t).record(1),this.setState({set_routing_dest:!1})}},t.prototype.render=function(){var e,t,i,o,p,_=this,g=this.editorToString[this.props.editorWithLock],v=this.editorToString[this.props.currentEditor],h=l.intl.formatMessage({id:"ILSqGs",defaultMessage:"Want to see the latest version and edit?"});"preview"===this.props.currentEditor?(o="active-editor-discovered-on-preview",i="/static/images/cloud_docs/dynamic_routing/active-editor-discovered-on-preview-vflgDu-Pd.png",t=l.intl.formatMessage({id:"vX9MC5",defaultMessage:"Open in {editor_with_lock_string}"},{editor_with_lock_string:g}),e=l.intl.formatMessage({id:"MaUI+x",defaultMessage:"Right now people are working on this file in {editor_with_lock_string}. You can see updates and edit there."},{editor_with_lock_string:g})):(o="active-editor-discovered-on-edit",i="/static/images/cloud_docs/dynamic_routing/active-editor-discovered-on-edit-vflJsv-0D.png",this.props.isLockEditorEnabled?(t=l.intl.formatMessage({id:"jpCK4T",defaultMessage:"Edit in {editor_with_lock_string}"},{editor_with_lock_string:g}),e=l.intl.formatMessage({id:"1Y/1oL",defaultMessage:"Because this file is already open in {editor_with_lock_string}, you can only see updates and edit there."},{editor_with_lock_string:g})):(h=l.intl.formatMessage({id:"RtkW2p",defaultMessage:"You canâ€™t edit this file right now"}),e=l.intl.formatMessage({id:"yOUn8S",defaultMessage:"Someone is working on this file in {editor_with_lock_string}. However, your admin has disabled access to {editor_with_lock_string} in your organization."},{editor_with_lock_string:g})));var y,M=function(e,t){c.logUserAction({actionEvent:f.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:_.props.user.id,docPathOrId:_.props.file.file_id,data:{webOpenId:_.props.openId,origDest:_.props.currentEditor,routingDest:e}});var i=m.getMetricsReporter(),n={origin:_.props.currentEditor,destination:e};i.createStats({ns:s.CLOUD_DOCS_AMP_NAMESPACE,name:"web/dynamicRoutingEvent"},n).record(1),_.setState({set_routing_dest:!0});var a=window.self;r.getCloudEditorUrl(_.props.user.id,_.props.file.file_id).then((function(i){r.openCloudEditorUrl(i,a,_.props.file.file_id,_.props.user.id,e,t)})).catch((function(e){r.handleError(e)}))};if(this.props.showViewOnlyMode){var E=l.intl.formatMessage({id:"nLLL8d",defaultMessage:"View-Only in {current_editor}"},{current_editor:v});p=d.createElement("div",{className:"link-text"},d.createElement("span",{role:"link",className:"link-span",tabIndex:0,onClick:function(){M(_.props.currentEditor,!0)}},E))}else if(!this.props.isLockEditorEnabled){E=l.intl.formatMessage({id:"DWwxhG",defaultMessage:"View-Only in Preview"});p=d.createElement("div",{className:"link-text"},d.createElement("span",{role:"link",className:"link-span",tabIndex:0,onClick:function(){return n.Modal.close()}},E))}return y=this.props.isLockEditorEnabled?d.createElement("div",{className:"edit-buttons"},d.createElement(u.Button,{className:"main-button",onClick:function(){M(_.props.editorWithLock,!1)}},t),p):d.createElement("div",{className:"edit-buttons"},p),d.createElement(n.Modal,{id:"dynamic-routing",className:"dynamic-routing-modal",buttonComponent:y,displayCloseButton:!0,style:"clean"},d.createElement("div",{className:"default-dyn-routing-modal"},d.createElement("img",{className:o,alt:"",src:a.static_url(i)}),d.createElement("div",{className:"main-text"},h),d.createElement("div",{className:"sub-text"},e)))},t})((d=i.__importStar(d)).Component);t.DynamicRoutingModal=o.requireCssWithComponent(p,["/static/css/cloud_docs/dynamic_routing-vfldmyOM_.css"]),t.showDynamicRoutingModal=function(e){n.Modal.showInstance(d.createElement(t.DynamicRoutingModal,i.__assign({},e)))}})),define("modules/clean/cloud_docs/shared_components/routing",["require","exports","tslib","modules/clean/cloud_docs/constants","modules/clean/previews/util","modules/clean/previews/util","modules/clean/cloud_docs/shared_components/dynamic_routing_modal","modules/clean/cloud_docs/cloud_doc_api_client","modules/clean/file_store/utils","modules/core/browser","modules/clean/cloud_docs/types"],(function(e,t,i,n,r,a,o,s,d,l,u){"use strict";var c,f,m,p,_;Object.defineProperty(t,"__esModule",{value:!0}),a=i.__importStar(a),l=i.__importStar(l);var g,v=((c={})[n.MicrosoftEditors.WORD]=!0,c[n.MicrosoftEditors.EXCEL]=!0,c[n.MicrosoftEditors.POWERPOINT]=!1,c[n.GoogleFileTypes.GOOGLE_DSS_SLIDES]=!1,c[n.GoogleFileTypes.GOOGLE_DSS_DOC]=!1,c[n.GoogleFileTypes.GOOGLE_DSS_SHEET]=!1,c.preview=!1,c);(function(e){e.pptx="pptx",e.docx="docx",e.xlsx="xlsx"})(g||(g={}));var h=((f={})[3503728]=((m={})[g.pptx]=n.GoogleFileTypes.GOOGLE_DSS_SLIDES,m[g.docx]=n.GoogleFileTypes.GOOGLE_DSS_DOC,m[g.xlsx]=n.GoogleFileTypes.GOOGLE_DSS_SHEET,m),f[661085]=((p={})[g.pptx]=n.MicrosoftEditors.POWERPOINT,p[g.docx]=n.MicrosoftEditors.WORD,p[g.xlsx]=n.MicrosoftEditors.EXCEL,p),f),y=((_={})[3503728]=u.CloudDocProviderIntegration.GDD_INTEGRATION,_);function M(e,t){if(e)switch(e.toLowerCase()){case"google_docs":case"gdoc":return n.GoogleFileTypes.GOOGLE_DSS_DOC;case"google_slides":case"gslides":return n.GoogleFileTypes.GOOGLE_DSS_SLIDES;case"google_sheets":case"gsheet":return n.GoogleFileTypes.GOOGLE_DSS_SHEET;case"wopi":return r.isPptExtension(t)?n.MicrosoftEditors.POWERPOINT:a.isWordDocExtension(t)?n.MicrosoftEditors.WORD:n.MicrosoftEditors.EXCEL;case"paper":return t;case"word":case"excel":case"powerpoint":return e;default:return}}t.maybeShowDynamicRoutingModal=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function(){var r;return i.__generator(this,(function(i){return r=n,s.getLockProviderAsync(e.id,t.file_id).then((function(i){var a=i.app_id;if(a&&h[a][r]&&(d.isBrowseFile(t)||d.isSharedFile(t))){var c=l.get_uri().getQuery().web_open_id,f=M(l.get_uri().getQuery().from_editor,n)||"preview",m={editorWithLock:h[a][r],currentEditor:f,file:t,user:e,showViewOnlyMode:v[f],openId:c,isLockEditorEnabled:!0};e.is_team?s.getTeamSettings(e.id).then((function(e){var t=e.settings;if(y.hasOwnProperty(a)){var i=y[a];m.isLockEditorEnabled=t[i][".tag"]===u.IntegrationCreateAndEdit[".tag"]}("preview"!==m.currentEditor||m.isLockEditorEnabled)&&o.showDynamicRoutingModal(m)})):o.showDynamicRoutingModal(m)}})),[2]}))}))},t.getCloudEditorString=M})),define("modules/clean/i18n/formatters",["require","exports","tslib","modules/core/i18n"],(function(e,t,i,n){"use strict";function r(e,t){return i.__assign(i.__assign({},n.intl),{formatMessage:function(e,i){return n.intl.formatMessage(t[e.id]||e,i)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.createFormatters=r,t.dummyI18nFormatters=r(0,{})})),define("modules/clean/image_preview_util",["require","exports","tslib","jquery"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n);var r={PREVIEW_IMAGE_CONTAINER:"preview-image-container",PREVIEW_IMAGE_WRAPPER:"preview-image-wrapper",PREVIEW_IMAGE:"preview-image",getPreviewImageContainer:function(){return n.default("."+this.PREVIEW_IMAGE_CONTAINER)},getPreviewImageWrapper:function(){return n.default("."+this.PREVIEW_IMAGE_WRAPPER)},getPreviewImage:function(){return this.getPreviewImageContainer().find("."+this.PREVIEW_IMAGE)},getPreviewImageElement:function(){return this.getPreviewImage()[0]}};t.default=r})),define("modules/clean/image_size",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[["480x320",480,320],["640x480",640,480],["800x600",800,600],["1024x768",1024,768],["1280x960",1280,960],["1600x1200",1600,1200],["2048x1536",2048,1536]];t.imageBestFitSize=function(e,t){for(var n=0,r=i;n<r.length;n++){var a=r[n],o=a[0],s=a[1],d=a[2];if(s>=e||d>=t)return o}return i[i.length-1][0]}})),define("modules/clean/loggers/file_preview_logger",["require","exports","tslib","modules/clean/ajax","modules/clean/react/file_viewer/constants","modules/clean/react/previews/constants","modules/clean/web_timing_logger","modules/constants/request","modules/core/browser"],(function(e,t,i,n,r,a,o,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),o=i.__importStar(o),s=i.__importStar(s),d=i.__importStar(d);var l={};l[r.EventType.FilePreviewSessionEnded]="preview_session_ended",l[r.EventType.FilePreviewAttemptStarted]="preview_attempted",l[r.EventType.FilePreviewSupportConfirmed]="support_confirmed",l[r.EventType.FilePreviewSupportDenied]="support_denied",l[r.EventType.FilePreviewDownloadAttempted]="download_attempted",l[r.EventType.FilePreviewDownloadSucceeded]="download_succeeded",l[r.EventType.FilePreviewDownloadFailed]="download_failed",l[r.EventType.FilePreviewRenderSucceeded]="render_succeeded",l[r.EventType.FilePreviewRenderFailed]="render_failed",l[r.EventType.FilePreviewFidelitySurveyAsked]="fidelity_survey_asked",l[r.EventType.FilePreviewFidelitySurveyAnswered]="fidelity_survey_answered",l[r.EventType.FilePreviewFidelitySurveyDismissed]="fidelity_survey_dismissed",l[r.EventType.FilePreviewUserAction]="user_action",l[r.EventType.ArchivePreviewContentsScanned]="archive_contents_scanned",l[r.EventType.FilePreviewModeDetermined]="file_preview_mode_determined",l[r.EventType.FilePreviewModeBounce]="file_preview_mode_bounce",l[r.EventType.SidebarPaneSelected]="sidebar_pane_selected",l[r.EventType.SidebarModeSelected]="sidebar_mode_selected",l[r.EventType.SidebarOpened]="sidebar_opened",l[r.EventType.SidebarClosed]="sidebar_closed",l[r.EventType.SidebarCollapsedShareClicked]="sidebar_collapsed_share_clicked",l[r.EventType.SidebarOpenedShareClicked]="sidebar_opened_share_clicked",l[r.EventType.FilePreviewUpsellClicked]="preview_upsell_clicked",l[r.EventType.FilePreviewUpsellExposed]="preview_upsell_exposed",l[r.EventType.PersistentFooterShown]="persistent_footer_shown",l[r.EventType.DecompressInitiated]="decompress_initiated",l[r.EventType.DecompressSucceeded]="decompress_succeeded",l[r.EventType.DecompressFailed]="decompress_failed";var u=(function(){function e(){this._eventHandlers={}}return e.prototype._getSerializedTimeline=function(e){return null},e.prototype.addEventHandlers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=e;i<n.length;i++){var r=n[i],a=r[0],o=r[1];this._eventHandlers[a]=o}},e.prototype._log=function(e,t,i){void 0===i&&(i={});var r=this._getSerializedTimeline(t),a={device_type:t.fileViewerSession.deviceType,event_name:l[e],extra:JSON.stringify(i),file_viewer_session_id:t.fileViewerSession.id,file_preview_session_id:t.id,file_ns_id:t.file.ns_id,file_sjid:t.file.sjid,file_preview_timeline:r?JSON.stringify(r):null,file_preview_size:t.previewSize};n.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:a})},e.prototype.listenTo=function(e){for(var t in this._eventHandlers)if(this._eventHandlers.hasOwnProperty(t)){var i=this._eventHandlers[t];e.addListener(t,i)}},e.prototype.unlistenTo=function(e){for(var t in this._eventHandlers)if(this._eventHandlers.hasOwnProperty(t)){var i=this._eventHandlers[t];e.removeListener(t,i)}},e})(),c=(function(e){function t(){var t=e.call(this)||this;return t._logAsked=function(e){t._log(r.EventType.FilePreviewFidelitySurveyAsked,e)},t._logAnswered=function(e,i){t._log(r.EventType.FilePreviewFidelitySurveyAnswered,e,i)},t._logDismissed=function(e,i){t._log(r.EventType.FilePreviewFidelitySurveyDismissed,e,i)},t.addEventHandlers([r.EventType.FilePreviewFidelitySurveyAsked,t._logAsked],[r.EventType.FilePreviewFidelitySurveyAnswered,t._logAnswered],[r.EventType.FilePreviewFidelitySurveyDismissed,t._logDismissed]),t}return i.__extends(t,e),t.prototype._log=function(t,i,n){void 0===n&&(n={}),n._client_time=+Date.now();var r=i.sourceContext,a=i.sourceAction;r&&(n._source_context=r),a&&(n._source_action=a),e.prototype._log.call(this,t,i,n)},t})(u);t.FilePreviewFidelitySurveyLogger=c;var f=(function(e){function t(t){var i=e.call(this)||this;return i._handleFilePreviewAttemptStarted=function(e,t){i._handleEvent(r.EventType.FilePreviewAttemptStarted,e,t)},i._handleFilePreviewSupportConfirmed=function(e,t){i._handleEvent(r.EventType.FilePreviewSupportConfirmed,e,t)},i._handleFilePreviewSupportDenied=function(e,t){i._handleEvent(r.EventType.FilePreviewSupportDenied,e,t)},i._handleFilePreviewDownloadAttempted=function(e,t){i._handleEvent(r.EventType.FilePreviewDownloadAttempted,e,t)},i._handleFilePreviewDownloadSucceeded=function(e,t){i._handleEvent(r.EventType.FilePreviewDownloadSucceeded,e,t)},i._handleFilePreviewDownloadFailed=function(e,t){i._handleEvent(r.EventType.FilePreviewDownloadFailed,e,t)},i._handleFilePreviewRenderSucceeded=function(e,t){i._handleEvent(r.EventType.FilePreviewRenderSucceeded,e,t)},i._handleFilePreviewRenderFailed=function(e,t){i._handleEvent(r.EventType.FilePreviewRenderFailed,e,t)},i._handleFilePreviewSessionEnded=function(e,t){i._handleEvent(r.EventType.FilePreviewSessionEnded,e,t)},i._filePreviewSessionId=t,i.addEventHandlers([r.EventType.FilePreviewAttemptStarted,i._handleFilePreviewAttemptStarted],[r.EventType.FilePreviewSupportConfirmed,i._handleFilePreviewSupportConfirmed],[r.EventType.FilePreviewSupportDenied,i._handleFilePreviewSupportDenied],[r.EventType.FilePreviewDownloadAttempted,i._handleFilePreviewDownloadAttempted],[r.EventType.FilePreviewDownloadSucceeded,i._handleFilePreviewDownloadSucceeded],[r.EventType.FilePreviewDownloadFailed,i._handleFilePreviewDownloadFailed],[r.EventType.FilePreviewRenderSucceeded,i._handleFilePreviewRenderSucceeded],[r.EventType.FilePreviewRenderFailed,i._handleFilePreviewRenderFailed],[r.EventType.FilePreviewSessionEnded,i._handleFilePreviewSessionEnded]),i}return i.__extends(t,e),t.prototype._handleEvent=function(e,t,i){if(void 0===i&&(i={}),this._filePreviewSessionId===t.id){i.preview_type=t.previewType,i.file_preview_timeline=JSON.stringify(this._getSerializedTimeline(t)),i.web_timing_logger_req_id=s.REQUEST_ID,i.source_context=t.sourceContext,i.source_action=t.sourceAction,null!=t.primaryMarkTs&&(i.primary_mark_ts=t.primaryMarkTs,i.time_to_primary_mark=t.timeToPrimaryMark());var n=o.start_time();if(null!=t.lastEvent&&(i.last_event=l[t.lastEvent]),t.sourceAction===a.PreviewSourceAction.Visit&&e===r.EventType.FilePreviewRenderSucceeded){var u=o.time_to_interactive();null!=u&&null!=n&&(i.time_to_interactive=u-n);var c=d.performance();if(null!=c){var f=c.timing;null!=f&&null!=n&&(i.time_to_first_byte=f.responseStart-n,i.web_timing_data=JSON.stringify(f))}window._timingData&&window._timingData.img&&(delete window._timingData.img.dl_error_finish,i.img_timing_data=JSON.stringify(window._timingData.img))}e===r.EventType.FilePreviewSessionEnded&&(i.password_needed=t.passwordNeeded),this._log(e,t,i)}},t.prototype._getSerializedTimeline=function(e){var t={};for(var i in e.previewTimeline)if(e.previewTimeline.hasOwnProperty(i)){var n=e.previewTimeline[i];t[this._timelineKey(i)]=n.timestamp}return t},t.prototype._timelineKey=function(e){return l[e]+"_ts"},t})(u);t.FilePreviewTimelineLogger=f;var m=(function(e){function t(){var t=e.call(this)||this;return t.logContentsScanned=function(e,i){t._log(r.EventType.ArchivePreviewContentsScanned,e,i)},t.addEventHandlers([r.EventType.ArchivePreviewContentsScanned,t.logContentsScanned]),t}return i.__extends(t,e),t})(u);t.FilePreviewArchiveLogger=m;var p=(function(e){function t(){var t=e.call(this)||this;return t._logUpsellExposed=function(e){t._log(r.EventType.FilePreviewUpsellExposed,e)},t._logUpsellClicked=function(e){t._log(r.EventType.FilePreviewUpsellClicked,e)},t.addEventHandlers([r.EventType.FilePreviewUpsellExposed,t._logUpsellExposed],[r.EventType.FilePreviewUpsellClicked,t._logUpsellClicked]),t}return i.__extends(t,e),t})(u);t.FilePreviewUpsellLogger=p;var _=(function(e){function t(){var t=e.call(this)||this;return t._logDecompressInitiated=function(e){t._log(r.EventType.DecompressInitiated,e)},t._logDecompressSucceeded=function(e){t._log(r.EventType.DecompressSucceeded,e)},t._logDecompressFailed=function(e,i){t._log(r.EventType.DecompressFailed,e,i)},t.addEventHandlers([r.EventType.DecompressInitiated,t._logDecompressInitiated],[r.EventType.DecompressSucceeded,t._logDecompressSucceeded],[r.EventType.DecompressFailed,t._logDecompressFailed]),t}return i.__extends(t,e),t})(u);t.FileConversionLogger=_;var g=(function(e){function t(){var t=e.call(this)||this;return t._logPersistentFooterShown=function(e){t._log(r.EventType.PersistentFooterShown,e)},t.addEventHandlers([r.EventType.PersistentFooterShown,t._logPersistentFooterShown]),t}return i.__extends(t,e),t})(u);t.FilePreviewConversionLogger=g;var v=(function(e){function t(){var t=e.call(this)||this;return t._logUserAction=function(e,i,n,a){a.action=i,a.context=n,t._log(r.EventType.FilePreviewUserAction,e,a)},t.addEventHandlers([r.EventType.FilePreviewUserAction,t._logUserAction]),t}return i.__extends(t,e),t})(u);t.FilePreviewUserActionLogger=v;var h=(function(e){function t(){var t=e.call(this)||this;return t.determinedTime=0,t.bounceLogged=!1,t.logDetermined=function(e,i){t.determinedTime=Date.now(),t._log(r.EventType.FilePreviewModeDetermined,e,i)},t.logBounce=function(e){if(!t.bounceLogged&&0!==t.determinedTime){t.bounceLogged=!0;var i=Date.now()-t.determinedTime;t._log(r.EventType.FilePreviewModeBounce,e,{time:i})}},t.addEventHandlers([r.EventType.FilePreviewModeDetermined,t.logDetermined],[r.EventType.FilePreviewModeBounce,t.logBounce]),t}return i.__extends(t,e),t})(u);t.FilePreviewModeLogger=h;var y=(function(e){function t(){var t=e.call(this)||this;return t.logSidebarPaneSelected=function(e,i){t._log(r.EventType.SidebarPaneSelected,e,i)},t.logSidebarModeSelected=function(e,i){t._log(r.EventType.SidebarModeSelected,e,i)},t.logSidebarOpened=function(e){t._log(r.EventType.SidebarOpened,e)},t.logSidebarClosed=function(e){t._log(r.EventType.SidebarClosed,e)},t.logSidebarCollapsedShareClicked=function(e){t._log(r.EventType.SidebarCollapsedShareClicked,e)},t.logSidebarOpenedShareClicked=function(e){t._log(r.EventType.SidebarOpenedShareClicked,e)},t.addEventHandlers([r.EventType.SidebarPaneSelected,t.logSidebarPaneSelected],[r.EventType.SidebarModeSelected,t.logSidebarModeSelected],[r.EventType.SidebarOpened,t.logSidebarOpened],[r.EventType.SidebarClosed,t.logSidebarClosed],[r.EventType.SidebarCollapsedShareClicked,t.logSidebarCollapsedShareClicked],[r.EventType.SidebarOpenedShareClicked,t.logSidebarOpenedShareClicked]),t}return i.__extends(t,e),t})(u);t.FilePreviewSidebarLogger=y})),define("modules/clean/loggers/file_viewer_logger",["require","exports","tslib","modules/clean/analytics","modules/clean/file_store/utils","modules/clean/api_v2/user_client","modules/clean/api_v2/noauth_client"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var s={Overall:"viewer_overall_time","Page Request":"viewer_page_request_time",Rendering:"viewer_rendering_time"};t.logPageRendered=function(e,t){e=e;for(var a=r.getExtension(e),o=i.__assign(i.__assign({},t.attributes),{total_time:-1,file_ext:a,source:"file-viewer",originalSize:null!=e.bytes?e.bytes:0}),d=0,l=t.stats;d<l.length;d++){var u=l[d];o[s[u.name]]=u.end-u.start}return n.UserActivityLogger.stop("web","file_view_first_page_rendered",o),n.PreviewActivityLogger.stop("file_view_first_page_rendered",{file_ext:a,extra:JSON.stringify(o)})},t.logView=function(e,t,i,n,r,s,d,l){void 0===d&&(d=!1),void 0===l&&(l=!1);var u=s?{url:s}:void 0,c={file_views:[{file_info:{file_identifier:e.file_id,shared_link_details:u},platform_type:{".tag":"web"},origin:n,action:r}]};return t?(new a.UserApiV2Client).ns("seen_state").rpc("log_file_view",c,{subjectUserId:t.id}):(new o.NoAuthApiV2Client).ns("seen_state").rpc("logged_out/log_file_view",c,{})}})),define("modules/clean/loggers/video_preview_logger",["require","exports","tslib","modules/clean/ajax","modules/clean/perf_tools/web_timing_utils"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var a=(function(){function e(e,t){this.videoTruncated=!1,this.filePreviewSessionId=t?t.id:"",this.videoFormat=e}return e.prototype.populateVideoDuration=function(e){this.videoDuration=Math.round(e)},e.prototype.setVideoTruncated=function(){this.videoTruncated=!0},e.prototype.logEvent=function(e,t){var i={event_name:e,client_timestamp_ms:r.WebTimingUtil.getNow(),file_preview_session_id:this.filePreviewSessionId,video_format:this.videoFormat,video_duration_seconds:this.videoDuration,video_truncated:this.videoTruncated,extra:t?JSON.stringify(t):void 0};n.SilentBackgroundBeaconRequest({url:"/log/video_preview",data:i})},e})();t.VideoPreviewLogger=a})),define("modules/clean/logging/hive/schemas/web-comments2",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){this.category="web-comments2",this.active_user_id=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.event=e.event,this.comment_gid=e.comment_gid,this.thread_gid=e.thread_gid,this.stream_gid=e.stream_gid,this.timestamp=Math.floor(Date.now()/1e3),this.is_annotation=e.is_annotation,this.time_comment_offset=e.time_comment_offset,this.file_extension=e.file_extension,this.file_obj_id=e.file_obj_id,this.platform=e.platform,this.oref_name=e.oref_name,this.ns_id=e.ns_id,this.file_size=e.file_size,this.error_message=e.error_message,this.annotation_type=e.annotation_type,this.page=e.page,this.referral_source=e.referral_source,this.product_surface=e.product_surface,this.is_mobile=e.is_mobile,this.annotation_position=e.annotation_position,this.is_third_party=e.is_third_party,Object.seal(this)};t.Comments2LoggingTableRow=i})),define("modules/clean/previews/actions",["require","exports","tslib","modules/clean/referrer_cleansing_redirect","modules/core/i18n"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.imagePrint=function(e){var t=window.open("about:blank");if(!t)throw new Error(r.intl.formatMessage({id:"X9xK6f",defaultMessage:"Could not open new window"}));window.setTimeout((function(){var i=t.document.createElement("style");i.innerHTML="\n      @page { margin: 0;}\n      img { max-width: 100%; max-height: 100%}\n    ",t.document.head.appendChild(i);var n=t.document.createElement("img");n.src=e,n.onload=function(){t.print()},n.onerror=function(){t.close()},t.document.body.appendChild(n)}),50)},t.docPrint=function(e){n.safe_open_tab_and_redirect(e)}})),define("modules/clean/previews/util",["require","exports","tslib","modules/core/browser","modules/clean/analytics","modules/clean/filepath","modules/clean/previews/constants","modules/clean/cloud_docs/constants","modules/clean/file_store/utils","modules/clean/react/previews/constants","file-viewer/core","modules/constants/file_viewer","modules/core/uri","modules/core/i18n","dbx-i18n"],(function(e,t,i,n,r,a,o,s,d,l,u,c,f,m,p){"use strict";function _(e,t){var i={};return i._subject_uid=String(t),e.updateQuery(i)}function g(e,t){return _(new f.URI({path:"/history"+e.fq_path}),t.id)}function v(e){return c.PRESENTATION_EXTS.map((function(e){return e.slice(1)})).includes(e)}function h(e){return["doc","docm","docx"].includes(e)}function y(e){return["odp","odt","rtf","wpd"].includes(e)}function M(e,t){var i=Number.MAX_VALUE;if("pdf"===e)i=Number(524288e3);else if(h(e)||y(e))i=o.MAX_WORD_DOC_FILE_SIZE_B;else if(v(e))i=o.MAX_PPT_FILE_SIZE_B;else if(t===o.PreviewType.Archive)i=o.MAX_ARCHIVE_FILE_SIZE_B;else if(t===o.PreviewType.HTML||t===o.PreviewType.Text)i=Number(8388608);else{if(t!==o.PreviewType.Linkfile)return;i=Number(10485760)}return i}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),a=i.__importStar(a),c=i.__importStar(c),t.getIframeQuery=function(){return".react-file-viewer__preview iframe"},t.shouldShowPlatformInfo=function(){return c.PASS_PLATFORM_INFO},t.is_excel2_file=function(e){return["xls","csv","ods"].indexOf(e.substring(0,3))>-1},t.getWhitelistedExtension=function(e){var t=a.file_extension(e);return c.LOGGING_ALLOWED_EXTS.includes("."+t)?t:c.LOGGING_EXT_PLACEHOLDER},t.getWhitelistedExtensionFromFile=function(e){var t=d.getExtension(e);return c.LOGGING_ALLOWED_EXTS.includes("."+t)?t:c.LOGGING_EXT_PLACEHOLDER},t.normalize_extension=function(e){if("indd"===e)return e;var t=e.substring(0,3);switch(t){case"rtf":case"odt":case"wpd":return"doc";case"pps":case"odp":return"ppt";case"csv":case"ods":return"xls";default:return t}},t.getModifierString=function(e){if(e.ts)return p.timeSince(m.intl,1e3*e.ts,{displayLocation:"label"})},t.update_url_for_annotation=function(e){return e=(e=e.updateQuery({annotation_highlight:"1"})).updateQuery({annotation_region:"1"})},t.update_url_with_user_id=_,t.getVersionHistoryUrl=g,t.redirectToVersionHistory=function(e,t){r.UserActivityLogger.log("web","view_version_history");var i=g(e,t);n.redirect(i.toString())},t.VALID_PREVIEW_TYPES=[o.PreviewType.Archive,o.PreviewType.Audio,o.PreviewType.CloudDoc,o.PreviewType.Excel,o.PreviewType.HTML,o.PreviewType.Image,o.PreviewType.Linkfile,o.PreviewType.Other,o.PreviewType.SsrDoc,o.PreviewType.RawHTML,o.PreviewType.Restricted,o.PreviewType.Video,o.PreviewType.Doc,o.PreviewType.Photo,o.PreviewType.Text],t.isPptExtension=v,t.isWordDocExtension=h,t.isLibreOfficeExtension=y,t.getFileSizeLimit=M,t.filesizeSupported=function(e,t){var i=e.bytes;if(void 0===i)return!0;var n=M(d.getExtension(e),t);return!n||i<=n},t.isEmptyFile=function(e){return 0===e.bytes},t.mapRivieraStatusToErrorType=function(e){var t=l.ErrorType.LoadError;return e===u.RivieraStatus.TooBig?t=l.ErrorType.FileSizeError:e===u.RivieraStatus.PasswordProtected&&(t=l.ErrorType.PasswordProtectedError),t},t.iOSIframeScrollStyles=function(){return{overflow:"auto","-webkit-overflow-scrolling":"touch"}},t.tagCriticalPathContentRequest=function(e,t){return e&&t?f.URI.parse(e).updateQuery({psid:t.id}).toString():e},t.isLimitedPreview=function(e,t){return o.IworkExtensions.includes(d.getExtension(e))&&!e.is_dir&&t===o.PreviewType.Image},t.isSupportedBundleFile=function(e){return o.IworkExtensions.includes(d.getExtension(e))},t.isCloudDocPreview=function(e){return e.preview_type===o.PreviewType.CloudDoc||s.isCloudBasedFileByExtension(d.getExtension(e))}})),define("modules/clean/react/comments2/components/annotations/empty_layer",["require","exports","tslib","react"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.EmptyLayer=function(e){return n.default.createElement("div",{style:{position:"absolute",left:0,top:0,right:0,bottom:0}},e.children)}}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};define("modules/clean/react/comments2/components/annotations/loadable",["require","exports","modules/clean/react/async/loadable","modules/clean/react/comments2/components/annotations/empty_layer"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationViewLayer=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/comments2/components/annotations/annotation_view_layer"],t,i)})).then(__importStar).then((function(e){return e.AnnotationViewLayer}))}}),t.AnnotationConductorLayer=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/comments2/components/annotations/annotation_conductor_layer"],t,i)})).then(__importStar).then((function(e){return e.AnnotationConductorLayer}))},loading:n.EmptyLayer}),t.AnnotationInstructionalTooltipPane=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/comments2/components/annotations/annotation_instructional_tooltip_pane"],t,i)})).then(__importStar).then((function(e){return e.AnnotationInstructionalTooltipPane}))},loading:n.EmptyLayer})})),define("modules/clean/react/comments2/components/snackbars",["require","exports","tslib","react","modules/clean/react/snackbar","modules/core/i18n"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n);var o=a.intl.formatMessage({id:"JfgcFN",defaultMessage:"Close"}),s=a.intl.formatMessage({id:"IKXfnc",defaultMessage:"Retry"});t.showSuccessSnackbar=function(e){var t=e.message,i=n.default.createElement(r.Snackbar,{title:t,variant:"complete",closeButtonText:o,id:"comments2"});r.Snackbar.show(i)},t.showErrorSnackbar=function(e){var t=e.message,i=e.retryFn,a=i?n.default.createElement(r.Snackbar,{title:t,variant:"fail",closeButtonText:o,actionButtonText:s,onActionClick:function(){i(),r.Snackbar.close()},id:"comments2"}):n.default.createElement(r.Snackbar,{title:t,variant:"fail",closeButtonText:o,id:"comments2"});r.Snackbar.show(a)}})),define("modules/clean/react/comments2/data/api",["require","exports","tslib","modules/clean/api_v2/error","modules/clean/api_v2/user_client","modules/clean/api_v2/noauth_client","modules/core/exception"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o);var s=function(e,t,i){this.code=e,this.message=t,this.apiError=i};function d(e,t){if(e instanceof n.ApiError){var i=t;return e.message&&(i+=". Detailed message: "+e.message.toString()),new s(e.error[".tag"],i,e)}return e}function l(e){var t={".tag":e.type};return e.linkUrl?{type:t,identifier:{".tag":"shared_link_details",url:e.linkUrl}}:{type:t,identifier:{".tag":"file_path_or_id",file_path_or_id:e.id}}}t.Comments2Error=s,(function(e){e.FILE_NOT_FOUND="file_not_found",e.PERMISSION_DENIED="permission_denied",e.BAD_REQUEST="bad_request"})(t.ErrorCode||(t.ErrorCode={}));var u=(function(){function e(e){this.routes=(new a.NoAuthApiV2Client).ns("comments2"),this.params={},this.stream=l(e)}return e.prototype.listComments=function(e,t){return void 0===e&&(e=!1),this.routes.rpc("logged_out/list_comments",{stream:this.stream,cursor:t,include_permissions:e},this.params).catch((function(e){throw d(e,"/logged_out/list_comments did not complete successfully")}))},e.prototype.logPerfEvent=function(e,t,i){return void 0===i&&(i={}),this.logPerfEventImpl(e,t,i)},e.prototype.logPerfEventImpl=function(e,t,i){var n=i.threadId,r=i.commentId,a=i.oref,s=i.errorMessage,l={event:e,value:t,stream:this.stream,thread_id:n,comment_id:r,error_message:s,oref:a};return this.routes.rpc("log_perf_event",l,this.params).catch((function(e){throw o.reportStack("comments2 perf logging failed",{severity:o.SEVERITY.NONCRITICAL,tags:["comments2_logging"],exc_extra:l}),d(e,"/log_perf_event did not complete successfully")}))},e})();t.Comments2LoggedOutApi=u;var c=(function(){function e(e,t){var i=new r.UserApiV2Client;this.routes=i.ns("comments2"),this.stickerRoutes=i.ns("stickers"),this.filesRoutes=i.ns("files"),this.mediaAddonRoutes=i.ns("media_addon"),this.params={subjectUserId:e},this.stream=l(t)}return e.prototype.getStickers=function(){return this.stickerRoutes.rpc("get_stickers",void 0,this.params).catch((function(e){throw d(e,"/get_stickers did not complete successfully")}))},e.prototype.getMediaFeatures=function(){return this.mediaAddonRoutes.rpc("get_features",void 0,this.params).catch((function(e){throw d(e,"/get_features did not complete successfully")}))},e.prototype.getFileMetadata=function(e,t){return this.filesRoutes.rpc("get_file_content_metadata",{file_path_or_id:e,url:t},this.params).catch((function(e){throw d(e,"/get_file_content_metadata did not complete successfully")}))},e.prototype.checkOnboardingStatus=function(){return this.routes.rpc("check_onboarding_status",void 0,this.params).catch((function(e){throw d(e,"/check_onboarding_status did not complete successfully")}))},e.prototype.createThread=function(e,t){return this.routes.rpc("add_comment",{stream:this.stream,comment:e,source:t},this.params).catch((function(e){throw d(e,"/add_comment (new comment) did not complete successfully")}))},e.prototype.deleteComment=function(e){return this.routes.rpc("delete_comment",{stream:this.stream,id:e},this.params).catch((function(e){throw d(e,"/delete_comment did not complete successfully")}))},e.prototype.disableCommenting=function(){return this.routes.rpc("disable_commenting",{stream:this.stream},this.params).catch((function(e){throw d(e,"/disable_commenting did not complete successfully")}))},e.prototype.editComment=function(e,t){return this.routes.rpc("edit_comment",{stream:this.stream,id:e,comment:t},this.params).catch((function(e){throw d(e,"/edit_comment did not complete successfully")}))},e.prototype.enableCommenting=function(){return this.routes.rpc("enable_commenting",{stream:this.stream},this.params).catch((function(e){throw d(e,"/enable_commenting did not complete successfully")}))},e.prototype.listComments=function(e,t){return void 0===e&&(e=!1),this.routes.rpc("list_comments",{stream:this.stream,cursor:t,include_permissions:e},this.params).catch((function(e){throw d(e,"/list_comments did not complete successfully")}))},e.prototype.logPerfEvent=function(e,t){return this.logPerfEventImpl(e,t)},e.prototype.logSimplePerfEvent=function(e,t){return this.logPerfEvent({".tag":e},t)},e.prototype.logPerfEventImpl=function(e,t){var i={event:e,value:t,stream:this.stream};return this.routes.rpc("log_perf_event",i,this.params).catch((function(e){throw o.reportStack("comments2 perf logging failed",{severity:o.SEVERITY.NONCRITICAL,tags:["comments2_logging"],exc_extra:i}),d(e,"/log_perf_event did not complete successfully")}))},e.prototype.markHasOnboarded=function(e){var t={".tag":e};return this.routes.rpc("mark_has_onboarded",{type:t},this.params).catch((function(e){throw d(e,"/mark_has_onboarded did not complete successfully")}))},e.prototype.markThreadRead=function(e){return this.routes.rpc("mark_thread_read",{stream:this.stream,id:e},this.params).catch((function(e){throw d(e,"/mark_thread_read did not complete successfully")}))},e.prototype.markThreadUnread=function(e){return this.routes.rpc("mark_thread_unread",{stream:this.stream,id:e},this.params).catch((function(e){throw d(e,"/mark_thread_unread did not complete successfully")}))},e.prototype.markThreadResolved=function(e){return this.routes.rpc("resolve_thread",{stream:this.stream,id:e},this.params).catch((function(e){throw d(e,"/resolve_thread did not complete successfully")}))},e.prototype.markThreadUnresolved=function(e){return this.routes.rpc("unresolve_thread",{stream:this.stream,id:e},this.params).catch((function(e){throw d(e,"/unresolve_thread did not complete successfully")}))},e.prototype.replyToThread=function(e,t){return this.routes.rpc("add_comment",{stream:this.stream,comment:e,thread_id:t},this.params).catch((function(e){throw d(e,"/add_comment (reply comment) did not complete successfully")}))},e.prototype.subscribe=function(){return this.routes.rpc("subscribe",{stream:this.stream},this.params).catch((function(e){throw d(e,"/subscribe did not complete successfully")}))},e.prototype.unsubscribe=function(){return this.routes.rpc("unsubscribe",{stream:this.stream},this.params).catch((function(e){throw d(e,"/unsubscribe did not complete successfully")}))},e})();t.Comments2Api=c})),define("modules/clean/react/comments2/data/initial_state",["require","exports","modules/clean/react/comments2/data/types"],(function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={context:void 0,data:{editorIsEmpty:!0,threads:{},authors:{},activatedThreadId:void 0,documentRectangleToMakeVisible:void 0,hoverThreadId:void 0,cursor:void 0,modalVariantsShown:(n={},n[i.ModalVariant.EmailVerifyModal]=!1,n[i.ModalVariant.SignUpModal]=!1,n),onboardingVariants:{premium_av_comments_pane_surface:!1,premium_av_preview_surface:!1,non_premium_av_comments_pane_surface:!1,not_annotatable_file_comments_pane_surface:!1,how_to_at_mention_comments_pane_surface:!1,image_preview_surface:!1,document_preview_surface:!1,share_as_comment:!1},framePreciseCommentsEnabled:!1,frameRate:void 0,pendingAnnotationInfo:{playerCurrentTime:0,playerCurrentTimeSec:0,annotationMayBeOffscreen:!1},showResolved:!1,canSeeCommentEditor:!1,playerIntegrationEnabled:!1,enabledStatus:{canEnable:!1},subscriptionStatus:{canSubscribe:!1,isSubscribed:!1},requestEditorFocus:!1,visibleInSidebar:!0,perfEvents:{},upsellTooltipVariant:void 0,thirdPartySource:void 0,stickers:void 0},statuses:{}}})),define("modules/clean/react/comments2/data/logger",["require","exports","tslib","external/lodash","modules/clean/logging/hive/schemas/web-comments2","modules/clean/logging/telemetry","modules/clean/previews/util","modules/clean/react/comments2/data/util","modules/clean/react/comments2/util","modules/constants/python","modules/core/browser","modules/core/browser_detection"],(function(e,t,i,n,r,a,o,s,d,l,u,c){"use strict";var f;function m(){var e=u.get_uri().getQuery().oref,t=n.findKey(l.OREF_CONSTANTS,(function(t){return t===e})),i={oref_name:t=t&&t.toLowerCase(),platform:"web",is_mobile:c.is_mobile_or_tablet(),product_surface:"file_preview"};return e===l.OREF_CONSTANTS.DESKTOP_HARMONY&&(i.referral_source="badge"),i}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),a=i.__importStar(a),u=i.__importStar(u),t.hiveLogger=new a.HiveLogger,(function(e){e.PageLevel="page-level",e.Targeted="targeted"})(f||(f={})),t.logEvent=function(e,n){var a=i.__assign({event:e},m());if(n){var l=n.commentId,u=n.stream,c=n.thread,p=n.threadId;l&&(a.comment_gid=l),p&&(a.thread_gid=p),c&&(a.thread_gid=c.id,a.is_annotation=!!c.annotation,a.is_third_party=c.isThirdParty,s.isThreadWithTimecodeAnnotation(c)&&(a.annotation_type="time",a.time_comment_offset=c.annotation.time),s.isThreadWithDocumentAnnotation(c)&&(a.annotation_type=c.annotation.regionType,a.page=c.annotation.regions[0].page,a.annotation_position=d.isFullPageAnnotation(c.annotation)?f.PageLevel:f.Targeted),s.isThreadWithImageAnnotation(c)&&(a.annotation_type="rectangle",a.annotation_position=d.isFullImageAnnotation(c.annotation)?f.PageLevel:f.Targeted)),u&&(a.stream_gid=u.id,a.file_obj_id=u.id,a.ns_id=u.ns_id,a.file_size=u.bytes,a.file_extension=o.getWhitelistedExtension(u.filename))}t.hiveLogger.log(new r.Comments2LoggingTableRow(a))},t.logErrorEvent=function(e,n){var a=n.stream,s=i.__assign({event:"comment_error",error_message:e},m());a&&(s.stream_gid=a.id,s.file_obj_id=a.id,s.ns_id=a.ns_id,s.file_size=a.bytes,s.file_extension=o.getWhitelistedExtension(a.filename)),t.hiveLogger.log(new r.Comments2LoggingTableRow(s))}})),define("modules/clean/react/comments2/data/perf_util",["require","exports"],(function(e,t){"use strict";function i(){return+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.threadActionCompleted=function(e,t){return{".tag":"thread_action_completed_ms",action:e,error_message:t}},t.commentActionCompleted=function(e,t){return{".tag":"comment_action_completed_ms",action:e,error_message:t}},t.mentionsQueryCompleted=function(){return{".tag":"mentions_query_completed_ms"}},t.currentTime=i,t.withTiming=function(e,t){var n=i();return function(r){e(r);var a=i()-n;t(a)}}})),define("modules/clean/react/comments2/data/reducer_helper",["require","exports","tslib","modules/clean/redux/types"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStatusReducer=function(e){for(var t={},r=0,a=Object.keys(e).map((function(t){return e[t]}));r<a.length;r++){var o=a[r];"async"===o.type&&(t[o.actionTypes.request]={name:o.name,status:n.ApiClientStatus.Request},t[o.actionTypes.error]={name:o.name,status:n.ApiClientStatus.Error})}return function(e,n){var r,a=t[n.type];return a&&(e=i.__assign(i.__assign({},e),((r={})[a.name]=a.status,r))),e}},t.createActionReducer=function(){return function(e,t){switch(e.type){case"async":return"function"==typeof t?[[e.actionTypes.success,t]]:[t.Error&&[e.actionTypes.error,t.Error],t.Request&&[e.actionTypes.request,t.Request],t.Success&&[e.actionTypes.success,t.Success]].filter((function(e){return e}));case"sync":if("function"==typeof t)return[[e.actionType,t]]}throw new Error}},t.createReducerFrom=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i={},n=0,r=e;n<r.length;n++)for(var a=r[n],o=0,s=a;o<s.length;o++){var d=s[o],l=d[0],u=d[1];i[l]||(i[l]=[]),i[l].push(u)}return function(e,t){for(var n=0,r=i[t.type]||[];n<r.length;n++){var a=r[n],o=t.meta&&t.meta.args;e=a(e,"payload"in t?t.payload:t.error,o)}return e}}})),define("modules/clean/react/comments2/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.Pending=0]="Pending",e[e.Comments1=1]="Comments1",e[e.Disabled=2]="Disabled",e[e.ReadOnly=3]="ReadOnly",e[e.FullyEnabled=4]="FullyEnabled"})(t.Comments2ContextStatus||(t.Comments2ContextStatus={})),(function(e){e.EmailVerifyModal="EmailVerifyModal",e.SignUpModal="SignUpModal"})(t.ModalVariant||(t.ModalVariant={})),(function(e){e[e.EditorFocus=0]="EditorFocus",e[e.OnPost=1]="OnPost"})(t.ShowModalReason||(t.ShowModalReason={})),(function(e){e.Chronological="CHRONOLOGICAL",e.VideoTimeCode="VIDEO_TIME_CODE"})(t.SortType||(t.SortType={})),(function(e){e[e.ThreadActivated=0]="ThreadActivated",e[e.UIButtonClicked=1]="UIButtonClicked"})(t.MarkThreadReadOrigin||(t.MarkThreadReadOrigin={}))})),define("modules/clean/react/comments2/data/util",["require","exports","tslib","modules/clean/react/comments2/util"],(function(e,t,i,n){"use strict";function r(e){var t=e.annotation;return!!t&&"document"===t.type}Object.defineProperty(t,"__esModule",{value:!0}),t.isThreadWithDocumentAnnotation=r,t.isThreadWithImageAnnotation=function(e){var t=e.annotation;return!!t&&"image"===t.type},t.isThreadWithTimecodeAnnotation=function(e){var t=e.annotation;return!!t&&n.isTimecodeAnnotation(t)},t.documentRectangleFromThread=function(e){if(e&&r(e)){var t=e.annotation.regions[0];return i.__assign(i.__assign({},t),{page:t.page-1})}}})),define("modules/clean/react/comments2/util",["require","exports","tslib","external/lodash","modules/core/browser_detection","modules/constants/comments2","comments2/components/annotation_utils","modules/core/browser_detection"],(function(e,t,i,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);function d(e){return function(t,i){return void 0===t||void 0===i?t===i:e(t,i)}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d((function(t,i){return e.every((function(e){return t[e]===i[e]}))}))}function u(e){return void 0!==e&&("audio"===e.type||"video"===e.type)}function c(e,t,i){return t<=e&&e<=i}t.createBackoff=function(e,t){void 0===e&&(e=1e3),void 0===t&&(t=3e5);var i,n=0;return{resetBackoff:function(){n=0,clearTimeout(i)},backoff:function(r){return i=setTimeout(r,Math.random()*Math.min(e*(Math.pow(2,n++)-1),t))}}},t.isUserSame=l("id"),t.isStreamSame=l("type","id"),t.isContextSame=d((function(e,i){return t.isStreamSame(e.stream,i.stream)&&t.isUserSame(e.viewer,i.viewer)})),t.findCommentThread=function(e,t){for(var i=0,r=e;i<r.length;i++){var a=r[i],o=n.find(a.comments,{id:t});if(o)return{comment:o,thread:a}}return null},t.getAnnotationInfoForThread=function(e){var t=e.annotation;if(u(t))return{playerCurrentTime:t.time,playerCurrentTimeSec:o.isVideoAnnotation(t)?t.timeSec:void 0,annotationMayBeOffscreen:!1}},t.isComments2Mobile=r.is_mobile_or_tablet,t.canShowUnreadPill=function(){return!s.msie},t.isTimecodeAnnotation=u,t.useBolt=function(){return!a.COMMENTS2_DISABLE_BOLT};var f=function(e,t,i){return Math.min.apply(Math,(function(e){return"image"===e.annotation.type?[e.annotation.region]:e.annotation.regions})(e).map((function(e){return(function(e,t,i){var n=e.x+e.width,r=e.y+e.height,a=function(e,t){return e<t?e:1/0};if(c(t.x,e.x,n)&&c(t.y,e.y,r)){var o=16/i.width,s=16/i.height;return Math.min(a(Math.min(t.x-e.x,n-t.x),o),a(Math.min(t.y-e.y,r-t.y),s))}return 1/0})(e,t,i)})))};function m(e){var t=e.x,i=e.y,n=e.width,r=e.height;return 0===t&&0===i&&1===n&&1===r}t.getThreadForNumberedAnnotationAtPoint=function(e,t,i){return n=function(t){return f(t,e,i)},t.reduce((function(e,t){var i=e.minRank,r=e.minElem,a=n(t);return i<=a?{minRank:i,minElem:r}:{minRank:a,minElem:t}}),{minRank:1/0,minElem:void 0}).minElem;var n},t.isFullPageAnnotation=function(e){return 1===e.regions.length&&m(e.regions[0])},t.isFullImageAnnotation=function(e){return m(e.region)},t.createFullRectangle=function(){return{x:0,y:0,width:1,height:1}}})),define("modules/clean/react/comments2/video_annotations/annotation_helper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.unitConvertSecondsToDomainObjectTime=function(e){return null!=e?Math.round(100*e):0},e.unitConvertDomainObjectTimeToSeconds=function(e){return null!=e?e/100:0}})(t.VideoAnnotationHelper||(t.VideoAnnotationHelper={}))})),define("modules/clean/react/comments2/video_annotations/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes={PAUSE:"PAUSE",SEEK_POSITION_AND_PAUSE:"SEEK_POSITION_AND_PAUSE"}})),define("modules/clean/react/comments2/video_annotations/video_preview_event_emitter",["require","exports","tslib","eventemitter3"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.videoPreviewEventEmitter=new n.default})),define("modules/clean/react/file_metadata/component/metadata_details_body",["require","exports","tslib","react"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.FileMetadataField=function(e){return e.value?n.default.createElement("div",{className:"file-metadata__field"},n.default.createElement("div",{className:"file-metadata__field-name"},e.name),n.default.createElement("div",{className:"file-metadata__field-value"},e.value)):null},t.MetadataDetailsBody=function(e){var i=e.title,r=e.fields.map((function(e){return n.default.createElement(t.FileMetadataField,{key:e.name,name:e.name,value:e.value})}));return n.default.createElement("div",{className:"file-metadata__section"},i&&n.default.createElement("div",{className:"file-metadata__section-header"},i),r)}})),define("modules/clean/react/file_metadata/component/metadata_details",["require","exports","tslib","react","modules/clean/react/file_metadata/data/actions","modules/clean/react/file_metadata/data/selectors","react-redux","modules/clean/file_store/utils","modules/clean/react/file_metadata/data/store","modules/clean/react/file_metadata/constants","modules/clean/react/file_metadata/component/metadata_details_body","modules/clean/react/file_metadata/strings","modules/clean/react/file_metadata/data/type_guards","modules/clean/redux/types","modules/clean/components/loading_indicator","modules/clean/previews/constants","modules/clean/react/file_metadata/utils"],(function(e,t,i,n,r,a,o,s,d,l,u,c,f,m,p,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchUploadInfoMetadata(),this.fetchFiletypeInfoMetadata()},t.prototype.componentDidUpdate=function(e){this.fetchUploadInfoMetadata(),this.fetchFiletypeInfoMetadata()},t.prototype.shouldShowLoadingSpinner=function(){var e=this.props,t=e.isActiveTab,i=e.uploadInfo,n=e.filetypeInfo,r=i&&i.apiStatus===m.ApiClientStatus.Fetch,a=n&&n.apiStatus===m.ApiClientStatus.Fetch;return t&&(r||a)},t.prototype.shouldFetchFiletypeInfoMetadata=function(){var e=this.props,t=e.user,i=e.isActiveTab,n=e.filetypeInfo,r=e.previewType,a=e.file,o=n&&void 0!==n.apiStatus,d=r===_.PreviewType.Image||l.SupportedOfficeExtensions.includes(s.getExtension(a))||"pdf"===s.getExtension(a)||r===_.PreviewType.Audio||r===_.PreviewType.Video;return null!=t&&i&&!o&&d},t.prototype.shouldFetchUploadInfoMetadata=function(){var e=this.props,t=e.user,i=e.isActiveTab,n=e.uploadInfo,r=n&&void 0!==n.apiStatus;return null!=t&&i&&!r},t.prototype.fetchUploadInfoMetadata=function(){if(this.shouldFetchUploadInfoMetadata()){var e=this.props,t=e.fetchUploadInfo,i=e.file,n=e.user,r=e.sharedLinkInfo,a=r?r.url:void 0;t({fileId:i.file_id,user:n,sharedLinkUrl:a})}},t.prototype.fetchFiletypeInfoMetadata=function(){if(this.shouldFetchFiletypeInfoMetadata()){var e=this.props,t=e.fetchFiletypeInfo,i=e.file,n=e.user,r=e.sharedLinkInfo,a=r?r.url:void 0;t({fileId:i.file_id,user:n,sharedLinkUrl:a})}},t.prototype.render=function(){var e,t=this.props,i=t.uploadInfo,r=t.filetypeInfo,a=t.file,o=t.sharedLinkInfo,s=r?r.metadata:void 0;return f.isImageSpecificMetadata(s)?e=n.default.createElement(u.MetadataDetailsBody,{title:c.FileMetadataSectionHeaders.imageFiletypeInfo,fields:g.getImageSpecificDataFields(s)}):f.isOfficeSpecificMetadata(s)&&g.getOfficeSpecificDataFields(s).some((function(e){return!!e.value}))?e=n.default.createElement(u.MetadataDetailsBody,{title:c.FileMetadataSectionHeaders.officeFiletypeInfo,fields:g.getOfficeSpecificDataFields(s)}):f.isPDFSpecificMetadata(s)?e=n.default.createElement(u.MetadataDetailsBody,{title:c.FileMetadataSectionHeaders.PdfFiletypeInfo,fields:g.getPDFSpecificDataFields(s)}):f.isAudioSpecificMetadata(s)?e=n.default.createElement(u.MetadataDetailsBody,{title:c.FileMetadataSectionHeaders.AudioFiletypeInfo,fields:g.getAudioSpecificDataFields(s)}):f.isVideoSpecificMetadata(s)&&(e=n.default.createElement(u.MetadataDetailsBody,{title:c.FileMetadataSectionHeaders.VideoFiletypeInfo,fields:g.getVideoSpecificDataFields(s)})),n.default.createElement("div",{className:"file-metadata"},n.default.createElement(u.MetadataDetailsBody,{fields:g.getUploadInfoDataFields(i,o,a)}),e,this.shouldShowLoadingSpinner()&&n.default.createElement("div",{className:"file-metadata__loading-indicator"},n.default.createElement(p.LoadingIndicator,{style:p.LoadingIndicator.LoadingIndicatorStyle.BLUE_SPINNER})))},t})((n=i.__importDefault(n)).default.Component);t.UnconnectedMetadataDetails=v;var h={fetchUploadInfo:r.fetchUploadInfo,fetchFiletypeInfo:r.fetchFiletypeInfo},y=o.connect((function(e,t){return{uploadInfo:a.getUploadInfo(e,t.file.file_id),filetypeInfo:a.getFiletypeInfo(e,t.file.file_id)}}),h);t.ConnectedMetadataDetails=y(v);var M=d.getStoreForPreviewMetadata();t.MetadataDetails=function(e){return n.default.createElement(o.Provider,{store:M},n.default.createElement(t.ConnectedMetadataDetails,i.__assign({},e)))}})),define("modules/clean/react/file_metadata/data/actions",["require","exports","tslib","modules/clean/react/file_metadata/api","modules/clean/react/file_metadata/data/types"],(function(e,t,i,n,r){"use strict";function a(e){return{type:r.Actions.GetUploadInfoApiFetch,payload:{fileId:e}}}function o(e,t){return{type:r.Actions.GetUploadInfoApiSuccess,payload:{fileId:e,uploadInfo:d(t)}}}function s(e,t){return{type:r.Actions.GetUploadInfoApiError,payload:{fileId:e,error:t}}}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.getUploadInfoApiFetch=a,t.getUploadInfoApiSuccess=o,t.getUploadInfoApiError=s;var d=function(e){return{uploadDate:e.uploaded,displayName:e.display_name}};function l(e){return{type:r.Actions.GetFileContentMetadataApiFetch,payload:{fileId:e}}}function u(e,t){return{type:r.Actions.GetFileContentMetadataApiSuccess,payload:{fileId:e,filetypeInfo:f(t)}}}function c(e,t){return{type:r.Actions.GetFileContentMetadataApiError,payload:{fileId:e,error:t}}}t.getFileContentMetadataApiFetch=l,t.getFileContentMetadataApiSuccess=u,t.getFileContentMetadataApiError=c;var f=function(e){return{metadata:i.__assign({},e.metadata)}};t.fetchUploadInfo=function(e){var t=e.fileId,i=e.user,r=e.sharedLinkUrl;return function(e){e(a(t));var d=n.fetchUploadInfo({fileId:t,user:i,sharedLinkUrl:r});return d.then((function(i){return e(o(t,i)),i})).catch((function(i){return e(s(t,i)),i})),d}},t.fetchFiletypeInfo=function(e){var t=e.fileId,i=e.user,r=e.sharedLinkUrl;return function(e){e(l(t));var a=n.fetchFileContentMetadata({fileId:t,user:i,sharedLinkUrl:r});return a.then((function(i){return e(u(t,i)),i})).catch((function(i){return e(c(t,i)),i})),a}}})),define("modules/clean/react/file_metadata/data/reducer",["require","exports","tslib","modules/clean/react/file_metadata/data/types","modules/clean/redux/types"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState={},t.fileMetadataReducer=function(e,a){var o,s,d,l,u,c;switch(void 0===e&&(e=t.initialState),a.type){case n.Actions.GetUploadInfoApiFetch:return i.__assign(i.__assign({},e),((o={})[a.payload.fileId]=i.__assign(i.__assign({},e[a.payload.fileId]),{uploadInfo:{apiStatus:r.ApiClientStatus.Fetch}}),o));case n.Actions.GetUploadInfoApiSuccess:return i.__assign(i.__assign({},e),((s={})[a.payload.fileId]=i.__assign(i.__assign({},e[a.payload.fileId]),{uploadInfo:i.__assign(i.__assign({},a.payload.uploadInfo),{apiStatus:r.ApiClientStatus.Success})}),s));case n.Actions.GetUploadInfoApiError:return i.__assign(i.__assign({},e),((d={})[a.payload.fileId]=i.__assign(i.__assign({},e[a.payload.fileId]),{uploadInfo:{apiStatus:r.ApiClientStatus.Error,error:a.payload.error}}),d));case n.Actions.GetFileContentMetadataApiFetch:return i.__assign(i.__assign({},e),((l={})[a.payload.fileId]=i.__assign(i.__assign({},e[a.payload.fileId]),{filetypeInfo:{apiStatus:r.ApiClientStatus.Fetch}}),l));case n.Actions.GetFileContentMetadataApiSuccess:return i.__assign(i.__assign({},e),((u={})[a.payload.fileId]=i.__assign(i.__assign({},e[a.payload.fileId]),{filetypeInfo:i.__assign(i.__assign({},a.payload.filetypeInfo),{apiStatus:r.ApiClientStatus.Success})}),u));case n.Actions.GetFileContentMetadataApiError:return i.__assign(i.__assign({},e),((c={})[a.payload.fileId]=i.__assign(i.__assign({},e[a.payload.fileId]),{filetypeInfo:{apiStatus:r.ApiClientStatus.Error,error:a.payload.error}}),c));default:return e}}})),define("modules/clean/react/file_metadata/data/selectors",["require","exports","modules/clean/redux/namespaces","modules/clean/redux/selectors"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return n.getStateAtNamespace(e,i.PREVIEW_METADATA_NAMESPACE_KEY)};t.getUploadInfo=function(e,t){var i=r(e)[t];return i?i.uploadInfo:void 0},t.getFiletypeInfo=function(e,t){var i=r(e)[t];return i?i.filetypeInfo:void 0}})),define("modules/clean/react/file_metadata/data/store",["require","exports","tslib","external/lodash","modules/clean/redux/namespaces","modules/clean/redux/store","modules/clean/react/file_metadata/data/reducer"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.getStoreForPreviewMetadata=n.once((function(){var e;return a.getStoreAndRegisterReducers(((e={})[r.PREVIEW_METADATA_NAMESPACE_KEY]=o.fileMetadataReducer,e))}))})),define("modules/clean/react/file_metadata/data/type_guards",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageSpecificMetadata=function(e){return!!e&&"image"===e[".tag"]},t.isOfficeSpecificMetadata=function(e){return!!e&&"ms_office"===e[".tag"]},t.isPDFSpecificMetadata=function(e){return!!e&&"pdf"===e[".tag"]},t.isAudioSpecificMetadata=function(e){return!!e&&"audio"===e[".tag"]},t.isVideoSpecificMetadata=function(e){return!!e&&"video"===e[".tag"]}})),define("modules/clean/react/file_metadata/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.GetUploadInfoApiFetch="GetUploadInfoApiFetch",e.GetUploadInfoApiSuccess="GetUploadInfoApiSuccess",e.GetUploadInfoApiError="GetUploadInfoApiError",e.GetFileContentMetadataApiFetch="GetFileContentMetadataApiFetch",e.GetFileContentMetadataApiSuccess="GetFileContentMetadataApiSuccess",e.GetFileContentMetadataApiError="GetFileContentMetadataApiError"})(t.Actions||(t.Actions={}))})),define("modules/clean/react/file_metadata/api",["require","exports","modules/clean/api_v2/user_client"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchUploadInfo=function(e){var t=e.fileId,n=e.user,r={file_path_or_id:t,url:e.sharedLinkUrl};return(new i.UserApiV2Client).ns("files").rpc("get_upload_info",r,{subjectUserId:n.id})},t.fetchFileContentMetadata=function(e){var t=e.fileId,n=e.user,r={file_path_or_id:t,url:e.sharedLinkUrl};return(new i.UserApiV2Client).ns("files").rpc("get_file_content_metadata",r,{subjectUserId:n.id})}})),define("modules/clean/react/file_metadata/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.Unknown=0]="Unknown",e[e.Auto=1]="Auto",e[e.Manual=2]="Manual",e[e.Other=3]="Other"})(t.WhiteBalanceIdentifier||(t.WhiteBalanceIdentifier={})),(function(e){e[e.Unknown=0]="Unknown",e[e.SRgb=1]="SRgb",e[e.AdobeRgb=2]="AdobeRgb",e[e.WideGamutRgb=3]="WideGamutRgb",e[e.IccProfile=4]="IccProfile",e[e.Uncalibrated=5]="Uncalibrated",e[e.Other=6]="Other"})(t.ColorSpaceIdentifier||(t.ColorSpaceIdentifier={})),(function(e){e[e.Unknown=0]="Unknown",e[e.NoFlash=1]="NoFlash",e[e.Fired=2]="Fired",e[e.FiredReturnNotDetected=3]="FiredReturnNotDetected",e[e.FiredReturnDetected=4]="FiredReturnDetected",e[e.OnDidNotFire=5]="OnDidNotFire",e[e.OnFired=6]="OnFired",e[e.OnReturnNotDetected=7]="OnReturnNotDetected",e[e.OnReturnDetected=8]="OnReturnDetected",e[e.OffDidNotFire=9]="OffDidNotFire",e[e.OffDidNotFireReturnNotDetected=10]="OffDidNotFireReturnNotDetected",e[e.AutoDidNotFire=11]="AutoDidNotFire",e[e.AutoFired=12]="AutoFired",e[e.AutoFiredReturnNotDetected=13]="AutoFiredReturnNotDetected",e[e.AutoFiredReturnDetected=14]="AutoFiredReturnDetected",e[e.NoFlashFunction=15]="NoFlashFunction",e[e.OffNoFlashFunction=16]="OffNoFlashFunction",e[e.FiredRedEyeReduction=17]="FiredRedEyeReduction",e[e.FiredRedEyeReductionReturnNotDetected=18]="FiredRedEyeReductionReturnNotDetected",e[e.FiredRedEyeReductionReturnDetected=19]="FiredRedEyeReductionReturnDetected",e[e.OnRedEyeReduction=20]="OnRedEyeReduction",e[e.OnRedEyeReductionReturnNotDetected=21]="OnRedEyeReductionReturnNotDetected",e[e.OnRedEyeReductionReturnDetected=22]="OnRedEyeReductionReturnDetected",e[e.OffRedEyeReduction=23]="OffRedEyeReduction",e[e.AutoDidNotFireRedEyeReduction=24]="AutoDidNotFireRedEyeReduction",e[e.AutoFiredRedEyeReduction=25]="AutoFiredRedEyeReduction",e[e.AutoFiredRedEyeReductionReturnNotDetected=26]="AutoFiredRedEyeReductionReturnNotDetected",e[e.AutoFiredRedEyeReductionReturnDetected=27]="AutoFiredRedEyeReductionReturnDetected",e[e.Other=28]="Other"})(t.FlashSettingIdentifier||(t.FlashSettingIdentifier={})),(function(e){e[e.Unknown=0]="Unknown",e[e.Average=1]="Average",e[e.CenterWeightedAverage=2]="CenterWeightedAverage",e[e.Spot=3]="Spot",e[e.MultiSpot=4]="MultiSpot",e[e.MultiSegment=5]="MultiSegment",e[e.Partial=6]="Partial",e[e.Other=7]="Other"})(t.MeteringModeIdentifier||(t.MeteringModeIdentifier={})),t.SupportedOfficeExtensions=["docm","docx","ppsx","ppsm","pptx","pptm","xlsx","xlsm"],t.SECONDS_MAX=59.5,t.MINUTES_MAX=3570,t.HOURS_MAX=84600,t.DAYS_MAX=561600,t.WEEKS_MAX=2548800,t.MONTHS_MAX=29808e3})),define("modules/clean/react/file_metadata/strings",["require","exports","modules/core/i18n","modules/clean/react/file_metadata/constants"],(function(e,t,i,n){"use strict";var r,a,o,s;Object.defineProperty(t,"__esModule",{value:!0});t.WhiteBalanceSetting=((r={})[n.WhiteBalanceIdentifier.Unknown]=i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),r[n.WhiteBalanceIdentifier.Auto]=i.intl.formatMessage({id:"xhS6fE",defaultMessage:"Auto"}),r[n.WhiteBalanceIdentifier.Manual]=i.intl.formatMessage({id:"ToNv3C",defaultMessage:"Manual"}),r[n.WhiteBalanceIdentifier.Other]=i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"}),r),t.ColorSpaceSetting=((a={})[n.ColorSpaceIdentifier.Unknown]=i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),a[n.ColorSpaceIdentifier.SRgb]=i.intl.formatMessage({id:"a0wUgp",defaultMessage:"sRGB"}),a[n.ColorSpaceIdentifier.AdobeRgb]=i.intl.formatMessage({id:"B28Q5y",defaultMessage:"Adobe RGB"}),a[n.ColorSpaceIdentifier.WideGamutRgb]=i.intl.formatMessage({id:"Kh3t+h",defaultMessage:"Wide Gamut RGB"}),a[n.ColorSpaceIdentifier.IccProfile]=i.intl.formatMessage({id:"h4Q5SZ",defaultMessage:"ICC Profile"}),a[n.ColorSpaceIdentifier.Uncalibrated]=i.intl.formatMessage({id:"/7omh+",defaultMessage:"Uncalibrated"}),a[n.ColorSpaceIdentifier.Other]=i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"}),a),t.FlashSetting=((o={})[n.FlashSettingIdentifier.Unknown]=i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),o[n.FlashSettingIdentifier.NoFlash]=i.intl.formatMessage({id:"CMxZBg",defaultMessage:"No flash"}),o[n.FlashSettingIdentifier.Fired]=i.intl.formatMessage({id:"GxXK+Z",defaultMessage:"Fired"}),o[n.FlashSettingIdentifier.FiredReturnNotDetected]=i.intl.formatMessage({id:"1aQhV4",defaultMessage:"Fired, return not detected"}),o[n.FlashSettingIdentifier.FiredReturnDetected]=i.intl.formatMessage({id:"mxTse0",defaultMessage:"Fired, return detected"}),o[n.FlashSettingIdentifier.OnDidNotFire]=i.intl.formatMessage({id:"VAQlMV",defaultMessage:"On, did not fire"}),o[n.FlashSettingIdentifier.OnFired]=i.intl.formatMessage({id:"IfNe4i",defaultMessage:"On, fired"}),o[n.FlashSettingIdentifier.OnReturnNotDetected]=i.intl.formatMessage({id:"xb3nZ7",defaultMessage:"On, return not detected"}),o[n.FlashSettingIdentifier.OnReturnDetected]=i.intl.formatMessage({id:"GIkKlb",defaultMessage:"On, return detected"}),o[n.FlashSettingIdentifier.OffDidNotFire]=i.intl.formatMessage({id:"hvSCzd",defaultMessage:"Off, did not fire"}),o[n.FlashSettingIdentifier.OffDidNotFireReturnNotDetected]=i.intl.formatMessage({id:"O8+FbV",defaultMessage:"Off, did not fire, return not detected"}),o[n.FlashSettingIdentifier.AutoDidNotFire]=i.intl.formatMessage({id:"KSJ3BI",defaultMessage:"Auto, did not fire"}),o[n.FlashSettingIdentifier.AutoFired]=i.intl.formatMessage({id:"F0TcTd",defaultMessage:"Auto, fired"}),o[n.FlashSettingIdentifier.AutoFiredReturnNotDetected]=i.intl.formatMessage({id:"rLeBiG",defaultMessage:"Auto, fired, return not detected"}),o[n.FlashSettingIdentifier.AutoFiredReturnDetected]=i.intl.formatMessage({id:"qJftjl",defaultMessage:"Auto, fired, return detected"}),o[n.FlashSettingIdentifier.NoFlashFunction]=i.intl.formatMessage({id:"jdWze8",defaultMessage:"No flash function"}),o[n.FlashSettingIdentifier.OffNoFlashFunction]=i.intl.formatMessage({id:"THu+Iw",defaultMessage:"Off, no flash function"}),o[n.FlashSettingIdentifier.FiredRedEyeReduction]=i.intl.formatMessage({id:"B0ZoP1",defaultMessage:"Fired, red-eye reduction"}),o[n.FlashSettingIdentifier.FiredRedEyeReductionReturnNotDetected]=i.intl.formatMessage({id:"XrGwwy",defaultMessage:"Fired, red-eye reduction, return not detected"}),o[n.FlashSettingIdentifier.FiredRedEyeReductionReturnDetected]=i.intl.formatMessage({id:"piA/mD",defaultMessage:"Fired, red-eye reduction, return detected"}),o[n.FlashSettingIdentifier.OnRedEyeReduction]=i.intl.formatMessage({id:"VgJqkZ",defaultMessage:"On, red-eye reduction"}),o[n.FlashSettingIdentifier.OnRedEyeReductionReturnNotDetected]=i.intl.formatMessage({id:"+TI9qg",defaultMessage:"On, red-eye reduction, return not detected"}),o[n.FlashSettingIdentifier.OnRedEyeReductionReturnDetected]=i.intl.formatMessage({id:"j8jQAQ",defaultMessage:"On, red-eye reduction, return detected"}),o[n.FlashSettingIdentifier.OffRedEyeReduction]=i.intl.formatMessage({id:"QLLQth",defaultMessage:"Off, red-eye reduction"}),o[n.FlashSettingIdentifier.AutoDidNotFireRedEyeReduction]=i.intl.formatMessage({id:"AhpZjQ",defaultMessage:"Auto, did not fire, red-eye reduction"}),o[n.FlashSettingIdentifier.AutoFiredRedEyeReduction]=i.intl.formatMessage({id:"Qv2qrm",defaultMessage:"Auto, fired, red-eye reduction"}),o[n.FlashSettingIdentifier.AutoFiredRedEyeReductionReturnNotDetected]=i.intl.formatMessage({id:"gTPkua",defaultMessage:"Auto, fired, red-eye reduction, return not detected"}),o[n.FlashSettingIdentifier.AutoFiredRedEyeReductionReturnDetected]=i.intl.formatMessage({id:"4Ty2Bk",defaultMessage:"Auto, fired, red-eye reduction, return detected"}),o[n.FlashSettingIdentifier.Other]=i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"}),o),t.MeteringModeSetting=((s={})[n.MeteringModeIdentifier.Unknown]=i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),s[n.MeteringModeIdentifier.Average]=i.intl.formatMessage({id:"FfhsBR",defaultMessage:"Average"}),s[n.MeteringModeIdentifier.CenterWeightedAverage]=i.intl.formatMessage({id:"FgYWQc",defaultMessage:"Center-weighted average"}),s[n.MeteringModeIdentifier.Spot]=i.intl.formatMessage({id:"xcW6Wd",defaultMessage:"Spot"}),s[n.MeteringModeIdentifier.MultiSpot]=i.intl.formatMessage({id:"RGJ4oA",defaultMessage:"Multi-spot"}),s[n.MeteringModeIdentifier.MultiSegment]=i.intl.formatMessage({id:"iExd56",defaultMessage:"Multi-segment"}),s[n.MeteringModeIdentifier.Partial]=i.intl.formatMessage({id:"Zd4uKj",defaultMessage:"Partial"}),s[n.MeteringModeIdentifier.Other]=i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"}),s),t.UploadInfoNameFields={uploadedBy:i.intl.formatMessage({id:"bD4kqG",defaultMessage:"Uploaded by"}),dateUploaded:i.intl.formatMessage({id:"KMbzWs",defaultMessage:"Date uploaded"}),from:i.intl.formatMessage({id:"qfF5dJ",defaultMessage:"From"}),lastModified:i.intl.formatMessage({id:"cDIpW4",defaultMessage:"Last modified"}),extension:i.intl.formatMessage({id:"Y+MchP",defaultMessage:"Extension"}),size:i.intl.formatMessage({id:"Qze7Tm",defaultMessage:"Size"})},t.ImageMetadataNameFields={captureDate:i.intl.formatMessage({id:"TOHYFj",defaultMessage:"Original date"}),credit:i.intl.formatMessage({id:"825yNA",defaultMessage:"Artist"}),dimensions:i.intl.formatMessage({id:"5fgW0C",defaultMessage:"Dimensions"}),resolution:i.intl.formatMessage({id:"wscUVd",defaultMessage:"Dots per inch"}),colorSpace:i.intl.formatMessage({id:"SHDDoj",defaultMessage:"Color profile"}),deviceMake:i.intl.formatMessage({id:"uHTmHj",defaultMessage:"Camera make"}),deviceModel:i.intl.formatMessage({id:"EPx9jS",defaultMessage:"Camera model"}),lensModel:i.intl.formatMessage({id:"wFeC8R",defaultMessage:"Lens model"}),apertureValue:i.intl.formatMessage({id:"Hv/B/8",defaultMessage:"Aperture"}),exposureTime:i.intl.formatMessage({id:"5JRhFM",defaultMessage:"Shutter speed"}),focalLength:i.intl.formatMessage({id:"hKz/tt",defaultMessage:"Focal length"}),isoSpeed:i.intl.formatMessage({id:"c7J2CV",defaultMessage:"ISO"}),flash:i.intl.formatMessage({id:"WIBZO6",defaultMessage:"Flash"}),meteringMode:i.intl.formatMessage({id:"WbVH1z",defaultMessage:"Metering"}),whiteBalance:i.intl.formatMessage({id:"USKkbD",defaultMessage:"White balance"}),copyrightNotice:i.intl.formatMessage({id:"qQhzrN",defaultMessage:"Copyright"})},t.OfficeMetadataNameFields={title:i.intl.formatMessage({id:"Ed/RQ2",defaultMessage:"Title"}),creator:i.intl.formatMessage({id:"TpJn8o",defaultMessage:"Owner"}),company:i.intl.formatMessage({id:"WRzvI1",defaultMessage:"Company"}),subject:i.intl.formatMessage({id:"NL8ygk",defaultMessage:"Subject"}),keywords:i.intl.formatMessage({id:"a8+LVV",defaultMessage:"Keywords"}),description:i.intl.formatMessage({id:"yGgaIu",defaultMessage:"Description"}),totalEditTime:i.intl.formatMessage({id:"BLmrgy",defaultMessage:"Total edit time"}),pages:i.intl.formatMessage({id:"ZRy2A0",defaultMessage:"Pages"}),words:i.intl.formatMessage({id:"RLrbhp",defaultMessage:"Words"}),slides:i.intl.formatMessage({id:"2dpvY4",defaultMessage:"Slides"})},t.PdfMetadataNameFields={pages:i.intl.formatMessage({id:"359sgS",defaultMessage:"Pages"}),dimensions:i.intl.formatMessage({id:"/8h7s8",defaultMessage:"Dimensions"})},t.AudioMetadataNameFields={capture_date:i.intl.formatMessage({id:"u68XIJ",defaultMessage:"Creation Time"}),channels:i.intl.formatMessage({id:"0Fq1H6",defaultMessage:"Channels"}),codec:i.intl.formatMessage({id:"RNXXOq",defaultMessage:"Codec"}),duration:i.intl.formatMessage({id:"A4boBS",defaultMessage:"Duration"}),bit_rate:i.intl.formatMessage({id:"TtPMcl",defaultMessage:"Bit Rate"}),sampling_rate:i.intl.formatMessage({id:"Cwkfdc",defaultMessage:"Sampling Rate"}),bits_per_sample:i.intl.formatMessage({id:"lxspej",defaultMessage:"Bits Per Sample"})},t.VideoMetadataNameFields={creation_time:i.intl.formatMessage({id:"ACxSQZ",defaultMessage:"Creation Time"}),resolution:i.intl.formatMessage({id:"R+6yXm",defaultMessage:"Resolution"}),codec:i.intl.formatMessage({id:"H8C+fg",defaultMessage:"Codec"}),duration:i.intl.formatMessage({id:"loShlb",defaultMessage:"Duration"}),bit_rate:i.intl.formatMessage({id:"+GqSV/",defaultMessage:"Bit Rate"}),frame_rate:i.intl.formatMessage({id:"c9FloK",defaultMessage:"Frame Rate"}),audio:i.intl.formatMessage({id:"C1kd1L",defaultMessage:"Audio"}),color_space:i.intl.formatMessage({id:"y7aJQC",defaultMessage:"Color Space"}),device:i.intl.formatMessage({id:"3RkPzL",defaultMessage:"Capturing Device"}),aspect_ratio:i.intl.formatMessage({id:"RaCxiO",defaultMessage:"Aspect Ratio"})},t.FileMetadataSectionHeaders={uploadInfo:i.intl.formatMessage({id:"hPTQqd",defaultMessage:"Dropbox details"}),imageFiletypeInfo:i.intl.formatMessage({id:"BYkDpN",defaultMessage:"Image details"}),officeFiletypeInfo:i.intl.formatMessage({id:"ZkRFrQ",defaultMessage:"Microsoft details"}),PdfFiletypeInfo:i.intl.formatMessage({id:"0+1lU5",defaultMessage:"PDF details"}),AudioFiletypeInfo:i.intl.formatMessage({id:"Xti6fG",defaultMessage:"Audio details"}),VideoFiletypeInfo:i.intl.formatMessage({id:"2RxOOZ",defaultMessage:"Video details"})}})),define("modules/clean/react/file_metadata/utils",["require","exports","modules/core/i18n","modules/clean/file_store/utils","modules/clean/display_format","modules/clean/react/file_metadata/constants","modules/clean/react/file_metadata/strings","dbx-i18n","modules/constants/time"],(function(e,t,i,n,r,a,o,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatImageDimensions=function(e,t){if(void 0!==e&&void 0!==t)return i.intl.formatMessage({id:"P63UMO",defaultMessage:"{width} x {height}"},{width:e,height:t})},t.formatImageResolutions=function(e,t){if(void 0!==e&&void 0!==t)return i.intl.formatMessage({id:"6A4kNh",defaultMessage:"{width} x {height}"},{width:e,height:t})},t.formatExposureTime=function(e){if(e){var t=e;if(-1===e.indexOf("/")){var n=parseFloat(e);if(isNaN(n))return;t=n<1?i.intl.formatNumber(n,{minimumFractionDigits:2,maximumFractionDigits:2}):i.intl.formatNumber(n,{minimumFractionDigits:1,maximumFractionDigits:1})}return i.intl.formatMessage({id:"ZbTwYS",defaultMessage:"{exposure_time} s"},{exposure_time:t})}},t.formatAperture=function(e){if(e){var t=i.intl.formatNumber(e,{minimumFractionDigits:1,maximumFractionDigits:1});return i.intl.formatMessage({id:"WOwRDU",defaultMessage:"f/{aperture}"},{aperture:t})}},t.formatFocalLength=function(e){if(e){var t=parseFloat(e);if(!isNaN(t)){var n=i.intl.formatNumber(t,{minimumFractionDigits:1,maximumFractionDigits:1});return i.intl.formatMessage({id:"BTHLkw",defaultMessage:"{focal_length} mm"},{focal_length:n})}}},t.formatOriginalDate=function(e){if(e){var t=new Date(e);return i.intl.formatDate(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})}},t.formatMediaDuration=function(e){if(e&&!(isNaN(e)||e<=0)){var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=e-3600*t-60*i,r=function(e){return e<10?"0"+e:String(e)};return r(t)+":"+r(i)+":"+r(n)}},t.formatTotalEditTimeMinutes=function(e){if(e&&!(isNaN(e)||e<=0)){var t,n=60*e;return n<a.SECONDS_MAX?(t=Math.round(n),i.intl.formatMessage({id:"ILTzDF",defaultMessage:"{count, plural, one{{count} second} other{{count} seconds}}"},{count:t})):n<a.MINUTES_MAX?(t=Math.round(n/60),i.intl.formatMessage({id:"wWAI7P",defaultMessage:"{count, plural, one{{count} minute} other{{count} minutes}}"},{count:t})):n<a.HOURS_MAX?(t=Math.round(n/3600),i.intl.formatMessage({id:"MVNTYK",defaultMessage:"{count, plural, one{{count} hour} other{{count} hours}}"},{count:t})):n<a.DAYS_MAX?(t=Math.round(n/86400),i.intl.formatMessage({id:"6xuQhu",defaultMessage:"{count, plural, one{{count} day} other{{count} days}}"},{count:t})):n<a.WEEKS_MAX?(t=Math.round(n/604800),i.intl.formatMessage({id:"Lpz5Sz",defaultMessage:"{count, plural, one{{count} week} other{{count} weeks}}"},{count:t})):n<a.MONTHS_MAX?(t=Math.round(n/2592e3),i.intl.formatMessage({id:"TQh9Oq",defaultMessage:"{count, plural, one{{count} month} other{{count} months}}"},{count:t})):(t=Math.round(n/31536e3),i.intl.formatMessage({id:"e6/qJD",defaultMessage:"{count, plural, one{{count} year} other{{count} years}}"},{count:t}))}},t.getSharedFileOwner=function(e){var t=e.ownerName,i=e.ownerTeamName;if(i)return t?t+" ("+i+")":i},t.getFileModifier=function(e){var t=e.last_modified_name;if(e.ts){if(2===e.event_type){var n=s.timeSince(i.intl,1e3*e.ts,{displayLocation:"list",timeZone:d.TIMEZONE});return t?i.intl.formatMessage({id:"KzqBY1",defaultMessage:"{modifier} edited {time}"},{modifier:t,time:n}):i.intl.formatMessage({id:"NQz5Zf",defaultMessage:"You edited {time}"},{time:n})}return s.timeSince(i.intl,1e3*e.ts,{displayLocation:"list",timeZone:d.TIMEZONE})}},t.getUploadInfoDataFields=function(e,a,l){return[{name:o.UploadInfoNameFields.uploadedBy,value:e?e.displayName:void 0},{name:o.UploadInfoNameFields.dateUploaded,value:e&&e.uploadDate?s.timeSince(i.intl,new Date(e.uploadDate),{displayLocation:"list",timeZone:d.TIMEZONE}):void 0},{name:a?o.UploadInfoNameFields.from:o.UploadInfoNameFields.lastModified,value:a?t.getSharedFileOwner(a):t.getFileModifier(l)},{name:o.UploadInfoNameFields.extension,value:n.getExtension(l)},{name:o.UploadInfoNameFields.size,value:l.bytes?r.format_bytes(l.bytes):void 0}]},t.getImageSpecificDataFields=function(e){return[{name:o.ImageMetadataNameFields.captureDate,value:t.formatOriginalDate(e.date_time_original)},{name:o.ImageMetadataNameFields.focalLength,value:t.formatFocalLength(e.focal_length)},{name:o.ImageMetadataNameFields.exposureTime,value:t.formatExposureTime(e.exposure_time)},{name:o.ImageMetadataNameFields.apertureValue,value:t.formatAperture(e.aperture_value)},{name:o.ImageMetadataNameFields.isoSpeed,value:void 0!==e.iso_speed?String(e.iso_speed):void 0},{name:o.ImageMetadataNameFields.meteringMode,value:void 0!==e.metering_mode?o.MeteringModeSetting[e.metering_mode]:void 0},{name:o.ImageMetadataNameFields.flash,value:void 0!==e.flash?o.FlashSetting[e.flash]:void 0},{name:o.ImageMetadataNameFields.whiteBalance,value:void 0!==e.white_balance?o.WhiteBalanceSetting[e.white_balance]:void 0},{name:o.ImageMetadataNameFields.deviceMake,value:e.camera_make},{name:o.ImageMetadataNameFields.deviceModel,value:e.camera_model},{name:o.ImageMetadataNameFields.lensModel,value:e.lens_model},{name:o.ImageMetadataNameFields.dimensions,value:t.formatImageDimensions(e.image_width,e.image_height)},{name:o.ImageMetadataNameFields.resolution,value:t.formatImageResolutions(e.x_resolution,e.y_resolution)},{name:o.ImageMetadataNameFields.colorSpace,value:void 0!==e.colorspace?o.ColorSpaceSetting[e.colorspace]:void 0},{name:o.ImageMetadataNameFields.credit,value:e.credit},{name:o.ImageMetadataNameFields.copyrightNotice,value:e.copyright}]},t.getOfficeSpecificDataFields=function(e){return[{name:o.OfficeMetadataNameFields.title,value:e.title},{name:o.OfficeMetadataNameFields.creator,value:e.creator},{name:o.OfficeMetadataNameFields.company,value:e.company},{name:o.OfficeMetadataNameFields.subject,value:e.subject},{name:o.OfficeMetadataNameFields.keywords,value:e.keywords},{name:o.OfficeMetadataNameFields.description,value:e.description},{name:o.OfficeMetadataNameFields.totalEditTime,value:t.formatTotalEditTimeMinutes(e.total_edit_time_minutes)},{name:o.OfficeMetadataNameFields.pages,value:e.pages?i.intl.formatNumber(e.pages,{maximumFractionDigits:0}):void 0},{name:o.OfficeMetadataNameFields.words,value:e.words?i.intl.formatNumber(e.words,{maximumFractionDigits:0}):void 0},{name:o.OfficeMetadataNameFields.slides,value:e.slides?i.intl.formatNumber(e.slides,{maximumFractionDigits:0}):void 0}]},t.getPDFSpecificDataFields=function(e){return[{name:o.PdfMetadataNameFields.pages,value:e.pages},{name:o.PdfMetadataNameFields.dimensions,value:e.width+"x"+e.height}]},t.formatAudioforVideoMetadata=function(e){return e.audio_freq?Number(e.audio_freq)/1e3+" kHz "+e.audio_chan_layout:e.audio_chan_layout?Number(e.audio_freq)/1e3+" kHz":void 0},t.getVideoSpecificDataFields=function(e){return[{name:o.VideoMetadataNameFields.creation_time,value:t.formatOriginalDate(e.capture_date)},{name:o.VideoMetadataNameFields.device,value:e.device},{name:o.VideoMetadataNameFields.resolution,value:e.resolution_width+"x"+e.resolution_height},{name:o.VideoMetadataNameFields.aspect_ratio,value:e.aspect_ratio},{name:o.VideoMetadataNameFields.duration,value:t.formatMediaDuration(e.duration)},{name:o.VideoMetadataNameFields.frame_rate,value:e.frame_rate+" fps"},{name:o.VideoMetadataNameFields.color_space,value:e.color_space},{name:o.VideoMetadataNameFields.bit_rate,value:String(Math.floor(e.bit_rate/1e3))+" kb/s"},{name:o.VideoMetadataNameFields.audio,value:t.formatAudioforVideoMetadata(e)},{name:o.VideoMetadataNameFields.codec,value:e.codec}]},t.getAudioSpecificDataFields=function(e){return[{name:o.AudioMetadataNameFields.codec,value:e.codec},{name:o.AudioMetadataNameFields.sampling_rate,value:Number(e.sampling_rate)/1e3+" kHz"},{name:o.AudioMetadataNameFields.duration,value:t.formatMediaDuration(e.duration)},{name:o.AudioMetadataNameFields.channels,value:e.channels},{name:o.AudioMetadataNameFields.bit_rate,value:String(Math.floor(e.bit_rate/1e3))+" kb/s"}]}})),define("modules/clean/react/file_sidebar/store/app/reducer",["require","exports","tslib"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={hideComments:!1,hidePageChrome:!1},t.reducer=function(e,n){switch(void 0===e&&(e=t.INITIAL_STATE),n.type){case"APP_SET_STATE":var r=n.hideComments,a=n.hidePageChrome;return i.__assign(i.__assign({},e),{hideComments:r,hidePageChrome:a})}return e}})),define("modules/clean/react/file_sidebar/store/file_activity/actions",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/selectors","modules/clean/react/file_sidebar/store/file_activity/api"],(function(e,t,i,n,r){"use strict";function a(e){return{type:"FILE_ACTIVITY|RECEIVE_STREAM_ERROR",error:e}}function o(e,t){return{type:"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY",activities:e,enabled:t}}function s(e,t){return{type:"FILE_ACTIVITY|LOADING_START",userId:e,file:t}}function d(e){return{type:"FILE_ACTIVITY|LOADING_END",state:e}}function l(){return{type:"FILE_ACTIVITY|RESET_FILE_STATE"}}function u(e,t){return(e.file?e.file.file_id:-1)!==(t.file?t.file.file_id:-1)||e.userId!==t.userId}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.api={create:function(e){return new r.FileActivityStreamApi(e)}},t.receiveStreamError=a,t.receiveFileActivity=o,t.loadingStart=s,t.loadingEnd=d,t.reset=function(){return{type:"FILE_ACTIVITY|RESET"}},t.resetFileState=l;var c=0;t.getActivityStream=function(e,i){return function(r,l){if(u({file:i,userId:e},n.getContext(l()))){var f=t.api.create(e);r({type:"FILE_ACTIVITY|RESET_FILE_STATE"}),r(s(e,i));var m=++c,p=i.file_id;return f.getActivityStream(p).then((function(t){var a=t.enabled,s=t.activity_group;u({file:i,userId:e},n.getContext(l()))||r(o(s,a))})).catch((function(e){m===c&&r(a(e))})).then((function(){m===c&&r(d(n.getState(l())))}))}}}})),define("modules/clean/react/file_sidebar/store/file_activity/activity_sorted_set",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/sorted_set"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(e){function t(i){return void 0===i&&(i=[]),e.call(this,i,t.compare,t.equals)||this}return i.__extends(t,e),t.compare=function(e,t){return e.id===t.id?0:t.timestamp.getTime()-e.timestamp.getTime()},t.equals=function(e,t){return e.id===t.id},t})(n.SortedSet);t.ActivitySortedSet=r})),define("modules/clean/react/file_sidebar/store/file_activity/api",["require","exports","tslib","external/lodash","modules/clean/api_v2/user_client"],(function(e,t,i,n,r){"use strict";function a(e,t,i,n){return".tag"===t?0===n?["type",i]:i in e?i:[null,i]:i}function o(e,t,i,n){return"string"==typeof i&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(i)?new Date(i):i}function s(e,t,i){return void 0===i&&(i=0),Array.isArray(e)?e.map((function(e){return s(e,t,i+1)})):n.isObject(e)?Object.keys(e).reduce((function(r,a){var o=e[a];if(Array.isArray(o)||n.isObject(o))r[a]=s(o,t,i+1);else{var d=t(e,a,o,i);if(Array.isArray(d)){if(null===d[0])return d[1];r[d[0]]=d[1]}else r[a]=d}return r}),{}):t(null,"",e,i)}function d(e){return s(s(e,a),o)}function l(e){return i.__assign(i.__assign({},d(e.activities[0])),{groupActivities:e.activities.map(d),isGroup:!0})}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.parseActivity=d,t.parseGroupActivity=l;var u=(function(){function e(e){this.userId=e,this.client=new r.UserApiV2Client}return e.prototype.getActivityStream=function(e){return this.client.ns("file_activity_stream").rpc("get_activity_stream",{file_path_or_id:e},{subjectUserId:this.userId}).then((function(e){return{enabled:e.enabled,activity_group:(e.activity_group||[]).map(l)}}))},e})();t.FileActivityStreamApi=u})),define("modules/clean/react/file_sidebar/store/file_activity/reducer",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/activity_sorted_set"],(function(e,t,i,n){"use strict";function r(e){return e.map((function(e){return e.isGroup&&1===e.groupActivities.length?e.groupActivities[0]:e}))}Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={activities:{error:void 0,loaded:!1,loading:!1,value:[]},enabled:!1,userId:-1},t.ungroupSingleActivityGroups=r,t.reducer=function(e,a){switch(void 0===e&&(e=t.INITIAL_STATE),a.type){case"FILE_ACTIVITY|RESET":return i.__assign({},t.INITIAL_STATE);case"FILE_ACTIVITY|RESET_FILE_STATE":return i.__assign(i.__assign({},e),{activities:t.INITIAL_STATE.activities});case"FILE_ACTIVITY|LOADING_START":return i.__assign(i.__assign({},e),{activities:i.__assign(i.__assign({},e.activities),{error:void 0,loading:!0}),userId:a.userId,file:a.file});case"FILE_ACTIVITY|LOADING_END":return i.__assign(i.__assign({},e),{activities:i.__assign(i.__assign({},e.activities),{loaded:!0,loading:!1})});case"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY":var o=a.enabled?new n.ActivitySortedSet(i.__spreadArrays(e.activities.value,r(a.activities))).toArray():[];return i.__assign(i.__assign({},e),{activities:i.__assign(i.__assign({},e.activities),{value:o}),enabled:a.enabled});case"FILE_ACTIVITY|RECEIVE_STREAM_ERROR":return i.__assign(i.__assign({},e),{activities:i.__assign(i.__assign({},e.activities),{error:a.error})})}return e}})),define("modules/clean/react/file_sidebar/store/file_activity/selectors",["require","exports"],(function(e,t){"use strict";function i(e){return e.fileActivity}function n(e){return i(e).activities.value}function r(e){return i(e).file}function a(e){return i(e).userId}Object.defineProperty(t,"__esModule",{value:!0}),t.getState=i,t.getActivities=n,t.getActivitiesMetadata=function(e){return i(e).activities},t.getVisibleActivityCount=function(e){return n(e).length},t.getFile=r,t.getUserId=a,t.getContext=function(e){return{file:r(e),userId:a(e)}},t.isActivityEnabled=function(e){return i(e).enabled}})),define("modules/clean/react/file_sidebar/store/file_activity/sorted_set",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(e,t,i){void 0===e&&(e=[]),this.items=[],this.compare=t,this.equals=i,this.add(e)}return e.prototype.add=function(e){var t=this;Array.isArray(e)||(e=[e]);var i=this.items.concat(e);return i.sort(this.compare),this.items=i.filter((function(e,i,n){return 0===i||!t.equals(e,n[i-1])})),this},e.prototype.toArray=function(){return Array.prototype.slice.call(this.items)},e})();t.SortedSet=i})),define("modules/clean/react/file_sidebar/store/middleware/reactor",["require","exports","modules/clean/shallow_equal"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return i.shallowEqual(e,t)};function r(e){return"function"==typeof e.changes}function a(e){return"function"==typeof e.changesIn}function o(e){return"function"==typeof e.changesFrom&&"function"==typeof e.changesTo}t.reactor=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=[];function s(e,t,s){var d;if(void 0===s&&(s=n),r(e))d=function(t,i){return{changed:e.changes(t,i)}};else if(a(e))d=function(t,i){var n=e.changesIn(t),r=e.changesIn(i);return{prevValue:n,nextValue:r,changed:!s(n,r)}};else{if(!o(e))throw new Error;d=function(t,i){var n=e.changesFrom(t),r=e.changesTo(i);return{changed:n&&r}}}i.push({checkForChange:d,onChange:t})}for(var d=0,l=e;d<l.length;d++){var u=l[d];u(s)}return function(e){var t=e.getState;return function(e){return function(n){for(var r=t(),a=e(n),o=t(),s=0,d=i;s<d.length;s++){var l=d[s],u=l.checkForChange(r,o),c=u.prevValue,f=u.nextValue;u.changed&&l.onChange({nextValue:f,prevValue:c,nextState:o,prevState:r})}return a}}}}})),define("modules/clean/react/file_sidebar/store/middleware/thunk",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thunk=function(){return function(e){var t=e.dispatch,i=e.getState;return function(e){return function(n){return"function"==typeof n?n(t,i):e(n)}}}}})),define("modules/clean/react/file_sidebar/store/sidebar/helpers",["require","exports","modules/clean/file_store/utils"],(function(e,t,i){"use strict";function n(e,t){return!e&&!t||!!e&&!!t&&i.areFilesEqual(e,t)}function r(e,t){return!e&&!t||!!e&&!!t&&e.id===t.id}Object.defineProperty(t,"__esModule",{value:!0}),t.isFileSame=n,t.isUserSame=r,t.isContextChanged=function(e,t){return!n(e.file,t.file)||!r(e.user,t.user)}})),define("modules/clean/react/file_sidebar/store/sidebar/reducer",["require","exports","tslib","modules/clean/react/file_sidebar/store/sidebar/types"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE={activeTab:"comments",open:!0,openReason:void 0,ready:!1,context:{file:void 0,isVersionHistoryMode:void 0,user:void 0},tabs:{activity:{ready:!1,show:!1,count:0},comments:{ready:!1,show:!1,count:0,extra:{commentCount:0}},metadata:{ready:!1,show:!1}},hasOverride:!1,thirdpartyBlueDotOnboarded:!1},t.reducer=function(e,r){void 0===e&&(e=t.INITIAL_STATE);var a=(function(e,r){var a;switch(r.type){case n.ActionType.SidebarOverrideInitialState:var o=r.payload,s=o.open,d=o.tab;return i.__assign(i.__assign({},e),{open:s,activeTab:d,tabs:i.__assign(i.__assign({},e.tabs),(a={},a[d]=i.__assign(i.__assign({},e.tabs[d]),{show:!0}),a)),hasOverride:!0});case n.ActionType.SidebarReset:return i.__assign(i.__assign({},t.INITIAL_STATE),{open:e.open});case n.ActionType.SidebarOpen:return i.__assign(i.__assign({},e),{open:!0,openReason:r.payload.reason});case n.ActionType.SidebarClose:return i.__assign(i.__assign({},e),{open:!1,openReason:void 0});case n.ActionType.SidebarSelectTab:return i.__assign(i.__assign({},e),{activeTab:r.payload.tabName});case n.ActionType.SidebarSetThirdPartyBlueDotOnboardState:return i.__assign(i.__assign({},e),{thirdpartyBlueDotOnboarded:!0});case n.ActionType.SidebarOpenFile:var l=r.payload,u=l.file,c=l.isVersionHistoryMode,f=l.user;return i.__assign(i.__assign({},e),{openReason:void 0,context:{file:u,isVersionHistoryMode:c,user:f},tabs:{activity:{ready:!f,show:!1===c&&e.tabs.activity.show,count:0},comments:{ready:!1,show:!1,count:0,extra:{commentCount:0}},metadata:{ready:!1,show:!0}}});case"FILE_ACTIVITY|LOADING_END":return i.__assign(i.__assign({},e),{tabs:i.__assign(i.__assign({},e.tabs),{activity:{ready:!0,show:!1===e.context.isVersionHistoryMode&&r.state.enabled,count:0}})});case n.ActionType.SidebarSetComments2DisabledState:return i.__assign(i.__assign({},e),{tabs:i.__assign(i.__assign({},e.tabs),{comments:{ready:!0,show:!1,count:0,extra:{commentCount:0}}})});case n.ActionType.SidebarSetComments2ShownState:return i.__assign(i.__assign({},e),{activeTab:e.hasOverride?e.activeTab:"comments",tabs:i.__assign(i.__assign({},e.tabs),{comments:{ready:!0,show:!e.hasOverride||e.tabs.comments.show,count:0,extra:{commentCount:r.payload.commentCount}}})});case n.ActionType.SidebarIndicateNewFileNav:return i.__assign(i.__assign({},e),{tabs:i.__assign(i.__assign({},e.tabs),{comments:{ready:!1,show:!0,count:0,extra:{commentCount:0}}})})}return e})(e,r);return a.ready=e.ready||a.tabs.activity.ready&&a.tabs.comments.ready,e.ready||!a.ready||e.hasOverride||(a.tabs.comments.show&&!a.tabs.activity.show?a.activeTab="comments":!a.tabs.comments.show&&a.tabs.activity.show&&(a.activeTab="activity"),a.tabs.comments.show&&a.tabs.comments.count>0&&(a.open=!0,a.openReason=a.openReason||"unread_comments",a.activeTab="comments"),a.tabs.comments.show&&a.tabs.comments.extra&&a.tabs.comments.extra.commentCount>0&&(a.open=!0,a.openReason=a.openReason||"comments2_unresolved_threads",a.activeTab="comments")),a.ready&&a.open&&!a.openReason&&(a.openReason="sticky_state"),a}})),define("modules/clean/react/file_sidebar/store/sidebar/selectors",["require","exports"],(function(e,t){"use strict";function i(e){return e.sidebar}function n(e){return i(e).tabs}Object.defineProperty(t,"__esModule",{value:!0}),t.getState=i,t.getSidebarState=function(e){var t=i(e);return{activeTab:t.activeTab,open:t.open,openReason:t.openReason,ready:t.ready}},t.getOpenReason=function(e){return i(e).openReason},t.getSidebarContext=function(e){return i(e).context},t.getTabsState=n,t.getTabState=function(e,t){return n(e)[t]},t.getThirdPartyBlueDotOnboardedState=function(e){return i(e).thirdpartyBlueDotOnboarded}})),define("modules/clean/react/file_sidebar/store/sidebar/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.SidebarOpen="SIDEBAR|OPEN",e.SidebarReset="SIDEBAR|RESET",e.SidebarClose="SIDEBAR|CLOSE",e.SidebarSelectTab="SIDEBAR|SELECT_TAB",e.SidebarOpenFile="SIDEBAR|OPEN_FILE",e.SidebarToggle="SIDEBAR|TOGGLE",e.SidebarIndicateNewFileNav="SIDEBAR|INDICATE_NEW_FILE_NAV",e.SidebarSetComments2DisabledState="SIDEBAR|SET_COMMENTS2_DISABLED_STATE",e.SidebarSetComments2ShownState="SIDEBAR|SET_COMMENTS2_SHOWN_STATE",e.SidebarSetThirdPartyBlueDotOnboardState="SIDEBAR|SET_THIRDPARTY_BLUEDOT_ONBOARDED_STATE",e.SidebarOverrideInitialState="SIDEBAR|OVERRIDE_INITIAL_STATE"})(t.ActionType||(t.ActionType={}))}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};define("modules/clean/react/previews/archive/preview_archive_loadable",["require","exports","modules/clean/react/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewArchiveLoadable=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/previews/archive/preview_archive"],t,i)})).then(__importStar).then((function(e){return e.PreviewArchive}))}})})),define("modules/clean/react/previews/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR",e.WatermarkingError="WATERMARKING_ERROR",e.UpsellError="UPSELL_ERROR",e.UnknownError="UNKNOWN_ERROR"})(t.ErrorType||(t.ErrorType={})),(function(e){e.Browse="browse",e.Home="home",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file",e.Workflow="workflow",e.TrelloPreview="trello_preview",e.FileLocking="file_locking"})(t.PreviewSourceContext||(t.PreviewSourceContext={})),(function(e){e.Visit="visit",e.Click="click",e.FileViewerExit="file_viewer_exit"})(t.PreviewSourceAction||(t.PreviewSourceAction={})),(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={})),(function(e){e.EnableRegionCreation="EnableRegionCreation",e.Fullscreen="Fullscreen",e.PageDown="PageDown",e.PageIndicator="PageIndicator",e.PageUp="PageUp",e.Print="Print",e.Sidebar="Sidebar",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.FlipControls="FlipControls"})(t.PreviewToolbarButtonType||(t.PreviewToolbarButtonType={}))})),define("modules/clean/react/previews/error/file_info",["require","exports","tslib","react","modules/clean/display_format"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.PreviewErrorFileInfo=function(e){var t=e.bytes,i=e.filename;return n.default.createElement("div",{className:"preview-error__info"},i,void 0!==t?n.default.createElement("span",null,n.default.createElement("span",{className:"bottom-dot"}," Â· "),r.format_bytes(t)):null)}})),define("modules/clean/react/previews/error/image",["require","exports","tslib","react","modules/clean/react/image","modules/clean/react/previews/constants","modules/clean/static_urls"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),t.PreviewErrorImage=function(e){var t;switch(e.errorType){case a.ErrorType.PendingUploadError:t=n.default.createElement(r.Image,{src:o.static_url("/static/js/file-viewer/img/error/file_uploading_1x-vflRuLSg0.png"),srcHiRes:o.static_url("/static/js/file-viewer/img/error/file_uploading_2x-vflKOdrWj.png")});break;case a.ErrorType.ExtensionError:t=n.default.createElement(r.Image,{src:o.static_url("/static/js/file-viewer/img/error/filetype_not_supported_1x-vflmIVODZ.png"),srcHiRes:o.static_url("/static/js/file-viewer/img/error/filetype_not_supported_2x-vflE8HW8X.png")});break;case a.ErrorType.FileSizeError:t=n.default.createElement(r.Image,{src:o.static_url("/static/js/file-viewer/img/error/file_too_large_1x-vflDGNPuo.png"),srcHiRes:o.static_url("/static/js/file-viewer/img/error/file_too_large_2x-vfl-r0UPt.png")});break;case a.ErrorType.PasswordProtectedError:t=n.default.createElement(r.Image,{src:o.static_url("/static/js/file-viewer/img/error/password_protected_1x-vflnFAKjt.png"),srcHiRes:o.static_url("/static/js/file-viewer/img/error/password_protected_2x-vflnBXZ1k.png")});break;case a.ErrorType.NeedFlashError:case a.ErrorType.SymLinkError:case a.ErrorType.EmptyFileError:case a.ErrorType.WatermarkingError:case a.ErrorType.LoadError:default:t=n.default.createElement(r.Image,{src:o.static_url("/static/js/file-viewer/img/error/unavailable_1x-vflG2AHMd.png"),srcHiRes:o.static_url("/static/js/file-viewer/img/error/unavailable_2x-vflGPrE5d.png")})}return n.default.createElement("div",{className:"u-mar-bottom-s preview-error__image"},t)}})),define("modules/clean/react/previews/error/message",["require","exports","tslib","react","react-intl","modules/clean/file_store/utils","modules/clean/react/previews/constants","modules/core/i18n","modules/clean/previews/data/preview_type_util","modules/clean/previews/util","modules/clean/display_format","modules/constants/trademark"],(function(e,t,i,n,r,a,o,s,d,l,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),d=i.__importStar(d),t.PreviewErrorMessage=function(e){var t,i=e.file?a.getExtension(e.file):void 0;if(e.message)t=e.message;else switch(e.errorType){case o.ErrorType.PendingUploadError:t=s.intl.formatMessage({id:"FMgHvt",defaultMessage:"File is uploading..."});break;case o.ErrorType.EmptyFileError:t=s.intl.formatMessage({id:"60uLrP",defaultMessage:"Empty files canâ€™t be previewed"});break;case o.ErrorType.ExtensionError:if(!e.file)throw new Error("Extension error requires a file prop");if(i){var f=a.isArchiveFile(e.file)&&e.preview?r.defineMessage({id:"km+4dK",defaultMessage:"<span>.{extension}</span> files canâ€™t be previewed from an archive file."}):r.defineMessage({id:"SCuIH+",defaultMessage:"<span>.{extension}</span> files canâ€™t be previewed."});t=s.intl.formatMessage(f,{span:function(e){return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:i})}else t=s.intl.formatMessage({id:"8I3UCo",defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});break;case o.ErrorType.FileSizeError:var m=d.getPreviewType(e.preview),p=i&&m?l.getFileSizeLimit(i,m):void 0;t=p?s.intl.formatMessage({id:"SMqFsd",defaultMessage:"This file is too big to preview. {br} The maximum file size for <span>.{extension}</span> is <span>{limit}</span>"},{br:n.default.createElement("br",null),span:function(e){return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:i,limit:u.format_bytes(p)}):s.intl.formatMessage({id:"hhptWM",defaultMessage:"This file is too big to preview."});break;case o.ErrorType.PasswordProtectedError:t=i?s.intl.formatMessage({id:"mF3ymz",defaultMessage:"This <span>.{extension}</span> file is password-protected."},{span:function(e){return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:i}):s.intl.formatMessage({id:"ZwrDDI",defaultMessage:"This file is password-protected."});break;case o.ErrorType.NeedFlashError:t=s.intl.formatMessage({id:"GYFlxk",defaultMessage:"Install <a>Adobe Flash Player</a> to preview this video."},{a:function(e){return n.default.createElement("a",{href:"https://get.adobe.com/flashplayer/"},e)}});break;case o.ErrorType.SymLinkError:t=s.intl.formatMessage({id:"VT66qw",defaultMessage:"SymLink files cannot be previewed."});break;case o.ErrorType.WatermarkingError:t=s.intl.formatMessage({id:"BahKtt",defaultMessage:"This file could not be watermarked."});break;case o.ErrorType.UpsellError:t=s.intl.formatMessage({id:"SRnMNM",defaultMessage:"<p>Canâ€™t preview <span>.{extension}</span> files. {br}Upgrade to {trademark_professional} to preview more file types.</p>"},{br:n.default.createElement("br",null),p:function(e){return n.default.createElement("p",null,e)},span:function(e){return n.default.createElement("span",{className:"preview-error__message--bold"},e)},trademark_professional:c.TRADEMARK_PROFESSIONAL,extension:i});break;case o.ErrorType.LoadError:t=i?s.intl.formatMessage({id:"vpmO+U",defaultMessage:"<span>.{extension}</span> files are supported but something went wrong."},{span:function(e){return n.default.createElement("span",{className:"preview-error__message--bold"},e)},extension:i}):s.intl.formatMessage({id:"L5RL4W",defaultMessage:"This file canâ€™t be previewed."});break;default:t=s.intl.formatMessage({id:"PLJiGa",defaultMessage:"Something went wrong while previewing this file."})}return n.default.createElement("div",{className:"preview-error__message"},t)}})),define("modules/clean/react/previews/frame_messenger_host",["require","exports","tslib","file-viewer/libraries/frame_messenger"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(e){function t(){var t=["www.dropboxstatic.com","cf.dropboxstatic.com","cfl.dropboxstatic.com","www.dropbox.com","dl-web.dropbox.com","dl.dropboxusercontent.com","previews.dropboxusercontent.com","previews.dropbox.com"].map((function(e){return"https://"+e}));return t.push("null"),t.push(RegExp(".*previews.*.dropboxusercontent.com")),e.call(this,t)||this}return i.__extends(t,e),t})(n.FrameMessengerHost);t.PreviewFrameMessengerHost=r})),define("modules/clean/react/previews/image_helpers",["require","exports","tslib","modules/constants/python","modules/clean/photos/thumbnail_url_util"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n);var a=[[480,320],[640,480],[800,600],[1024,768],[1280,960],[1600,1200],[2048,1536]];function o(e,t){return(t?a.filter((function(e){var i=e[0],n=e[1];return i<=t[0]&&n<=t[1]})):a).map((function(t){var i=t[0],a=t[1];return r.thumbnailUrlForSize(e,i,a,n.THUMBNAIL_SIZE_MODE.ABSTRACT)+" "+i+"w"})).join(", ")}function s(e){return r.thumbnailUrlForSize(e,800,600,n.THUMBNAIL_SIZE_MODE.ABSTRACT)}function d(e,t){return new Promise((function(i,n){var r=Date.now(),a=new Image;a.onload=function(){i({started:r,completed:Date.now()})},a.onerror=function(){n({started:r,failed:Date.now()})},t&&(t.srcset&&(a.srcset=t.srcset),t.sizes&&(a.sizes=t.sizes)),a.src=e}))}t.IMG_SIZES_ATTR="90vw",t.getSrcSet=o,t.getFallbackSrc=s,t.preloadResponsiveImage=function(e){return d(s(e),{srcset:o(e),sizes:t.IMG_SIZES_ATTR})},t.preloadImage=d})),define("modules/clean/react/previews/loading_indicator",["require","exports","tslib","classnames","react"],(function(e,t,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importDefault(r),t.LoadingIndicator=function(e){return r.default.createElement("div",{className:n.default("c-loader",e.className)})}})),define("modules/clean/react/previews/preview_linkfile",["require","exports","tslib","classnames","react","modules/clean/ajax","modules/clean/em_string","modules/clean/filepath","modules/clean/react/css","modules/clean/react/file_viewer/constants","modules/clean/referrer_cleansing_redirect","modules/clean/web_timing_logger","modules/clean/static_urls","modules/core/i18n"],(function(e,t,i,n,r,a,o,s,d,l,u,c,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),r=i.__importDefault(r),a=i.__importStar(a),u=i.__importStar(u),c=i.__importStar(c);var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={description:null,hadError:!1,link:null,isMounted:!1},t.requestLinkfileData=function(e){t.logFilePreviewEvent(l.EventType.FilePreviewDownloadAttempted);var i={url:e,dataType:"json",success:t.handleLinkDataSuccess,error:t.handleLinkDataError,xhrFields:{withCredentials:!1}};t.props.data.authenticated?(i.xhrFields={withCredentials:!0},a.SilentBackgroundRequest(i)):a.Request(i)},t.handleLinkDataSuccess=function(e){null!=e.uri?(t.logFilePreviewEvent(l.EventType.FilePreviewDownloadSucceeded),t.markWebTiming(),t.setState({description:e.uri,hadError:!1,link:e.uri}),t.logFilePreviewEvent(l.EventType.FilePreviewRenderSucceeded),t.props.setRenderStatusSuccess()):t.handleLinkDataError()},t.handleLinkDataError=function(){t.logFilePreviewEvent(l.EventType.FilePreviewDownloadFailed),t.markWebTiming(),t.state.isMounted&&t.setState({description:m.intl.formatMessage({id:"DX7rMh",defaultMessage:"Canâ€™t show link. Somethingâ€™s wrong with this file."}),hadError:!0,link:null})},t.handleClickOpenLinkButton=function(e){if(null!=t.state.link){var i=u.get_redirect_uri(t.state.link);window.open(i.toString(),"_blank")}},t}return i.__extends(t,e),t.prototype.logFilePreviewEvent=function(e){this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e)},t.prototype.markWebTiming=function(){c.mark_time_to_view(),c.mark_time_to_interactive()},t.prototype.isFileDataFetched=function(){return null==this.state.description},t.prototype.componentDidMount=function(){this.logFilePreviewEvent(l.EventType.FilePreviewSupportConfirmed),this.state.isMounted=!0,this.requestLinkfileData(this.props.data.url)},t.prototype.componentWillUnmount=function(){this.state.isMounted=!1},t.prototype.render=function(){var e={"preview-linkfile-content":!0,"loading-content":this.isFileDataFetched()},i={"preview-linkfile-button-openlink":!0,"button-primary":!0,"has-link":null!=this.state.link},a="-",d="";null!=this.props.filename&&(a=s.filename_without_extension(this.props.filename),""!==(d=s.file_extension(this.props.filename))&&(d="."+d));var l=t.MAX_DISPLAYED_FILENAME_CHARS-d.length,u=o.Emstring.em_snippet(a,l),c="-";null!=this.state.description&&(c=this.state.description);var p={"preview-linkfile-description":!0,"force-show-all-text":this.state.hadError},_=f.static_url("/static/images/icons128/page_white_linkfile-vfloEntlU.png");return r.default.createElement("div",{className:"flex-preview-container"},r.default.createElement("div",{className:"preview-content preview-content--center"},r.default.createElement("div",{className:"preview-linkfile-box"},r.default.createElement("div",{className:n.default(e)},r.default.createElement("div",{className:"preview-linkfile-icon"},r.default.createElement("img",{src:_,alt:""})),r.default.createElement("div",{className:"preview-linkfile-title"},r.default.createElement("span",{className:"preview-linkfile-filebase"},u),r.default.createElement("span",{className:"preview-linkfile-fileext"},d)),r.default.createElement("div",{className:"preview-linkfile-info"},r.default.createElement("div",{className:n.default(p)},c),r.default.createElement("button",{className:n.default(i),onMouseUp:this.handleClickOpenLinkButton,ref:"openLinkButton"},m.intl.formatMessage({id:"cb9Hpy",defaultMessage:"Open in new tab"})))))))},t.SPINNER_FADE_DELAY_MSEC=150,t.MAX_DISPLAYED_FILENAME_CHARS=21,t})(r.default.Component);t._PreviewLinkfile=p;var _=d.requireCssWithComponent(p,["/static/css/preview_linkfile-vflQapELU.css"]);t.PreviewLinkfile=_})),define("modules/clean/react/previews/preview_pdf_loadable",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/css","modules/clean/react/previews/loading_indicator"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n);var s=r.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/previews/preview_pdf"],t,i)})).then(i.__importStar).then((function(e){return e.PreviewPDF}))},loading:function(e){return e.previewThumbnailUrl?n.default.createElement("div",{className:"preview-pdf-ssr"},n.default.createElement("div",{className:"preview-ssr-viewer"},n.default.createElement(o.LoadingIndicator,{className:"loading-indicator"}))):null}}),d=a.requireCssWithComponent(s,["/static/css/preview_pdf-vfltZ12__.css","/static/css/snackbar-vflj8vZZj.css"]);t.PreviewPDFLoadable=d})),define("modules/clean/react/previews/preview_ppt_loadable",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/css","modules/clean/react/previews/loading_indicator"],(function(e,t,i,n,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n);var s=r.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/previews/preview_ppt"],t,i)})).then(i.__importStar).then((function(e){return e.PreviewPPT}))},loading:function(e){return e.previewThumbnailUrl?n.default.createElement("div",{className:"preview-pdf-ssr"},n.default.createElement("div",{className:"preview-ssr-viewer"},n.default.createElement(o.LoadingIndicator,{className:"loading-indicator"}))):null}}),d=a.requireCssWithComponent(s,["/static/css/preview_pdf-vfltZ12__.css","/static/css/snackbar-vflj8vZZj.css"]);t.PreviewPPTLoadable=d}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};define("modules/clean/react/previews/preview_toolbar",["require","exports","modules/clean/react/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewToolbar=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/previews/preview_toolbar_component"],t,i)})).then(__importStar).then((function(e){return e.PreviewToolbar}))}})})),define("modules/clean/react/previews/preview_toolbar_frame_messenger",["require","exports","tslib","react","modules/clean/react/previews/frame_messenger_host","modules/clean/previews/util"],(function(e,t,i,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n),a=i.__importStar(a);var o=["idle-mouse","active-mouse"],s=function(e){return o.includes(e.action)},d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setupFrameMessenger=function(){t.frameMessenger=new r.PreviewFrameMessengerHost,t.frameMessenger.configureChildMessaging(a.getIframeQuery(),t.handleMessageFromChild,o),t.frameMessenger.startListening(),t.frameMessenger.postMessageToChildren("preview-toolbar-mounted")},t.handleMessageFromChild=function(e){if(s(e))switch(e.action){case"idle-mouse":t.props.idleMouse();break;case"active-mouse":t.props.activeMouse()}},t.teardownFrameMessenger=function(){t.frameMessenger.resetOriginsForPosting(),t.frameMessenger.stopListening()},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.setupFrameMessenger()},t.prototype.componentWillUnmount=function(){this.teardownFrameMessenger()},t.prototype.render=function(){return null},t})(n.default.Component);t.PreviewToolbarFrameMessenger=d})),define("modules/clean/react/previews/print_helpers",["require","exports","modules/core/i18n"],(function(e,t,i){"use strict";function n(e){return!(e&&e.canPrintRoles&&0===e.canPrintRoles.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.canPrint=n,t.getPrintTooltip=function(e){return n(e)?i.intl.formatMessage({id:"WyIenC",defaultMessage:"Print"}):i.intl.formatMessage({id:"ZMJOlD",defaultMessage:"Printing is turned off for this file."})}})),define("modules/clean/react/previews/video/constants",["require","exports","tslib"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.PlayerRendered="player_rendered",e.FirstClickPlay="first_click_play",e.MediaError="media_error",e.ChangePlaybackRate="change_playback_rate",e.ChangeVideoQuality="change_video_quality",e.ClosePreview="close_preview",e.SeekVideo="seek_video",e.VideoStartsPlaying="video_starts_playing",e.VideoResumesPlaying="video_resumes_playing",e.VideoStalled="video_stalled",e.VideoPaused="video_paused",e.ScrubberThumbnailsLoaded="scrubber_thumbnails_loaded",e.ScrubberThumbnailsFailed="scrubber_thumbnails_failed",e.AudioWaveformLoaded="audio_waveform_loaded",e.AudioWaveformFailed="audio_waveform_failed"})(t.VideoPreviewEvent||(t.VideoPreviewEvent={})),t.HdLabels=["1080p","720p"],t.QualityLabelOrder=i.__spreadArrays(t.HdLabels,["480p","360p","240p","256k","192k","128k"]).reverse()})),define("modules/clean/react/previews/video/utils",["require","exports","tslib","modules/core/browser_detection"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.showQualityNativeHls=function(){return n.edge||n.safari};t.video_type=function(e){return"application/vnd.apple.mpegurl"},t.getTechFromPlayer=function(e){return e.tech({IWillNotUseThisInPlugins:!0})}}));__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};define("modules/clean/react/share_download/button",["require","exports","modules/clean/react/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadSimpleButton=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/share_download/button_component"],t,i)})).then(__importStar).then((function(e){return e.DownloadSimpleButton}))}}),t.ShareDownloadButton=i.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/share_download/button_component"],t,i)})).then(__importStar).then((function(e){return e.ShareDownloadButton}))}})})),define("modules/clean/shallow_equal",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.prototype.hasOwnProperty;function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.shallowEqual=function(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(var o=0;o<r.length;o++)if(!i.call(t,r[o])||!n(e[r[o]],t[r[o]]))return!1;return!0},t.shallowEqualArray=function(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}}));
//# sourceMappingURL=pkg-previews_core.min.js-vflwbZOYl.map