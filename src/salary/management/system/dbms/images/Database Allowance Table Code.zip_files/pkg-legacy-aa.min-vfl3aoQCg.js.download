define("modules/clean/groups/api",["require","exports","tslib","jquery","modules/clean/ajax","modules/clean/contacts/cache_store","modules/clean/viewer"],(function(e,t,a,o,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),n=a.__importStar(n);function i(e){var t="/groups_ajax/"+e.method,a=e.reload_contacts||!1;return n.WebRequest({url:t,type:"post",data:e.data,subject_user:s.Viewer.get_viewer().work_user,success:function(t){var n=JSON.parse(t);(n.ok&&(e.success(n.data),o.default(".error_msg").hide()),a)&&r.DefaultContactsCacheStore.getOrCreateForViewer().load_contacts(!0)},error:function(t){var a=t.responseText;e.error&&(e.error(a.slice(4)),o.default(".error_msg").hide())}})}t.ready=function(){},t.get_groups_for_user=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=function(){return{}}),i({method:"get_groups_for_user",data:e,success:t})},t.get_group_info=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=function(){return{}}),i({method:"get_group_info",data:e,success:t})},t.get_users_for_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"get_users_in_group",data:e,success:t})},t.create_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"make_new_group",data:e,success:t,reload_contacts:!0})},t.create_group_with_users=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"make_new_group_with_users",data:e,success:t,reload_contacts:!0})},t.remove_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"remove_group",data:e,success:t,reload_contacts:!0})},t.rename_group=function(e,t,a){return void 0===a&&(a=function(){return{}}),i({method:"rename_group",data:e,success:t,error:a,reload_contacts:!0})},t.add_users_to_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"add_users_to_group",data:e,success:t,reload_contacts:!0})},t.remove_user_from_group=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"remove_user_from_group",data:e,success:t,reload_contacts:!0})},t.change_group_member_type=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"change_group_member_type",data:e,success:t})},t.make_group_join_request=function(e,t){return void 0===t&&(t=function(){return{}}),i({method:"make_group_join_request",data:e,success:t})},t.metaserver_ajax=i})),define("modules/clean/sharing/notifications",["require","exports","tslib","jquery","modules/clean/browse_interface","modules/clean/sharing/api/client","modules/clean/sharing/ui_notifications_util","modules/clean/viewer","modules/constants/payments","modules/core/browser","modules/core/i18n","modules/core/uri"],(function(e,t,a,o,n,r,s,i,u,c,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),n=a.__importStar(n),u=a.__importStar(u),c=a.__importStar(c);t.register_dismiss=function(e){var t,a=o.default(e).closest("form");return null===(t=a.closest(".sc-invite-action"))||void 0===t||t.addClass("loading"),a.length&&new r.ShareApiClient({userId:a[0]._subject_uid.value}).dismissInviteNotification({contentId:a[0].content_id.value}).finally((function(){return a.closest(".sc-invite-action").removeClass("loading"),a.closest(".feed-row").remove()})),!1};t.register_mount=function(e){var t=o.default(e);t.closest(".sc-invite-action").addClass("loading");var a=i.Viewer.get_viewer().get_user_by_id(e._subject_uid.value);return new r.FolderShareApiClient({userId:a.id}).mount({contentId:e.sf_id.value,origin:"NOTIFICATION_WEB"}).then((function(e){t.closest(".sc-invite-action").addClass("sf-mounted");var o=e.path_lower,r=new d.URI({path:n.get_browse_root(a)+o}).toString();return c.redirect(r),s.sharingNotificationSuccess(l.intl.formatMessage({id:"I/ePp9",defaultMessage:"Added the shared folder {folder_name}."},{folder_name:e.name}))})).finally((function(){return t.closest(".sc-invite-action").removeClass("loading")})),!1};t.upgrade_to_mount=function(){s.sharingNotificationInfo(l.intl.formatMessage({id:"oeASwG",defaultMessage:"Continue upgrading to add the shared folder to your Dropbox."}));var e=u.BUY_URL,t=new d.URI({scheme:"https",authority:"www.dropbox.com",path:e});return t.updateQuery({cont:"sf",oqa:"sf_aoq_b_n"}),c.redirect(t.toString()),!1}})),define("modules/clean/sharing/views/sync_coachmark",["require","exports","tslib","react","modules/clean/ajax","modules/clean/react/bubble","modules/clean/react/css","modules/clean/react/image","modules/clean/static_urls","modules/core/i18n"],(function(e,t,a,o,n,r,s,i,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),n=a.__importStar(n),r=a.__importDefault(r);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={show:!0},t.hideSyncCoachmark=function(){t.setState({show:!1})},t}return a.__extends(t,e),t.prototype.componentWillMount=function(){n.BackgroundRequest({url:"/sharing/seen_sync_coachmark"})},t.prototype.render=function(){return this.state.show?o.default.createElement(r.default,{arrow:r.default.ARROW.TOP_RIGHT,className:"sync-coachmark u-pad-s"},o.default.createElement(i.Image,{className:"u-l-ib",src:u.static_url("/static/images/sharing/sync_coachmark-vflvg8Oy0.png"),srcHiRes:u.static_url("/static/images/sharing/sync_coachmark@2x-vflhX3Mhx.png")}),o.default.createElement("div",{className:"u-l-ib u-pad-left-s sync-coachmark__content"},o.default.createElement("h2",null,c.intl.formatMessage({id:"utNf/m",defaultMessage:"Stay in sync"})),o.default.createElement("p",null,c.intl.formatMessage({id:"SIGEzu",defaultMessage:"For easy access to this folder in the future, add it to your Dropbox."})),o.default.createElement("button",{className:"c-btn c-btn--secondary",onClick:this.hideSyncCoachmark},c.intl.formatMessage({id:"W4An+g",defaultMessage:"Got it"})))):o.default.createElement("div",null)},t.displayName="SharingSyncCoachmark",t})(o.default.Component);t.SharingSyncCoachmark=s.requireCssWithComponent(l,["/static/css/sharing/sync_coachmark-vfl_8vkAL.css"])})),define("modules/clean/teams/limited_team_invite_form",["require","exports","tslib","classnames","react","react-dom-factories","modules/core/uri","modules/core/i18n","modules/clean/analytics","modules/clean/css","modules/clean/contacts/contact_token_state","modules/clean/contacts/tokenizer","modules/clean/contacts/types","modules/clean/react/input","modules/core/browser","modules/clean/teams/email_checker_store"],(function(e,t,a,o,n,r,s,i,u,c,l,d,m,f,p,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),n=a.__importDefault(n),r=a.__importDefault(r),c=a.__importStar(c),m=a.__importDefault(m),f=a.__importStar(f),p=a.__importStar(p);var g=f.textarea;t.InvitationContexts={existingTeam:{id:"existingTeam",checkUrl:"/team/manage/check_can_invite"},createLimitedTeam:{id:"createLimitedTeam",checkUrl:"/team/create_limited/check_can_invite"}};var h={};for(var v in t.InvitationContexts)if(t.InvitationContexts[v]){var k=t.InvitationContexts[v],C=k.id,b=k.checkUrl;h[C]=new _.EmailCheckerStore(b)}var y=(function(e){function f(t){var a=e.call(this,t)||this;return a._isUnMounted=!1,a.getContacts=function(){return a.refs.tokenizer.getContacts()},a.getFinalData=function(e){var t;a.refs.tokenizer.tokenizeAll();var o=a.getContacts();a.props.includeCustomMessage&&(t=a.refs.customMessage.getValue()),a._ensureContactsStateUpdated(o,(function(){var n=o.filter((function(e){return e.type===m.default.EMAIL})).map((function(e){return e.email}));a._updateErrorMessage((function(){u.TeamsWebActionsLogger.log("suggest_members_entered_email_error",{error_message:a.state.errorMessage,url:p.get_href()})})),e({emails:n,custom_message:t})}))},a.areAllContactsValid=function(){if(a._overInviteLimit())return!1;var e=a.refs.tokenizer.serializeInputData().tokens;return 0===e.length||e.every((function(e){return a._validateContact(e).state===l.ContactTokenState.ok}))},a.isEmpty=function(){var e=a.refs.tokenizer.serializeInputData(),t=e.tokens,o=e.value;return 0===t.length&&0===o.length},a._ensureContactsStateUpdated=function(e,t){var o=(e=e.filter((function(e){return e.type===m.default.EMAIL&&!e.invalid&&!e.on_team}))).map((function(e){return e.email}));a.state.emailCheckerStore.checkEmails(o,(function(){a._isUnMounted||t()}))},a._validateContact=function(e){var t;if(e.invalid)t={state:l.ContactTokenState.invalid,msg:i.intl.formatMessage({id:"Zo28sX",defaultMessage:"Invalid email."})};else if(e.on_team)t={state:l.ContactTokenState.invalid,msg:i.intl.formatMessage({id:"w6S6LE",defaultMessage:"User is already a member of this team."})};else{var o=a.state.emailCheckerStore.getEmailCheckResult(e.email),n=null;o?o.inFlight?t={state:l.ContactTokenState.pending,msg:n}:o.canInvite?t={state:l.ContactTokenState.ok,msg:n}:("team_member"===o.reason?n=i.intl.formatMessage({id:"/bTRGP",defaultMessage:"This person is already on another team."}):"already_on_this_team"===o.reason?n=i.intl.formatMessage({id:"gUZ177",defaultMessage:"User is already invited to this team."}):"error"===o.reason&&(n=i.intl.formatMessage({id:"I1RVgD",defaultMessage:"User isnâ€™t eligible to join this team."})),t={state:l.ContactTokenState.invalid,msg:n}):t={state:l.ContactTokenState.invalid,msg:n}}return t},a._overInviteLimit=function(){var e=a.refs.tokenizer.serializeInputData().tokens;return void 0!==a.props.memberInviteLimit&&e.length>a.props.memberInviteLimit},a._updateErrorMessage=function(e){if(a.refs.tokenizer){for(var t=0,o=a.refs.tokenizer.serializeInputData().tokens;t<o.length;t++){var n=o[t],u=a._validateContact(n),c=u.state,d=u.msg;if(c!==l.ContactTokenState.ok)return void a.setState({errorMessage:d},e)}if(a._overInviteLimit()){var m={tk:String(a.props.maxTeamSize),_camp:"invite"},f=new s.URI({path:"/team/upgrade",query:m});a.setState({errorMessage:i.intl.formatMessage({id:"K4q33s",defaultMessage:"{count, plural, one{You have {count} invite remaining. <upgradeLink>Upgrade</upgradeLink> now to add as many members as you like to your team.} other{You have {count} invites remaining. <upgradeLink>Upgrade</upgradeLink> now to add as many members as you like to your team.}}"},{count:a.props.memberInviteLimit,upgradeLink:function(e){return r.default.a({href:f.toString()},e)}})},e)}else a.setState({errorMessage:null})}},a.onContentsChange=function(e,t){a._ensureContactsStateUpdated(e,(function(){a._updateErrorMessage(),a.props.onChange&&a.props.onChange()}))},a._customContactFilter=function(e){return!(e.type!==m.default.EMAIL||e.team||!e.name||e.email===a.props.user.email)},a.state={errorMessage:null,emailCheckerStore:a.props.emailCheckerStore||h[a.props.invitationContext.id]},a}return a.__extends(f,e),f.prototype.componentWillMount=function(){var e=this;c.require_css("/static/css/teams/limited_team_invite_form-vflcSjpys.css"),c.require_css("/static/css/react/contacts_tokenizer-vflPxjRxg.css"),this.props.populatedContacts&&this.props.populatedContacts.length>0&&this._ensureContactsStateUpdated(this.props.populatedContacts,(function(){e.props.onChange&&e.props.onChange()}))},f.prototype.componentDidUnMount=function(){this._isUnMounted=!0},f.prototype.render=function(){var e,t={"limited-team-invite-form":!0,"error-message-fixed":this.props.errorMessageSpaceFixed,"has-custom-message":this.props.includeCustomMessage};return this.props.includeCustomMessage&&(e=n.default.createElement(g,{ref:"customMessage",className:"custom-message","disable-errors":!0,placeholder:this.props.messagePlaceholder,value:this.props.populatedCustomMessage})),n.default.createElement("div",{className:o.default(t,this.props.customClass)},n.default.createElement("div",{className:"error-message u-mar-bottom-xss"},this.props.customErrorMessage||this.state.errorMessage),n.default.createElement(d.ContactsTokenizer,{ref:"tokenizer",user:this.props.user,placeholder:this.props.emailPlaceholder,onContentsChange:this.onContentsChange,focusOnMount:this.props.autofocusTokenizer,populatedInputData:{tokens:this.props.populatedContacts,value:""},tokenSpacing:this.props.tokenSpacing,customContactValidator:this._validateContact,customContactFilter:this._customContactFilter}),this.props.includeCustomMessage&&e)},f.displayName="LimitedTeamInviteForm",f.defaultProps={customClass:"",invitationContext:t.InvitationContexts.existingTeam,populatedContacts:[],emailPlaceholder:i.intl.formatMessage({id:"mU6Spv",defaultMessage:"Name or email"}),messagePlaceholder:i.intl.formatMessage({id:"Sj7Fsz",defaultMessage:"Add a message (optional)"}),includeCustomMessage:!0,autofocusTokenizer:!0},f})(n.default.Component);t.LimitedTeamInviteForm=y})),define("modules/clean/top_notif",["require","exports","tslib","jquery","modules/clean/ajax"],(function(e,t,a,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=a.__importDefault(o),n=a.__importStar(n);var r={HIDE_EVENT:"db:topnotificationbar:hide",show:function(){var e;(e=document.body.classList).add.apply(e,["top-notification-bar","has-top-notification"])},hide:function(){for(var e,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];o.default("#top-notification-bar-container").remove(),o.default(".top-notification-bar-silo").remove(),(e=document.body.classList).remove.apply(e,["top-notification-bar","has-top-notification"]),o.default(".embedded-app.IndexRebrandPage.top-notification-bar").removeClass("top-notification-bar"),o.default(".maestro #notify-wrapper.with-top-notification").removeClass("with-top-notification"),o.default(document).trigger(this.HIDE_EVENT)},hideById:function(e){document.querySelector(".top-notification-bar-container #"+e)&&r.hide()}};t.TopNotificationBar=r;var s={init:function(){return r.show(),o.default(".eu-bar-dismiss").on("click",(function(e){return e.preventDefault(),r.hide(),n.SilentBackgroundRequest({url:"/dismiss_eu_cookie_notification"})}))}};t.EUCookieNotificationBar=s;var i={init:function(){return r.show(),o.default("#locale-switch-banner-dismiss").on("click",(function(e){return e.preventDefault(),r.hide(),n.SilentBackgroundRequest({url:"/dismiss_locale_switch_banner"})}))}};t.LocaleSwitchBar=i;var u={init:function(){return r.show(),o.default("#super-inactive-recover-bar-dismiss").on("click",(function(e){return e.preventDefault(),r.hide(),n.SilentBackgroundRequest({url:"/dismiss_super_inactive_recover_bar"})}))}};t.SuperInactiveRecoverBar=u;var c={init:function(){return r.show(),o.default("#unsupported-browser-dismiss").on("click",(function(e){return e.preventDefault(),r.hide(),n.SilentBackgroundRequest({url:"/dismiss_browser_msg"})}))}};t.UnsupportedBrowser=c;var l={init:function(e){return r.show(),o.default(".beta-locale-dismiss").on("click",(function(t){return t.preventDefault(),r.hide(),n.SilentBackgroundRequest({url:"/dismiss_beta_locale_notification",data:{source:e}})}))}};t.BetaLocaleNotificationBar=l}));
//# sourceMappingURL=pkg-legacy-aa.min.js-vfl3eLGwx.map