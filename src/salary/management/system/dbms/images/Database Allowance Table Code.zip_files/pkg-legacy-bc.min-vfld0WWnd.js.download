define("modules/clean/react/client/components/field_error",["require","exports","tslib","classnames","create-react-class","react","prop-types","react-addons-pure-render-mixin"],(function(e,t,n,o,i,s,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),i=n.__importDefault(i),s=n.__importDefault(s),r=n.__importStar(r),a=n.__importDefault(a);var c=r.string,_=r.object,u=r.bool,p=r.oneOfType,l=r.array,d=i.default({displayName:"FieldError",mixins:[a.default],propTypes:{error:p([c,l]),children:_.isRequired,className:c,id:c,clearOnChange:u},getDefaultProps:function(){return{error:null,clearOnChange:!0}},getInitialState:function(){return{currentError:this.props.error}},componentWillReceiveProps:function(e){return this.setState({currentError:e.error})},_onContentChange:function(){if(this.props.clearOnChange)return this.setState({currentError:null})},render:function(){var e,t=o.default(((e={"validated-field":!0,"validated-field--error":null!=this.state.currentError})[this.props.className]=null!=this.props.className,e)),n=o.default({"validated-field__message":!0,"validated-field__message--error":null!=this.state.currentError});return s.default.createElement("div",{className:t,onChange:this._onContentChange},this.props.children,s.default.createElement("p",{className:n,id:this.props.id},this.state.currentError))}});t.default=d})),define("modules/clean/react/client/services",["require","exports","modules/clean/ajax","modules/clean/flux/dispatcher"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;(function(e){e.WEB_ONLINE="CLIENT_REQUEST:WEB_ONLINE",e.WEB_OFFLINE="CLIENT_REQUEST:WEB_OFFLINE"})(i=t.ClientRequestActionTypes||(t.ClientRequestActionTypes={}));var s=0;t.request=function(e){return new Promise((function(t,r){e.success=function(e){t(e)},e.error=function(e){navigator.onLine||(o.Dispatcher.dispatch({type:i.WEB_OFFLINE}),s||(s=setInterval((function(){navigator.onLine&&(clearInterval(s),s=0,o.Dispatcher.dispatch({type:i.WEB_ONLINE}))}),500))),r(e)},n.WebRequest(e)}))}})),define("modules/clean/react/client/setup_wizard/actions",["require","exports","tslib","modules/clean/bolt","modules/clean/flux/dispatcher","modules/clean/form_util/name_parser","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/content","modules/clean/react/client/setup_wizard/roles","modules/clean/react/client/setup_wizard/server","modules/clean/react/client/setup_wizard/services","modules/clean/react/client/setup_wizard/setup_validators","modules/clean/react/client/setup_wizard/store","modules/clean/server_side_client_view_bridge","modules/core/exception","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/profile_services/profile_services_constants","modules/clean/react/client/setup_wizard/util"],(function(e,t,n,o,i,s,r,a,c,_,u,p,l,d,h,f,E,S,T,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),s=n.__importDefault(s),c=n.__importStar(c),_=n.__importStar(_),p=n.__importStar(p),l=n.__importDefault(l),d=n.__importStar(d),T=n.__importStar(T);var y=f.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}),m=new((function(){function e(){var e=this;this.showAudioCaptchaInstructions=function(){var e=document.getElementsByClassName("audio-captcha-instructions");e.length>0&&(e[0].style.display="block")},this.tryNeedsCaptcha=function(t,n){l.default.captchaReady()&&"signup"===t&&_.tryNeedsSignupCaptcha(n).then((function(t){var n=String(t),o=JSON.parse(n);if(o.needs_captcha){var i=document.getElementById("dropbox-logo");null!=i&&(i.style.marginBottom="25px"),e.showAudioCaptchaInstructions(),window.grecaptcha.render("recaptcha_v2_challenge",{sitekey:o.recaptcha_v2_public_key}),e.reportEvent("signup_signup_captcha_shown")}})).catch((function(t){e.reportEvent("signup_signup_captcha_error")}))},this.getCaptchaResponse=function(){var e=document.getElementsByName("g-recaptcha-response");return e.length>0?e[e.length-1].value:void 0},this.resetCaptcha=function(){if(document.getElementsByName("g-recaptcha-response").length>0){var e=document.getElementsByName("g-recaptcha-response")[0].id.substring(21);return e.length>0?window.grecaptcha.reset(parseInt(e,10)):window.grecaptcha.reset(0),!0}return!1},this.tryDeviceLimitPreauth=function(){e.reportEvent("signin_preauth_clicked");var t=l.default.deviceLimitNonce();null!=t&&(_.tryDeviceLimitPreauth(t,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(t){e.authSuccess(t,"signin_preauth"),l.default.currentScreenType()!==r.SetupScreenTypes.DEVICE_LIMIT_LANDING&&e.changeScreen(r.SetupScreenTypes.SIGN_IN)})).catch((function(t){e.authError(t,"signin_preauth"),e.changeScreen(r.SetupScreenTypes.SIGN_IN)})),e.setIsTopmost(!0))},this.trySignIn=function(t,o){return void 0===o&&(o=!1),n.__awaiter(e,void 0,void 0,(function(){var e,i,s,r;return n.__generator(this,(function(n){switch(n.label){case 0:e=o?"signin_signin_verify":"signin_signin",this.reportEvent(e+"_clicked"),i=o?p.validateVerifyForm(t):p.validateSignInForm(l.default.emailTrimmed(),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.handleValidationResult(i)];case 2:return n.sent(),[3,4];case 3:return n.sent(),this.logFieldErrors(i.errors,e),[3,4];case 4:return n.trys.push([4,6,,7]),[4,_.trySignIn(l.default.emailTrimmed(),t,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),l.default.providerCheckpointToken(),l.default.provider(),l.default.isPairing())];case 5:return s=n.sent(),this.authSuccess(s,e),[3,7];case 6:return r=n.sent(),this.authError(r,e),[3,7];case 7:return[2]}}))}))},this.authSuccess=function(t,n,o,i){void 0===o&&(o=0);var s=JSON.parse(String(t));e.authSuccessJson(s,n,o,i)},this.on_success=function(t){switch(t.status){case"OK":u.SetupWizardHostNonceFetcher.stop(),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DROPBOX_PATH,data:t.path}),t.has_secondary&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_HAS_SECONDARY,data:t.has_secondary}),t.multi_disabled&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_MULTI_DISABLED,data:t.multi_disabled}),t.current_role&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_ROLE,data:t.current_role}),t.team&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_TEAM,data:t.team}),t.content_starts_online_only&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CONTENT_STARTS_ONLINE_ONLY,data:t.content_starts_online_only}),t.infinite_exposed&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_INFINITE_EXPOSED,data:t.infinite_exposed}),t.will_install_kext&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_WILL_INSTALL_KEXT,data:t.will_install_kext}),t.is_unconsented&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_UNCONSENTED,data:t.is_unconsented}),t.file_provider_enabled&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FILE_PROVIDER_ENABLED,data:t.file_provider_enabled}),t.onboarding_type&&t.onboarding_variant&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_ONBOARDING_INFO,data:{onboardingType:t.onboarding_type,onboardingVariant:t.onboarding_variant}}),null!=t.free_space&&null!=t.sync_space_used&&null!=t.total_space&&e.setDiskUsage(t);var n=!0;return t.file_provider_enabled?n=!1:t.post_link_setup_flags&&null!=t.post_link_setup_flags.show_move_dropbox&&(n=t.post_link_setup_flags.show_move_dropbox),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_SHOW_MOVE_DROPBOX,data:n}),e.pushPostLinkScreen(r.SetupScreenTypes.DONE),t.old_name&&t.new_name&&(e.setFolderRename(t),e.pushPostLinkScreen(r.SetupScreenTypes.RENAME)),t.infinite_exposed&&(t.current_role===c.WORK?(e.setDefaultRootPolicy(r.INFINITE_ROOT_POLICY_CHOICE.ADMIN_DEFAULT),e.setAdminDefaultRootPolicy(t.content_starts_online_only?r.INFINITE_ROOT_POLICY.ON_DEMAND:r.INFINITE_ROOT_POLICY.LOCAL)):e.setDefaultRootPolicy(r.INFINITE_ROOT_POLICY_CHOICE.ON_DEMAND),e.pushPostLinkScreen(r.SetupScreenTypes.INFINITE_SETTING)),t.post_link_setup_flags&&t.post_link_setup_flags.require_scale_mitigation?e.pushPostLinkScreen(r.SetupScreenTypes.SCALE_MITIGATION):l.default.isLowDiskSpace()&&!t.infinite_exposed?e.pushPostLinkScreen(r.SetupScreenTypes.LOW_DISK):l.default.isLargeDropbox()&&!t.infinite_exposed&&e.pushPostLinkScreen(r.SetupScreenTypes.LARGE_DROPBOX),l.default.isFedrampUser()&&e.pushPostLinkScreen(r.SetupScreenTypes.FEDRAMP_MESSAGE),e.popPostLinkScreen(),!0;case"PENDING":return!1;default:return E.Notify.error(y),!0}},this.trySignUp=function(t,n){var o=l.default.isGoogleSignUp()?"signup_google_signup":"signup_signup";if(l.default.isPrimary()){e.reportEvent(o+"_clicked");var i=p.validateSignUpForm(l.default.name(),l.default.emailTrimmed(),t,n);e.handleValidationResult(i).then((function(){var i=s.default.splitFullName(l.default.name()),r=i[0],a=i[1];_.trySignUp(r,a,l.default.emailTrimmed(),t,n,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),l.default.googleSignUpData(),e.getCaptchaResponse()).then((function(t){e.authSuccess(t,o),e.setIsNewAccount(!0)})).catch((function(t){e.resetCaptcha()||e.tryNeedsCaptcha("signup",l.default.emailTrimmed()),e.authError(t,o)}))})).catch((function(){e.logFieldErrors(i.errors,o)})),e.setIsTopmost(!0)}}}return e.prototype.reportEvent=function(e,t){void 0===t&&(t={}),d.SetupWizardReportEvent(e,n.__assign({show_carousel:!!l.default.clientShowCarousel()},t))},e.prototype.ensureClientConnection=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.ENSURE_CLIENT_CONNECTION})},e.prototype.setDisabledState=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:e})},e.prototype.setHostNonce=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_HOST_NONCE,data:e})},e.prototype.setScriptNonce=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_SCRIPT_NONCE,data:e})},e.prototype.setCaptchaReady=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CAPTCHA_READY,data:e})},e.prototype.setGoogleSignUpData=function(e,t){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_GOOGLE_SIGN_UP_DATA,data:{isGoogleSignUp:!0,emailSig:e,refreshToken:t}})},e.prototype.clearGoogleSignUpData=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_GOOGLE_SIGN_UP_DATA,data:{isGoogleSignUp:!1,emailSig:null,refreshToken:null}})},e.prototype.setIsPrimary=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_PRIMARY,data:e})},e.prototype.setIsPairing=function(e){void 0===e&&(e=!1),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_PAIRING,data:e})},e.prototype.setIsNewAccount=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_NEW_ACCOUNT,data:e})},e.prototype.setDealCode=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DEAL_CODE,data:e})},e.prototype.setEmail=function(e){(l.default.isPrimary()||l.default.isPairing()||!l.default.emailTrimmed())&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_EMAIL,data:e})},e.prototype.setName=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_NAME,data:e})},e.prototype.setTeam=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_TEAM,data:e})},e.prototype.setRole=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_ROLE,data:e})},e.prototype.setFolderRename=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FOLDER_RENAME,data:e})},e.prototype.setDiskUsage=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISK_USAGE,data:e})},e.prototype.pushPostLinkScreen=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.PUSH_POST_LINK_SCREEN,data:{screenType:e}})},e.prototype.popPostLinkScreen=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.POP_POST_LINK_SCREEN}),this.setIsTopmost(!0)},e.prototype.changeScreen=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.CHANGE_SCREEN,data:{screenType:e}}),e!==r.SetupScreenTypes.SSO_CODE&&this.setIsTopmost(!0)},e.prototype.setDefaultRootPolicy=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DEFAULT_ROOT_POLICY,data:e})},e.prototype.setAdminDefaultRootPolicy=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_ADMIN_DEFAULT_ROOT_POLICY,data:e})},e.prototype.removeFieldError=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.REMOVE_FIELD_ERROR,data:e}),this.setIsTopmost(!0)},e.prototype.setShowSSO=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_SSO_STATE,data:e})},e.prototype.clearProviderCheckpointToken=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PROVIDER_CHECKPOINT_TOKEN,data:null})},e.prototype.clearProvider=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PROVIDER,data:null})},e.prototype.openDropboxFolder=function(){l.default.hasSecondary()?this.reportEvent("done_panel_multiaccount_skip"):this.reportEvent("done_panel_folder_opened"),i.Dispatcher.dispatch({type:r.SetupActionTypes.OPEN_DB_FOLDER})},e.prototype.linkSecondary=function(){this.reportEvent("done_panel_multiaccount_signin_clicked"),i.Dispatcher.dispatch({type:r.SetupActionTypes.LINK_SECONDARY})},e.prototype.resendTwoFactor=function(){_.resendTwoFactor(l.default.checkpointToken()),this.reportEvent("two_factor_auth_send_new_clicked"),E.Notify.success(a.Content.two_factor_resend_sent),this.setIsTopmost(!0)},e.prototype.launchTerms=function(){this.reportEvent("signup_open_terms"),this.setIsTopmost(!1);d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(e){if(e)return d.OpenUncredentialedBrowserWithDropboxURL("/terms");var t=new S.URI({scheme:"https",authority:"www.dropbox.com",path:"/terms"});d.OpenUncredentialedBrowser(String(t))}))},e.prototype.forgotPassword=function(){this.reportEvent("signin_forgot_password"),this.setIsTopmost(!1);d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(e){if(e){var t=new S.URI({path:"/forgot",query:{email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowserWithDropboxURL(String(t))}else{t=new S.URI({scheme:"https",authority:"www.dropbox.com",path:"/forgot",query:{email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowser(String(t))}}))},e.prototype.signUpOnWeb=function(){this.reportEvent("signin_sign_up_on_web"),this.setIsTopmost(!1);var e=g.getCurrentUser();if(e){var t=(function(){switch(e.role){case"personal":return"/business/try";case"work":return"/team/account_pair"}})();d.OpenCredentialedBrowser(t,e.id)}else d.OpenUncredentialedBrowserWithDropboxURL("/")},e.prototype.openLostPhoneHelp=function(){this.reportEvent("two_factor_auth_lost_phone_clicked"),this.changeScreen(r.SetupScreenTypes.TWO_FACTOR_RECOVERY)},e.prototype.openMoreHelpTFARecovery=function(){this.setIsTopmost(!1);var e="/c/help/two_step";this.reportEvent("tfa_recovery_need_more_help_clicked"),d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(t){if(t)d.OpenUncredentialedBrowserWithDropboxURL(e);else{var n=new S.URI({scheme:"https",authority:"www.dropbox.com",path:e});d.OpenUncredentialedBrowser(String(n))}}))},e.prototype.sendPushNotification=function(){var e=this;this.reportEvent("tfa_recovery_send_push_clicked"),_.trySendPushNotification(l.default.checkpointToken()).then((function(t){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_TFA_RECOVERY_TOKEN,data:t.token}),e.reportEvent("tfa_recovery_send_push_success")})).catch((function(t){e.changeScreen(r.SetupScreenTypes.SIGN_IN),void 0===t.message?(E.Notify.error(f.intl.formatMessage({id:"7obT6s",defaultMessage:"Unknown error when sending push notification"})),e.reportEvent("tfa_recovery_send_push_failed")):E.Notify.error(t.message)}))},e.prototype.handleApprovedPushLoginRequest=function(e){var t=this;return this.reportEvent("tfa_recovery_push_auth_clicked"),new Promise((function(n,o){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(e){t.authSuccess(e,"tfa_recovery_push_auth"),n()})).catch((function(e){t.authError(e,"tfa_recovery_push_auth"),o(e?e.message:f.intl.formatMessage({id:"uoLC3b",defaultMessage:"Error trying to sign in with push notification."}))}))}))},e.prototype.submitTFABackupCode=function(e){var t=this,n="tfa_recovery_backup_code_auth";this.reportEvent(n+"_clicked");var o=p.validateTFABackupCodeForm(e);this.handleValidationResult(o).then((function(){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),!0).then((function(e){t.authSuccess(e,n)})).catch((function(e){t.authError(e,n)}))})).catch((function(){t.logFieldErrors(o.errors,n)}))},e.prototype.submitTFABackupPhoneCode=function(e){var t=this,n="tfa_recovery_backup_phone_auth";this.reportEvent(n+"_clicked");var o=p.validateTFABackupPhoneForm(e);this.handleValidationResult(o).then((function(){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),!1,!0).then((function(e){t.authSuccess(e,n)})).catch((function(e){t.authError(e,n)}))})).catch((function(){t.logFieldErrors(o.errors,n)}))},e.prototype.tryTextBackup=function(){var e=this;this.reportEvent("tfa_recovery_text_backup_clicked"),_.tryTextBackup(l.default.checkpointToken()).then((function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_BACKUP_TEXT_SENT,data:!0}),E.Notify.success(f.intl.formatMessage({id:"lwq/Vu",defaultMessage:"We sent a code to your phone."})),e.reportEvent("tfa_recovery_text_backup_success")})).catch((function(t){void 0===t.message?(E.Notify.error(f.intl.formatMessage({id:"b8vqRw",defaultMessage:"Unknown error when sending text message"})),e.reportEvent("tfa_recovery_text_backup_failed")):("checkpoint_token_invalid"===t.error[".tag"]&&e.changeScreen(r.SetupScreenTypes.SIGN_IN),E.Notify.error(t.message))}))},e.prototype.tryResendBackup=function(){var e=this;this.reportEvent("tfa_recovery_resend_backup_clicked"),_.tryResendBackup(l.default.checkpointToken()).then((function(){E.Notify.success(a.Content.two_factor_resend_sent),e.reportEvent("tfa_recovery_resend_backup_success")})).catch((function(t){void 0===t.message?(E.Notify.error(f.intl.formatMessage({id:"b8vqRw",defaultMessage:"Unknown error when sending text message"})),e.reportEvent("tfa_recovery_resend_backup_failed")):("checkpoint_token_invalid"===t.error[".tag"]&&e.changeScreen(r.SetupScreenTypes.SIGN_IN),E.Notify.error(t.message))}))},e.prototype.trySSO=function(){this.reportEvent("sso_launch_browser"),this.setIsTopmost(!1);d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(e){if(e){var t=new S.URI({path:"/sso",query:{from_client:"True",login_email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowserWithDropboxURL(String(t))}else{t=new S.URI({scheme:"https",authority:"www.dropbox.com",path:"/sso",query:{from_client:"True",login_email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowser(String(t))}}))},e.prototype.handleValidationResult=function(e){return new Promise((function(t,n){e.valid?(i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!0}),i.Dispatcher.dispatch({type:r.SetupActionTypes.CLEAR_GENERIC_ERROR}),t()):(i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FIELD_ERRORS,data:e.errors}),n(e.errors))}))},e.prototype.submitSSOCode=function(e){var t=this;this.reportEvent("sso_auth_clicked");var n=p.validateSSOCodeForm(e);this.handleValidationResult(n).then((function(){_.trySSOSignIn(l.default.emailTrimmed(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(e){t.authSuccess(e,"sso_auth")})).catch((function(e){t.authError(e,"sso_auth")}))})).catch((function(){t.logFieldErrors(n.errors,"sso_auth")})),this.setIsTopmost(!0)},e.prototype.submitTwoFactor=function(e){var t=this;this.reportEvent("two_factor_auth_clicked");var n=p.validateTwoFactorForm(e);this.handleValidationResult(n).then((function(){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),!1,!1,l.default.isPairing()).then((function(e){t.authSuccess(e,"two_factor_auth")})).catch((function(e){t.authError(e,"two_factor_auth")}))})).catch((function(){t.logFieldErrors(n.errors,"two_factor_auth")})),this.setIsTopmost(!0)},e.prototype.openProviderAuth=function(e){var t=this,n=e===T.default.APPLE?"signin_apple_signin":"signin_google_signin";this.reportEvent(n+"_clicked"),this.setIsTopmost(!1),i.Dispatcher.dispatch({type:r.SetupActionTypes.CLEAR_FIELD_ERRORS}),_.getGoogleAuthBoltToken(l.default.hostNonce()).then((function(n){t.subscribeToBolt(n),t.openProviderAuthWindow(e)}))},e.prototype.signOut=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.CHANGE_SCREEN,data:{screenType:r.SetupScreenTypes.LOADING}}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SIGN_OUT})},e.prototype.onBoltUpdate=function(e){var t=this,n=e[0].payloads[e[0].payloads.length-1].payload,o=n.service_type===T.ServiceResponseType.APPLE?"signin_apple_signin":"signin_google_signin";this.reportEvent(o+"_complete",{status:n.status,reason:n.err_msg});var s=n.service_type===T.ServiceResponseType.APPLE?r.FieldValidationKeys.LOGIN_APPLE:r.FieldValidationKeys.LOGIN_GOOGLE,c={};if(!n.email||this.checkSecondaryEmailFromProvider(n.email||"",s,o))if("ERROR"===n.status||"UNVERIFIED_EMAIL"===n.status)c[s]=a.getProviderAuthErrorString(n.err_msg||"",l.default.emailTrimmed(),n.email||"",n.service_type),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FIELD_ERRORS,data:c});else if("UNVERIFIED"===n.status||"REQUIRES_PASSWORD"===n.status)this.setEmail(n.email||""),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PROVIDER_CHECKPOINT_TOKEN,data:n.checkpoint_token}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PROVIDER,data:n.service_type}),this.reportEvent(o+"_verify_load"),this.changeScreen(r.SetupScreenTypes.VERIFY);else if("REGISTER"===n.status){this.setName(n.name||""),this.setEmail(n.email||""),this.setGoogleSignUpData(n.email_sig||"",n.refresh_token||"");var _=n.service_type===T.ServiceResponseType.APPLE?"signup_apple_signup":"signup_google_signup";this.reportEvent(_+"_load"),this.changeScreen(r.SetupScreenTypes.SIGN_UP)}else"BADNONCE"===n.status?(c[s]=a.Content.error_try_again,i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FIELD_ERRORS,data:c}),this.setDisabledState(!0),u.SetupWizardHostNonceFetcher.fetchNewNonce((function(e){t.setDisabledState(!1)}))):"DEVICE_LIMIT_EXCEEDED"===n.status?n.device_limit_nonce&&(this.setDeviceLimitNonce(n.device_limit_nonce),this.tryDeviceLimitPreauth()):(this.setDisabledState(!0),this.authSuccessJson(n,o));d.ForegroundServerView(),this.setIsTopmost(!0),u.SetupBoltClient.unsubscribe()},e.prototype.checkSecondaryEmailFromProvider=function(e,t,n){if(l.default.isPrimary())return!0;if(e===l.default.emailTrimmed())return!0;var o={};return o[t]=f.intl.formatMessage(a.Content.multiaccount_provider_error,{email:l.default.emailTrimmed()}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FIELD_ERRORS,data:o}),this.reportEvent(n+"_pairing_failure"),!1},e.prototype.onBoltRefresh=function(){u.SetupBoltClient.unsubscribe()},e.prototype.subscribeToBolt=function(e){var t=this,n=new o.SignedChannelState(e.app_id,l.default.hostNonce(),e.revision,e.token);u.SetupBoltClient.subscribe([n],(function(e){t.onBoltUpdate(e)}),(function(){t.onBoltRefresh()}))},e.prototype.openProviderAuthWindow=function(e){var t;t=l.default.isPrimary()?{host_nonce:l.default.hostNonce(),service:e||""}:{host_nonce:l.default.hostNonce(),login_hint:l.default.emailTrimmed(),service:e||""};var n=new S.URI({scheme:"https",authority:"www.dropbox.com",path:"/profile_services/open_identity_provider_window",query:t});d.OpenUncredentialedBrowser(String(n))},e.prototype.bridgeFuncPromise=function(e){return new Promise((function(t,n){e((function(e){return e.error?(i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),E.Notify.error(y),n(e.error)):t(e)}))}))},e.prototype.pollUntil=function(e,t){var n=this,o=setInterval((function(){n.bridgeFuncPromise(e).then((function(e){t(e.result)&&clearInterval(o)})).catch((function(){clearInterval(o)}))}),2e3)},e.prototype.executeThenPoll=function(e,t,n){var o=this;this.bridgeFuncPromise(e).then((function(){o.pollUntil(t,n)}))},e.prototype.authSuccessJson=function(e,t,n,o){var s=this;switch(void 0===n&&(n=0),"BADNONCE"!==e.status&&_.clearLastRequest(),e.status){case"BADNONCE":n>=r.ALLOWED_REQUEST_RETRIES?(this.reportEvent(t+"_failure",{reason:"too many retries"}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),_.clearLastRequest(),E.Notify.error(y),o&&o(new Error("BADNONCE: too many retries"))):(this.reportEvent(t+"_failure",{reason:"bad nonce"}),u.SetupWizardHostNonceFetcher.fetchNewNonce((function(e){_.retryLastRequest(e).then((function(e){s.authSuccess(e,t,n+=1,o)})).catch((function(e){s.authError(e,t),_.clearLastRequest(),o&&o(new Error("BADNONCE: failed retry"))}))})));break;case"SSO":this.reportEvent(t+"_success_sso_required"),e.email&&this.setEmail(e.email),this.trySSO(),this.changeScreen(r.SetupScreenTypes.SSO_CODE),o&&o(new Error("SSO"));break;case"TWOFACTOR":this.reportEvent(t+"_success_2fa_required"),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DIGITS,data:e.last_two_digits}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_EMAIL_2FA,data:e.is_email_2fa}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CHECKPOINT_TOKEN,data:e.checkpoint_token}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CURRENT_RECOVERY_METHOD,data:e.preferred_method}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_LINKED_DEVICES,data:e.linked_devices}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_RECOVERY_OPTIONS,data:e.recovery_options}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_BACKUP_PHONE_LAST_TWO_DIGITS,data:e.backup_last_two_digits}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CURRENT_USER,data:{user:e.current_user}}),i.Dispatcher.dispatch({type:r.SetupActionTypes.CHANGE_SCREEN,data:{screenType:r.SetupScreenTypes.TWO_FACTOR}}),o&&o(new Error("TWOFACTOR"));break;case"DEVICE_LIMIT_EXCEEDED":this.reportEvent(t+"_failure",{reason:e.message}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CURRENT_USER,data:{user:e.current_user}}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CURRENT_HOST,data:{id:e.current_host}}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DEVICE_LIMIT_NONCE,data:{deviceLimitNonce:e.device_limit_nonce}}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_SKU_CONTENT,data:{skuContent:e.sku_content}}),i.Dispatcher.dispatch({type:r.SetupActionTypes.CHANGE_SCREEN,data:{screenType:r.SetupScreenTypes.DEVICE_LIMIT_LANDING}}),o&&o(new Error("DEVICE_LIMIT_EXCEEDED"));break;case"ERROR":this.reportEvent(t+"_failure",{reason:e.message}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_GENERIC_ERROR,data:e.message}),o&&o(new Error("ERROR: "+e.message));break;case"OK":this.reportEvent(t+"_success"),l.default.currentScreenType()===r.SetupScreenTypes.DEVICE_LIMIT_COMPLETE&&(this.changeScreen(r.SetupScreenTypes.SIGN_IN),this.setDisabledState(!0)),e.is_fedramp_user&&this.setIsFedrampUser(!0),this.setIsTopmost(!1),d.SetupWizardLoginFinishedASync(e).then((function(e){return o&&o(null,e),s.on_success(e)})).catch((function(e){o&&o(e)})).finally((function(){s.setIsTopmost(!0)}));break;default:h.reportStack("Unknown status from link -  "+e.status,{tags:["setup_wizard"]}),this.setDisabledState(!1),E.Notify.error(y),o&&o(new Error("Unknown status from link -  "+e.status))}},e.prototype.setDeviceLimitNonce=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DEVICE_LIMIT_NONCE,data:{deviceLimitNonce:e}})},e.prototype.enterPreauthedFlow=function(){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PREAUTHED,data:!0}),this.pollUntil(d.SetupWizardPollForLink,this.on_success)},e.prototype.attemptDangerousErrorExtraction=function(e){if(!e.responseText)return{wasFieldError:!1,reason:String(e)};var t=e.responseText;if(0!==t.indexOf("err:"))return{wasFieldError:!1,reason:t};t=t.substr(4);var n={};try{n=JSON.parse(t)}catch(e){return"string"!=typeof t&&(t=y),{wasFieldError:!1,reason:t}}var o={},i=!1;for(var s in n)if(n.hasOwnProperty(s)){var r=n[s];r.message_text?(o[s]=r.message_text,i=!0):r.message_html&&(o[s]=r.message_html,i=!0)}return i?{wasFieldError:!0,fieldErrors:o}:{}},e.prototype.authError=function(e,t){var n=this.attemptDangerousErrorExtraction(e);n.wasFieldError&&n.fieldErrors?(i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_FIELD_ERRORS,data:n.fieldErrors}),this.logFieldErrors(n.fieldErrors,t)):(E.Notify.error(y),this.reportEvent(t+"_failure",{reason:n.reason||y})),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),_.clearLastRequest()},e.prototype.logFieldErrors=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];this.reportEvent(t+"_invalid_"+n,{reason:o})}},e.prototype.openSelSyncPrefs=function(e){var t=this;this.setIsTopmost(!1),this.reportEvent("done_panel_settings_sel_sync_opened");d.SetupWizardOpenSelSyncPrefsASync().then((function(n){return(!n||"PENDING"!==n.status)&&(e&&e(),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),t.setIsTopmost(!0),!0)}))},e.prototype.openChangeLocation=function(){var e=this;this.setIsTopmost(!1),this.reportEvent("done_panel_settings_change_location_opened");d.SetupWizardOpenLocationPrefsAsync2().then((function(t){(function(t){(!t||"PENDING"!==t.status)&&(t&&"OK"===t.status&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DROPBOX_PATH,data:t.path}),i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DISABLED_STATE,data:!1}),e.setIsTopmost(!0))})(t)}))},e.prototype.getClientInfoAndTag=function(){d.IsBridgeFunctionSupported("SetupWizard.GetClientInfoAndTag").then((function(e){e&&d.SetupWizardGetClientInfoAndTag((function(e){if(e.result.client_info&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CLIENT_INFO,data:e.result.client_info}),e.result.tag)return i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_TAG,data:e.result.tag})}))}))},e.prototype.getPlatform=function(){var e=d.GetPlatform();if(e)return i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PLATFORM,data:e})},e.prototype.getShouldShowInfiniteHardDowngradeMsg=function(e){d.IsBridgeFunctionSupported("SetupWizard.GetAndResetShowInfiniteHardDowngradeMsg").then((function(t){t&&d.SetupWizardGetAndResetShowInfiniteHardDowngradeMsg(e,(function(e){e.error||null==e.result.should_show||i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG,data:e.result.should_show})}))}))},e.prototype.maybeFetchDropboxPath=function(){l.default.dropboxPath()||d.IsBridgeFunctionSupported("SetupWizard.GetDropboxPath").then((function(e){e&&d.SetupWizardGetDropboxPath((function(e){!e.error&&e.result.path&&i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_DROPBOX_PATH,data:e.result.path})}))})).catch((function(){}))},e.prototype.setContentStartsOnlineOnly=function(e){d.IsBridgeFunctionSupported("SetupWizard.SetContentStartsOnlineOnly").then((function(t){t&&d.SetupWizardSetContentStartsOnlineOnly(e,(function(t){if(!t.error)return i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CONTENT_STARTS_ONLINE_ONLY,data:e})}))})).catch((function(){}))},e.prototype.pasteFromClipboard=function(){d.IsBridgeFunctionSupported("getClipboardText").then((function(e){e&&d.GetClipboardText((function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_CLIPBOARD_TEXT,data:e.result.text})}))})),this.reportEvent("sso_code_paste"),this.setIsTopmost(!0)},e.prototype.setIsTopmost=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_TOPMOST,data:e})},e.prototype.maybeLogUserJourneyEvent=function(e){l.default.onboardingType()===r.OnboardingTypes.USER_JOURNEY_SIGNUP&&this.reportEvent(e,{exp_variant:l.default.onboardingVariant()})},e.prototype.initializeCarousel=function(e){void 0===e&&(e=!1),i.Dispatcher.dispatch({type:r.SetupActionTypes.INITIALIZE_CAROUSEL,data:e})},e.prototype.setIsFedrampUser=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_IS_FEDRAMP_USER,data:e})},e.prototype.setEncryptionOptions=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_ENCRYPTION_OPTIONS,data:e})},e.prototype.setInitials=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_INITIALS,data:e})},e.prototype.setAccountPhotoUrl=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_ACCOUNT_PHOTO_URL,data:e})},e.prototype.setPlanText=function(e){i.Dispatcher.dispatch({type:r.SetupActionTypes.SET_PLAN_TEXT,data:e})},e})());t.default=m})),define("modules/clean/react/client/setup_wizard/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.ENSURE_CLIENT_CONNECTION=0]="ENSURE_CLIENT_CONNECTION",e[e.CHANGE_SCREEN=1]="CHANGE_SCREEN",e[e.INITIALIZE_CAROUSEL=2]="INITIALIZE_CAROUSEL",e[e.POP_POST_LINK_SCREEN=3]="POP_POST_LINK_SCREEN",e[e.PUSH_POST_LINK_SCREEN=4]="PUSH_POST_LINK_SCREEN",e[e.SET_DISABLED_STATE=5]="SET_DISABLED_STATE",e[e.SET_HOST_NONCE=6]="SET_HOST_NONCE",e[e.SET_SCRIPT_NONCE=7]="SET_SCRIPT_NONCE",e[e.SET_CAPTCHA_READY=8]="SET_CAPTCHA_READY",e[e.SET_CLIENT_INFO=9]="SET_CLIENT_INFO",e[e.SET_CURRENT_HOST=10]="SET_CURRENT_HOST",e[e.SET_CURRENT_USER=11]="SET_CURRENT_USER",e[e.SET_DEVICE_LIMIT_NONCE=12]="SET_DEVICE_LIMIT_NONCE",e[e.SET_TAG=13]="SET_TAG",e[e.SET_GOOGLE_SIGN_UP_DATA=14]="SET_GOOGLE_SIGN_UP_DATA",e[e.SET_IS_PRIMARY=15]="SET_IS_PRIMARY",e[e.SET_IS_PAIRING=16]="SET_IS_PAIRING",e[e.SET_HAS_SECONDARY=17]="SET_HAS_SECONDARY",e[e.SET_MULTI_DISABLED=18]="SET_MULTI_DISABLED",e[e.SET_IS_NEW_ACCOUNT=19]="SET_IS_NEW_ACCOUNT",e[e.SET_ROLE=20]="SET_ROLE",e[e.SET_TEAM=21]="SET_TEAM",e[e.SET_CONTENT_STARTS_ONLINE_ONLY=22]="SET_CONTENT_STARTS_ONLINE_ONLY",e[e.SET_INFINITE_EXPOSED=23]="SET_INFINITE_EXPOSED",e[e.SET_WILL_INSTALL_KEXT=24]="SET_WILL_INSTALL_KEXT",e[e.SET_IS_UNCONSENTED=25]="SET_IS_UNCONSENTED",e[e.SET_FILE_PROVIDER_ENABLED=26]="SET_FILE_PROVIDER_ENABLED",e[e.SET_DEAL_CODE=27]="SET_DEAL_CODE",e[e.SET_DROPBOX_PATH=28]="SET_DROPBOX_PATH",e[e.SET_EMAIL=29]="SET_EMAIL",e[e.SET_INITIALS=30]="SET_INITIALS",e[e.SET_ACCOUNT_PHOTO_URL=31]="SET_ACCOUNT_PHOTO_URL",e[e.SET_PLAN_TEXT=32]="SET_PLAN_TEXT",e[e.SET_NAME=33]="SET_NAME",e[e.SET_DIGITS=34]="SET_DIGITS",e[e.SET_IS_EMAIL_2FA=35]="SET_IS_EMAIL_2FA",e[e.SET_CHECKPOINT_TOKEN=36]="SET_CHECKPOINT_TOKEN",e[e.SET_PROVIDER_CHECKPOINT_TOKEN=37]="SET_PROVIDER_CHECKPOINT_TOKEN",e[e.SET_PROVIDER=38]="SET_PROVIDER",e[e.SET_CLIPBOARD_TEXT=39]="SET_CLIPBOARD_TEXT",e[e.SET_FIELD_ERRORS=40]="SET_FIELD_ERRORS",e[e.SET_FOLDER_RENAME=41]="SET_FOLDER_RENAME",e[e.SET_DISK_USAGE=42]="SET_DISK_USAGE",e[e.SET_ONBOARDING_INFO=43]="SET_ONBOARDING_INFO",e[e.SET_POST_LINK_FLAGS=44]="SET_POST_LINK_FLAGS",e[e.REMOVE_FIELD_ERROR=45]="REMOVE_FIELD_ERROR",e[e.CLEAR_FIELD_ERRORS=46]="CLEAR_FIELD_ERRORS",e[e.SET_GENERIC_ERROR=47]="SET_GENERIC_ERROR",e[e.CLEAR_GENERIC_ERROR=48]="CLEAR_GENERIC_ERROR",e[e.SET_SSO_STATE=49]="SET_SSO_STATE",e[e.SET_IS_TOPMOST=50]="SET_IS_TOPMOST",e[e.OPEN_DB_FOLDER=51]="OPEN_DB_FOLDER",e[e.LINK_SECONDARY=52]="LINK_SECONDARY",e[e.SET_PREAUTHED=53]="SET_PREAUTHED",e[e.SET_DEFAULT_ROOT_POLICY=54]="SET_DEFAULT_ROOT_POLICY",e[e.SET_ADMIN_DEFAULT_ROOT_POLICY=55]="SET_ADMIN_DEFAULT_ROOT_POLICY",e[e.SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG=56]="SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG",e[e.SIGN_OUT=57]="SIGN_OUT",e[e.SET_SKU_CONTENT=58]="SET_SKU_CONTENT",e[e.SET_CURRENT_RECOVERY_METHOD=59]="SET_CURRENT_RECOVERY_METHOD",e[e.SET_RECOVERY_OPTIONS=60]="SET_RECOVERY_OPTIONS",e[e.SET_LINKED_DEVICES=61]="SET_LINKED_DEVICES",e[e.SET_BACKUP_PHONE_LAST_TWO_DIGITS=62]="SET_BACKUP_PHONE_LAST_TWO_DIGITS",e[e.SET_SHOW_MOVE_DROPBOX=63]="SET_SHOW_MOVE_DROPBOX",e[e.SET_TFA_RECOVERY_TOKEN=64]="SET_TFA_RECOVERY_TOKEN",e[e.SET_TFA_BACKUP_CODE_INPUT_VALUE=65]="SET_TFA_BACKUP_CODE_INPUT_VALUE",e[e.SET_BACKUP_TEXT_SENT=66]="SET_BACKUP_TEXT_SENT",e[e.SET_BACKUP_PHONE_CODE_INPUT_VALUE=67]="SET_BACKUP_PHONE_CODE_INPUT_VALUE",e[e.SET_ACTIVE_BACKUP_BUTTON=68]="SET_ACTIVE_BACKUP_BUTTON",e[e.SET_PLATFORM=69]="SET_PLATFORM",e[e.SET_IS_FEDRAMP_USER=70]="SET_IS_FEDRAMP_USER",e[e.SET_ENCRYPTION_OPTIONS=71]="SET_ENCRYPTION_OPTIONS"})(t.SetupActionTypes||(t.SetupActionTypes={})),(function(e){e.LOCAL="LOCAL",e.ON_DEMAND="ON_DEMAND"})(t.INFINITE_ROOT_POLICY||(t.INFINITE_ROOT_POLICY={})),(function(e){e.ADMIN_DEFAULT="ADMIN_DEFAULT",e.LOCAL="LOCAL",e.ON_DEMAND="ON_DEMAND"})(t.INFINITE_ROOT_POLICY_CHOICE||(t.INFINITE_ROOT_POLICY_CHOICE={})),t.SetupScreenTypes={SIGN_IN:"SIGN_IN",SIGN_UP:"SIGN_UP",SSO_CODE:"SSO_CODE",TWO_FACTOR:"TWO_FACTOR",TWO_FACTOR_RECOVERY:"TWO_FACTOR_RECOVERY",RENAME:"RENAME",VERIFY:"VERIFY",LOW_DISK:"LOW_DISK",LARGE_DROPBOX:"LARGE_DROPBOX",DONE:"DONE",ADVANCED_SETTINGS:"ADVANCED_SETTINGS",INFINITE_SETTING:"INFINITE_SETTING",WAITING_FOR_PREAUTH_DICT:"WAITING_FOR_PREAUTH_DICT",SCALE_MITIGATION:"SCALE_MITIGATION",DEVICE_LIMIT_LANDING:"DEVICE_LIMIT_LANDING",DEVICE_LIMIT_MANAGE:"DEVICE_LIMIT_MANAGE",DEVICE_LIMIT_COMPLETE:"DEVICE_LIMIT_COMPLETE",LOADING:"LOADING",FEDRAMP_MESSAGE:"FEDRAMP_MESSAGE"},t.FieldValidationKeys={LOGIN_EMAIL:"login_email",LOGIN_PASSWORD:"login_password",LOGIN_GOOGLE:"login_google",LOGIN_APPLE:"login_apple",REGISTER_EMAIL:"register_email",REGISTER_PASSWORD:"register_password",REGISTER_NAME:"register_name",REGISTER_TERMS:"register_terms",TWO_FACTOR_CODE:"twofactor_code",TWO_FACTOR_BACKUP_CODE:"twofactor_backup_code",TWO_FACTOR_BACKUP_PHONE:"twofactor_backup_phone",SSO_CODE:"sso_link_code",VERIFY_PASSWORD:"verify_password",RECAPTCHA_RESPONSE:"recaptcha_response"},t.SSOStates={OFF:"OFF",OPTIONAL:"OPTIONAL",REQUIRED:"REQUIRED"},t.OnboardingTypes={ONBOARDING_SERVER_VIEW:"ONBOARDING_SERVER_VIEW",USER_JOURNEY_SIGNUP:"USER_JOURNEY_SIGNUP"},t.ALLOWED_REQUEST_RETRIES=2,t.SCALE_MITIGATION_THRESHOLD=5e5,t.LEGACY_SETUP_WIZARD_WIDTH=310,t.LEGACY_SETUP_WIZARD_HEIGHT=525,t.SETUP_WIZARD_CAROUSEL_WIDTH=800,t.SETUP_WIZARD_CAROUSEL_HEIGHT=520,t.DEVICE_LIMIT_VIEW_WIDTH=960,t.DEVICE_LIMIT_VIEW_HEIGHT=650,(function(e){e.BACKUP_PHONE_SUBMIT="two_factor_backup_phone_submit",e.RECOVERY_CODE_SUBMIT="two_factor_backup"})(t.ActiveButtons||(t.ActiveButtons={})),t.SCROLL_TO_CAPTCHA_DELAY=250})),define("modules/clean/react/client/setup_wizard/content",["require","exports","tslib","react","react-intl","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/roles","modules/core/i18n","modules/constants/trademark","modules/clean/profile_services/profile_services_constants","modules/clean/server_side_client_view_bridge"],(function(e,t,n,o,i,s,r,a,c,_,u){"use strict";function p(e,t){return e===r.PERSONAL?r.String(e):null!=t?t:""}var l;function d(e){var t,n;e===l.emailsDoNotMatch?(t="signin_apple_signin_emails_do_not_match",n="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_dt"):e===l.alreadyAuthorisedButNoMatchingAccount?(t="signin_apple_signin_not_authorized",n="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_authorized_help_dt"):(t="signin_apple_signin_help_generic_clicked",n="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_generic_help_dt"),u.SetupWizardReportEvent(t),u.OpenUncredentialedBrowserWithDropboxURL(n)}function h(){u.SetupWizardReportEvent("signin_apple_signin_error_clicked"),u.OpenUncredentialedBrowserWithDropboxURL("/individual/plans-comparison?_tk=sia_nomatch_plan_dt")}function f(e,n,i){switch(e){case l.incorrectEmail:return a.intl.formatMessage(t.Content.multiaccount_provider_error,{email:n});case l.emailsDoNotMatch:return a.intl.formatMessage({id:"ruXNAR",defaultMessage:"We couldn’t find a Dropbox account matching the email {responseemail}. <linkaccount> Sign up for a new account </linkaccount> or <linkhelpcenter> get help signing in </linkhelpcenter> to an existing account"},{responseemail:i,linkaccount:function(e){return o.default.createElement("button",{className:"button-as-link",onClick:h},e)},linkhelpcenter:function(t){return o.default.createElement("button",{className:"button-as-link",onClick:d.bind(e)},t)}});case l.deviceLimitExceeded:return a.intl.formatMessage({id:"GeMENn",defaultMessage:"You’ve reached the limit of computers allowed by your company. Ask your admin for help."});case l.appleLoginNotAllowedForTeam||l.userAlreadyInvitedToTeam:return a.intl.formatMessage({id:"A/96BB",defaultMessage:"{trademark_business} users can’t sign in with Apple. Please sign in with your email and password."},{trademark_business:c.TRADEMARK_BUSINESS});case l.enableTwofactorRequired:return a.intl.formatMessage({id:"qrJLL0",defaultMessage:"Your admin has required you to enable two-step verification. Please login to dropbox.com from a web browser to do so."});case l.alreadyAuthorisedButNoMatchingAccount:default:return a.intl.formatMessage({id:"5t5m0I",defaultMessage:"Sign in failed. If you’d like to sign in with Apple again, <link>see how in our help center</link>. You could also sign in with your Dropbox account email and password."},{link:function(t){return o.default.createElement("button",{className:"button-as-link",onClick:d.bind(e)},t)}})}}function E(e,n,o){return"access_denied"===e?a.intl.formatMessage({id:"Vat0lJ",defaultMessage:"Please accept Google’s request in order to sign in."}):"emails_do_not_match"===e?a.intl.formatMessage({id:"9ZZYrU",defaultMessage:"We couldn’t find a Dropbox account matching that email."}):"incorrect_email"===e?a.intl.formatMessage(t.Content.multiaccount_provider_error,{email:n}):"google_login_not_allowed"===e?a.intl.formatMessage({id:"17E7x9",defaultMessage:"Your admin has disabled Google sign in. Use your email and password to sign in."}):"device_limit_exceeded"===e?a.intl.formatMessage({id:"GeMENn",defaultMessage:"You’ve reached the limit of computers allowed by your company. Ask your admin for help."}):"tos_required"===e?a.intl.formatMessage({id:"jpM7HQ",defaultMessage:"You’ll need to sign in on your computer before you can use this device."}):"email_not_verified"===e?a.intl.formatMessage({id:"S6RuBm",defaultMessage:"Before you can sign in, you’ll need to verify your account with Google {email}"},{email:o}):e===l.enableTwofactorRequired?a.intl.formatMessage({id:"qrJLL0",defaultMessage:"Your admin has required you to enable two-step verification. Please login to dropbox.com from a web browser to do so."}):a.intl.formatMessage({id:"WmoQCS",defaultMessage:"Unable to sign in with Google."})}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),u=n.__importStar(u),t.Content={toc_header:a.intl.formatMessage({id:"iM/K8p",defaultMessage:"Show me how to..."}),email_placeholder:a.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}),password_placeholder:a.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}),name_placeholder:a.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"}),sign_in_title_carousel:a.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"}),or_sign_in:a.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"}),or_sign_in_carousel:i.defineMessage({id:"YyR23e",defaultMessage:"or <link>Sign in</link>"}),or_sign_up:a.intl.formatMessage({id:"C4FJfI",defaultMessage:"Sign up"}),or_sign_up_carousel:i.defineMessage({id:"32pYJ5",defaultMessage:"or <link>Sign up</link>"}),sign_in_button:a.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"}),sign_up_button:a.intl.formatMessage({id:"C4FJfI",defaultMessage:"Sign up"}),terms:i.defineMessage({id:"gkEuQo",defaultMessage:"I agree to the <link>terms and conditions</link>"}),need_help:a.intl.formatMessage({id:"TCn38D",defaultMessage:"Forgot password?"}),log_in_with_google_button:a.intl.formatMessage({id:"SgtygT",defaultMessage:"Sign in with Google"}),log_in_with_apple_button:a.intl.formatMessage({id:"pTMcB4",defaultMessage:"Sign in with Apple"}),or:a.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}),google_signup_message:i.defineMessage({id:"rs4C4L",defaultMessage:"We couldn’t find a Dropbox account for <b>{email}</b>. Would you like to create one?"}),multiaccount_sign_in_body:i.defineMessage({id:"uDhMax",defaultMessage:"Sign in to your {label} Dropbox"}),secondary_label_personal:a.intl.formatMessage({id:"NfzmC+",defaultMessage:"personal"}),secondary_label_team:a.intl.formatMessage({id:"SDQykS",defaultMessage:"team"}),secondary_label_placeholder:a.intl.formatMessage({id:"HEEzOS",defaultMessage:"other"}),email_taken:i.defineMessage({id:"HWM6Uw",defaultMessage:"This e-mail is already taken. <login>Sign in</login> or <forgot>reset your password</forgot>"}),sso_continue_button:a.intl.formatMessage({id:"EhXC4d",defaultMessage:"Get your link code"}),sso_code_title:a.intl.formatMessage({id:"PWwIFP",defaultMessage:"Single sign-on"}),sso_code_body:a.intl.formatMessage({id:"yTw3JQ",defaultMessage:"Enter your link code below"}),sso_code_paste_button:a.intl.formatMessage({id:"2ySDAA",defaultMessage:"Paste"}),sso_code_submit_button:a.intl.formatMessage({id:"Laz2WV",defaultMessage:"Submit"}),sso_code_placeholder:a.intl.formatMessage({id:"2hKYsA",defaultMessage:"Link code"}),sso_opt_credentials:i.defineMessage({id:"N3BbNY",defaultMessage:"or <link>Log in with Dropbox credentials</link>"}),sso_opt_out_carousel:a.intl.formatMessage({id:"uaZcVT",defaultMessage:"or Log in with Dropbox credentials"}),sso_enabled:a.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"}),two_factor_title:a.intl.formatMessage({id:"8A5tqO",defaultMessage:"Enter your security code"}),two_factor_email_body:i.defineMessage({id:"X/rSyR",defaultMessage:"To link your computer, you need to enter a security code. We sent a code to your email address at {email}."}),two_factor_phone_body:i.defineMessage({id:"alXh/W",defaultMessage:"To link your computer, you need to enter a security code. We sent the code to your phone number ending in {digits}."}),two_factor_authenticator_body:a.intl.formatMessage({id:"7oxXPt",defaultMessage:"To link your computer, you need to enter a security code. Enter the security code generated by your mobile authenticator app."}),two_factor_placeholder:a.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),two_factor_submit_button:a.intl.formatMessage({id:"Mq770g",defaultMessage:"Submit code"}),two_factor_resend_button:a.intl.formatMessage({id:"pjvZAD",defaultMessage:"Send new code"}),two_factor_resend_sent:a.intl.formatMessage({id:"vdqTup",defaultMessage:"We sent you a code. It may take a few minutes to arrive."}),two_factor_lost_phone:a.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}),two_factor_other_options:a.intl.formatMessage({id:"0bpB4G",defaultMessage:"Other options:"}),two_factor_push_recovery:a.intl.formatMessage({id:"GmgQyg",defaultMessage:"Sign in with a notification"}),two_factor_push_recovery_btn:a.intl.formatMessage({id:"EjL/IJ",defaultMessage:"Send me a notification"}),two_factor_push_recovery_link_name:a.intl.formatMessage({id:"xs2ao2",defaultMessage:"Send a notification to my devices"}),two_factor_backup_recovery:a.intl.formatMessage({id:"dR0QoK",defaultMessage:"Sign in with a backup phone"}),two_factor_backup_recovery_btn:a.intl.formatMessage({id:"IpS5u7",defaultMessage:"Text my backup phone"}),two_factor_backup_recovery_desc:i.defineMessage({id:"gddUAB",defaultMessage:"If you lose your phone, we can text a code to your backup phone number ending in <b>**{phone_last_two}</b>."}),two_factor_backup_recovery_enter_code:a.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"}),two_factor_backup_recovery_link_name:a.intl.formatMessage({id:"IpS5u7",defaultMessage:"Text my backup phone"}),two_factor_backup_recovery_resend_button:a.intl.formatMessage({id:"B4gFdK",defaultMessage:"Resend"}),two_factor_backup_recovery_resend_code:a.intl.formatMessage({id:"zIWsYe",defaultMessage:"Resend code"}),two_factor_backup_recovery_sent_code:i.defineMessage({id:"/0Bej7",defaultMessage:"We sent a code to your phone number ending in <b>**{phone_last_two}</b>."}),two_factor_code_recovery:a.intl.formatMessage({id:"+Jy1/e",defaultMessage:"Sign in with a backup code"}),two_factor_code_recovery_desc:a.intl.formatMessage({id:"f/DnCL",defaultMessage:"If you’re locked out of your account, you can sign in by entering one of your emergency backup codes."}),two_factor_code_recovery_link_name:a.intl.formatMessage({id:"+FVlAv",defaultMessage:"Enter emergency backup code"}),two_factor_code_recovery_placeholder:a.intl.formatMessage({id:"2G4Vro",defaultMessage:"8-digit code"}),two_factor_recovery_need_more_help:a.intl.formatMessage({id:"DUbjsQ",defaultMessage:"I need more help"}),verify_title:a.intl.formatMessage({id:"IeqqoW",defaultMessage:"Verify your account"}),verify_message:i.defineMessage({id:"t+M+VP",defaultMessage:"An account with the email address <b>{email}</b> already exists, but is not verified. Enter your existing Dropbox password to sign in."}),kext_congratulations:a.intl.formatMessage({id:"S55F+L",defaultMessage:"You’re almost finished"}),kext_will_install:a.intl.formatMessage({id:"pIGUaD",defaultMessage:"Just a couple more steps to set up Smart Sync, and you’ll be ready to use Dropbox."}),kext_continue:a.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}),unconsented_done_header:a.intl.formatMessage({id:"S55F+L",defaultMessage:"You’re almost finished"}),unconsented_done_body:a.intl.formatMessage({id:"vUtWh+",defaultMessage:"Dropbox was successfully installed, but won’t be able to store files until you grant permission."}),unconsented_done_button:a.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}),congratulations:a.intl.formatMessage({id:"NrJSjr",defaultMessage:"Congratulations!"}),congratulations_carousel:i.defineMessage({id:"Ftkrln",defaultMessage:"Well done!{br}Dropbox installed"}),pairing_congratulations_carousel:i.defineMessage({id:"M1ui/4",defaultMessage:"Done!{br}Account added to this computer"}),success_text:a.intl.formatMessage({id:"meRhZz",defaultMessage:"Dropbox was successfully installed."}),success_text_carousel:a.intl.formatMessage({id:"J/0Ckc",defaultMessage:"Now that you have Dropbox, get to know what it has to offer."}),pairing_success_text_carousel1:a.intl.formatMessage({id:"yGD3o1",defaultMessage:"You can remove either account from this computer in your app Preferences."}),pairing_success_text_carousel2:a.intl.formatMessage({id:"QSmx0y",defaultMessage:"Go to Settings on dropbox.com to unlink these accounts everywhere."}),onboarding_for_teams_success_text:a.intl.formatMessage({id:"meRhZz",defaultMessage:"Dropbox was successfully installed."}),open_user_journey_signup:a.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}),open_onboarding_server_view:a.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),open_onboarding_for_teams_server_view:a.intl.formatMessage({id:"kOQNUE",defaultMessage:"Get started"}),multiaccount_congratulations:a.intl.formatMessage({id:"NrJSjr",defaultMessage:"Congratulations!"}),multiaccount_congratulations_carousel:i.defineMessage({id:"Ftkrln",defaultMessage:"Well done!{br}Dropbox installed"}),multiaccount_success_text_legacy:i.defineMessage({id:"3lo4HE",defaultMessage:"Your {primary_label} Dropbox was successfully installed. Now you can add your {secondary_label} Dropbox."}),multiaccount_success_text_personal:i.defineMessage({id:"Tyi6tl",defaultMessage:"Your personal Dropbox was successfully installed. Now you can add your {secondary_label} Dropbox."}),multiaccount_success_text_work:i.defineMessage({id:"ZgSz4H",defaultMessage:"Your {primary_label} Dropbox was successfully installed. Now you can add your personal Dropbox."}),multiaccount_link_button_legacy:i.defineMessage({id:"3tGPpn",defaultMessage:"Now add your {secondary_role_label} Dropbox"}),multiaccount_link_button_personal:a.intl.formatMessage({id:"NtKu8x",defaultMessage:"Now add your personal Dropbox"}),multiaccount_link_button_work:a.intl.formatMessage({id:"mnP38t",defaultMessage:"Now add your team Dropbox"}),multiaccount_disabled_text:i.defineMessage({id:"+lFU/m",defaultMessage:"Linking both of your accounts on this computer has been disabled by your {team_label} administrator"}),multiaccount_skip:a.intl.formatMessage({id:"bvY807",defaultMessage:"Skip this"}),multiaccount_settings_done:a.intl.formatMessage({id:"6bRQ0U",defaultMessage:"Done"}),multiaccount_provider_error:i.defineMessage({id:"mCoSKq",defaultMessage:"Please log in with your paired account, {email}"}),advanced_settings:a.intl.formatMessage({id:"Lou/OW",defaultMessage:"Advanced settings"}),dropbox_location_title:a.intl.formatMessage({id:"ohhbvQ",defaultMessage:"Dropbox Location"}),dropbox_location_description:a.intl.formatMessage({id:"Di+hvL",defaultMessage:"Select a location for your Dropbox folder"}),dropbox_location_other:a.intl.formatMessage({id:"Xjl1kv",defaultMessage:"Other..."}),selective_sync_title:a.intl.formatMessage({id:"YyNrxO",defaultMessage:"Selective Sync"}),selective_sync_description:a.intl.formatMessage({id:"w0Mucm",defaultMessage:"Select folders to sync to your computer"}),selective_sync_button:a.intl.formatMessage({id:"WKcSo6",defaultMessage:"Change settings..."}),infinite_title:a.intl.formatMessage({id:"Awpyvm",defaultMessage:"Smart Sync"}),infinite_description:a.intl.formatMessage({id:"Hgzy7O",defaultMessage:"All content starts online-only"}),infinite_hard_optout_msg:a.intl.formatMessage({id:"mWWQev",defaultMessage:"The Dropbox system extension has been turned off. Please sign in again."}),no_settings_description:a.intl.formatMessage({id:"ehm23q",defaultMessage:"No options available"}),large_dropbox_description:i.defineMessage({id:"GY5th8",defaultMessage:"Would you like to sync everything in your {label} Dropbox ({need_gigs} GB) to this computer?"}),disk_space_description:i.defineMessage({id:"0gZYzZ",defaultMessage:"Your {label} Dropbox ({need_gigs} GB) is too large to fit on this computer ({free_gigs} GB available)"}),choose_folders_button:a.intl.formatMessage({id:"Y8cVgK",defaultMessage:"Choose folders to sync"}),or_divider:a.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}),sync_everything_button:a.intl.formatMessage({id:"6AoXUC",defaultMessage:"Sync everything"}),rename:a.intl.formatMessage({id:"OCb7Mh",defaultMessage:"We need to rename your Dropbox folder"}),rename_description:i.defineMessage({id:"J0fQfy",defaultMessage:"“{old_name}” will become “{new_name}”. Your shortcuts and favorites should continue to work."}),rename_button:a.intl.formatMessage({id:"0/TLiY",defaultMessage:"Rename"}),error:a.intl.formatMessage({id:"c2rsJa",defaultMessage:"An error has occurred"}),error_try_again:a.intl.formatMessage({id:"zWD3IR",defaultMessage:"An error has occured. Please try again."}),error_start_over:a.intl.formatMessage({id:"Ud2R3J",defaultMessage:"Start over"}),back_button:a.intl.formatMessage({id:"oMWVkR",defaultMessage:"Back"}),mountain_title:a.intl.formatMessage({id:"yDmb9Z",defaultMessage:"Sync your existing files?"}),mountain_subtitle:a.intl.formatMessage({id:"gcrDHz",defaultMessage:"We can sync your Desktop & Documents to Dropbox so that you can access them from other devices."}),mountain_sync_button:a.intl.formatMessage({id:"c/APXo",defaultMessage:"Sync Desktop and Documents"}),mountain_skip_link:a.intl.formatMessage({id:"PaR0U3",defaultMessage:"Skip"}),audio_captcha:a.intl.formatMessage({id:"UcTa6V",defaultMessage:"Note: When using the audio CAPTCHA, please use the Download button instead of the Play button."}),infinite_learn_more:a.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}),infinite_setting_title:a.intl.formatMessage({id:"kwG+lC",defaultMessage:"How should your files sync?"}),infinite_setting_title_preauthed:a.intl.formatMessage({id:"kwG+lC",defaultMessage:"How should your files sync?"}),infinite_setting_title_carousel:a.intl.formatMessage({id:"72eFzo",defaultMessage:"How do you want files stored?"}),continue_button:a.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}),infinite_setting_description:a.intl.formatMessage({id:"qix+X+",defaultMessage:"With Smart Sync, online-only files save hard drive space and are ready when you need them. Local files are downloaded to your hard drive and always available."}),infinite_setting_description_carousel:a.intl.formatMessage({id:"dW5h7w",defaultMessage:"With Smart Sync, online-only files save hard drive space, and you can browse them from your desktop. Local files are downloaded and available offline."}),infinite_admin_setting:a.intl.formatMessage({id:"fshp9E",defaultMessage:"Let my admin manage this setting"}),infinite_setting_local:a.intl.formatMessage({id:"3JnVTZ",defaultMessage:"Local"}),infinite_setting_on_demand:a.intl.formatMessage({id:"p6SPzn",defaultMessage:"Online-only"}),infinite_setting_on_demand_recommended:a.intl.formatMessage({id:"38TMU/",defaultMessage:"Online-only (recommended)"}),infinite_setting_on_demand_carousel:a.intl.formatMessage({id:"mDs8EZ",defaultMessage:"Online only (recommended)"}),infinite_setting_large_dropbox:a.intl.formatMessage({id:"u5UFHt",defaultMessage:"You have a large Dropbox. We recommend choosing online-only."}),infinite_setting_low_disk:a.intl.formatMessage({id:"u+tHhA",defaultMessage:"Not enough hard drive space. Choose online-only."}),infinite_scale_msg:i.defineMessage({id:"EDsCCo",defaultMessage:"Your Dropbox account has over {max_files, number} files. Syncing that many files at once will take a long time. We recommend you sync only the folders you need right now."}),infinite_scale_carousel_header:i.defineMessage({id:"NmWNM0",defaultMessage:"Your Dropbox account has over {max_files, number} files."}),infinite_scale_carousel_body:a.intl.formatMessage({id:"3hrEdL",defaultMessage:"Syncing that many files at once will take a long time. We recommend you sync only the folders you need right now."}),infinite_setting_next_carousel:a.intl.formatMessage({id:"vJgZg+",defaultMessage:"Next"}),infinite_setting_help_carousel:a.intl.formatMessage({id:"lj4pan",defaultMessage:"How Smart Sync works"}),fedramp_message_header:a.intl.formatMessage({id:"ZZPag5",defaultMessage:"Accessing government data"}),fedramp_message_body:a.intl.formatMessage({id:"dBUsOH",defaultMessage:"While you’re using Dropbox, what you do will be recorded and could be reviewed. More importantly, there could be criminal and civil penalties if you use anything in an unauthorized way. By continuing, you’re agreeing to these conditions."})},t.renderAccountLabel=p,t.renderMultiaccountString=function(e,n,o){var i=r.Flip(n),s=t.Content[e];return"string"==typeof s?s:a.intl.formatMessage(s,{primary_label:p(n,o),secondary_label:p(i,o),secondary_role_label:r.String(i),team_label:o})},(function(e){e.incorrectEmail="incorrect_email",e.deviceLimitExceeded="device_limit_exceeded",e.appleLoginNotAllowedForTeam="apple_login_not_allowed_for_teams",e.userAlreadyInvitedToTeam="user_already_invited_to_team",e.alreadyAuthorisedButNoMatchingAccount="no_email_in_response",e.emailsDoNotMatch="emails_do_not_match",e.enableTwofactorRequired="enable_twofactor_required"})(l=t.ErrorMessageType||(t.ErrorMessageType={})),t.getAppleAuthErrorString=f,t.getProviderAuthErrorString=function(e,t,n,o){return o===_.ServiceResponseType.APPLE?f(e,t,n):E(e,t,n)},t.getGoogleAuthErrorString=E,t.getDoneBodyText=function(e,n){return void 0===n&&(n=!1),n?t.Content.success_text_carousel:t.Content.success_text},t.getDoneButtonText=function(e){return e===s.OnboardingTypes.USER_JOURNEY_SIGNUP?t.Content.open_user_journey_signup:t.Content.open_onboarding_server_view},t.getScaleMitigationText=function(){return a.intl.formatMessage(t.Content.infinite_scale_msg,{max_files:s.SCALE_MITIGATION_THRESHOLD})},t.getScaleMitigationCarouselHeaderText=function(){return a.intl.formatMessage(t.Content.infinite_scale_carousel_header,{max_files:s.SCALE_MITIGATION_THRESHOLD})}})),define("modules/clean/react/client/setup_wizard/roles",["require","exports","modules/core/i18n"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL=1,t.WORK=2,t.STRINGS={1:n.intl.formatMessage({id:"h4vreR",defaultMessage:"personal"}),2:n.intl.formatMessage({id:"GREGY1",defaultMessage:"work"})},t.Flip=function(e){switch(e){case t.PERSONAL:return t.WORK;case t.WORK:return t.PERSONAL;default:return-1}},t.String=function(e){return t.STRINGS[e]}})),define("modules/clean/react/client/setup_wizard/server",["require","exports","modules/clean/react/client/services","modules/clean/api_v2/noauth_client","modules/clean/profile_services/profile_services_constants"],(function(e,t,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=null;function r(e,t){return s={url:e,data:t},n.request({url:e,data:t})}t.tryDeviceLimitPreauth=function(e,t,n,o){return r("/ajax_client_sw_preauth",{preauth_nonce:e,host_nonce:t,client_info:n,tag:o})},t.trySignIn=function(e,t,n,o,s,a,c,_){var u={login_email:e,login_password:t,host_nonce:n,client_info:o,tag:s};return void 0!==a&&(c===i.ServiceResponseType.APPLE?u.apple_checkpoint_token=a:u.google_checkpoint_token=a),void 0!==_&&(u.is_pairing=_),r("/ajax_client_link",u)},t.trySignUp=function(e,t,n,o,i,s,a,c,_,u){var p={register_fname:e,register_lname:t,register_email:n,register_password:o,register_terms:i,host_nonce:s,client_info:a,tag:c};return void 0!==u&&(p.recaptcha_v2_response=u),_.isGoogleSignUp&&(p.email_sig=_.emailSig,p.refresh_token=_.refreshToken),r("/ajax_client_register",p)},t.try2faSignIn=function(e,t,n,o,i,s,a,c){void 0===s&&(s=!1),void 0===a&&(a=!1),void 0===c&&(c=!1);var _={checkpoint_token:e,twofactor_code:t,host_nonce:n,client_info:o,tag:i};return s&&(_.is_backup_code=!0),a&&(_.is_backup_sms_code=!0),c&&(_.is_pairing=!0),r("/ajax_client_login_2fa",_)},t.trySendPushNotification=function(e){return(new o.NoAuthApiV2Client).ns("two_factor_auth").rpc("two_factor/recovery/send_push",{checkpoint_token:e},{})},t.tryTextBackup=function(e){return(new o.NoAuthApiV2Client).ns("two_factor_auth").rpc("two_factor/recovery/text_backup",{checkpoint_token:e},{})},t.tryResendBackup=function(e){return(new o.NoAuthApiV2Client).ns("two_factor_auth").rpc("two_factor/recovery/resend_backup",{checkpoint_token:e},{})},t.trySSOSignIn=function(e,t,n,o,i){return r("/ajax_client_login_sso",{sso_email:e,sso_link_code:t,host_nonce:n,client_info:o,tag:i})},t.resendTwoFactor=function(e){return n.request({url:"/client_resend_twofactor",data:{checkpoint_token:e}})},t.tryNeedsSignupCaptcha=function(e){return n.request({url:"/ajax_client_needs_signup_captcha",data:{email:e}})},t.getGoogleAuthBoltToken=function(e){return n.request({url:"/profile_services/get_google_auth_bolt_token",dataType:"json",data:{host_nonce:e}})},t.requestAndSave=r,t.retryLastRequest=function(e){return null!=s?(null!=s.data&&(s.data.host_nonce=e),r(s.url,s.data)):new Promise((function(e,t){return t("no previous request")}))},t.clearLastRequest=function(){s=null}})),define("modules/clean/react/client/setup_wizard/services",["require","exports","tslib","modules/clean/bolt","modules/clean/flux/dispatcher","modules/clean/react/client/setup_wizard/constants","modules/clean/server_side_client_view_bridge","modules/core/exception"],(function(e,t,n,o,i,s,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importStar(r);var c=(function(){function e(){}return e.start=function(){var t=this;null==e._interval_id&&r.IsBridgeFunctionSupported("SetupWizard.FetchNewNonce").then((function(e){e&&(t.fetchNewNonce(),t._interval_id=setInterval((function(){t.fetchNewNonce()}),t.REFRESH_INTERVAL))})).catch((function(e){a.reportStack("Error in response from ClientBridge.IsBridgeFunctionSupported - "+e,{tags:["setup_wizard"]})}))},e.stop=function(){null!=this._interval_id&&(clearInterval(this._interval_id),this._interval_id=null)},e.fetchNewNonce=function(e){r.SetupWizardFetchNewNonce().then((function(t){i.Dispatcher.dispatch({type:s.SetupActionTypes.SET_HOST_NONCE,data:t}),void 0!==e&&e(t)})).catch((function(e){a.reportStack("Error in response from ClientBridge.SetupWizardFetchNewNonce - "+e,{tags:["setup_wizard"]})}))},e.REFRESH_INTERVAL=36e5,e._interval_id=null,e})();t.SetupWizardHostNonceFetcher=c;var _=(function(){function e(){}return e.subscribe=function(e,t,n){null==this.client&&(this.client=new o.ThunderClient(e,t,n),this.client.start())},e.unsubscribe=function(){null!=this.client&&this.client.unsubscribe(),this.client=null},e.client=null,e})();t.SetupBoltClient=_})),define("modules/clean/react/client/setup_wizard/setup_validators",["require","exports","tslib","modules/clean/react/client/setup_wizard/constants","modules/clean/validators/email_validator","modules/clean/validators/input_validator","modules/clean/validators/password_validator","modules/core/i18n"],(function(e,t,n,o,i,s,r,a){"use strict";function c(e){var t=s.default.groupValidationResults(e),n={valid:t.valid,errors:{}};for(var o in t.validation_result)if(t.validation_result.hasOwnProperty(o)){for(var i=t.validation_result[o],r=null,a=0,c=i.result.length;a<c;a++){var _=i.result[a];if(!_.valid){r=_.message;break}}null!=r&&(n.errors[o]=r)}return n}Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),s=n.__importDefault(s),r=n.__importDefault(r),t.validateSignInForm=function(e,t){var n={};return n[o.FieldValidationKeys.LOGIN_EMAIL]=i.default.validate(e),n[o.FieldValidationKeys.LOGIN_PASSWORD]=r.default.validate(t),c(n)},t.TOS_MESSAGE=a.intl.formatMessage({id:"yw3Lbd",defaultMessage:"Please agree to the terms of service"}),t.EMPTY_NAME_MESSAGE=a.intl.formatMessage({id:"GlyhO1",defaultMessage:"Please enter your name"});var _=s.default.composeValidators([[t.TOS_MESSAGE,s.default.trueValidator()]]),u=s.default.composeValidators([[t.EMPTY_NAME_MESSAGE,s.default.notEmptyValidator()]]);t.validateSignUpForm=function(e,t,n,s){var a={};return a[o.FieldValidationKeys.REGISTER_NAME]=u(e),a[o.FieldValidationKeys.REGISTER_EMAIL]=i.default.validate(t),a[o.FieldValidationKeys.REGISTER_PASSWORD]=r.default.validate(n),a[o.FieldValidationKeys.REGISTER_TERMS]=_(s),c(a)},t.WRONG_NUM_CHARS_MESSAGE=a.intl.formatMessage({id:"VOwTOw",defaultMessage:"Invalid two factor code"}),t.EXPECTED_2FA_CODE_LEN=6;var p=s.default.composeValidators([[t.WRONG_NUM_CHARS_MESSAGE,s.default.minLengthValidator(t.EXPECTED_2FA_CODE_LEN)],[t.WRONG_NUM_CHARS_MESSAGE,s.default.maxLengthValidator(t.EXPECTED_2FA_CODE_LEN)]]);t.validateTwoFactorForm=function(e){var t={};return t[o.FieldValidationKeys.TWO_FACTOR_CODE]=p(e),c(t)},t.validateTFABackupPhoneForm=function(e){var t={};return t[o.FieldValidationKeys.TWO_FACTOR_BACKUP_PHONE]=p(e),c(t)},t.WRONG_NUM_CHARS_MESSAGE_BACKUP=a.intl.formatMessage({id:"sdndqE",defaultMessage:"Invalid backup code"}),t.EXPECTED_2FA_RECOVERY_CODE_LEN=8;var l=s.default.composeValidators([[t.WRONG_NUM_CHARS_MESSAGE_BACKUP,s.default.minLengthValidator(t.EXPECTED_2FA_RECOVERY_CODE_LEN)],[t.WRONG_NUM_CHARS_MESSAGE_BACKUP,s.default.maxLengthValidator(t.EXPECTED_2FA_RECOVERY_CODE_LEN)]]);t.validateTFABackupCodeForm=function(e){var t={};return t[o.FieldValidationKeys.TWO_FACTOR_BACKUP_CODE]=l(e),c(t)},t.INVALID_CODE_MESSAGE=a.intl.formatMessage({id:"oM4CwI",defaultMessage:"This link code is invalid. Please try again."});var d=s.default.composeValidators([[t.INVALID_CODE_MESSAGE,s.default.notEmptyValidator()]]);t.validateSSOCodeForm=function(e){var t={};return t[o.FieldValidationKeys.SSO_CODE]=d(e),c(t)},t.validateVerifyForm=function(e){var t={};return t[o.FieldValidationKeys.VERIFY_PASSWORD]=r.default.validate(e),c(t)}})),define("modules/clean/react/client/setup_wizard/setup_wizard",["require","exports","tslib","react","modules/clean/react/css","modules/constants/login_and_register","modules/clean/react/client/setup_wizard/actions","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/services","modules/clean/react/client/setup_wizard/store","modules/clean/react/client/setup_wizard/shared_components","modules/clean/react/client/setup_wizard/setup_wizard_carousel_view"],(function(e,t,n,o,i,s,r,a,c,_,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),s=n.__importStar(s),r=n.__importDefault(r),_=n.__importDefault(_);var l=(function(e){function t(t){var n=e.call(this,t)||this;return n.displayName="SetupWizardController",n.state={currentScreenType:n.getInitialScreenType()},n}return n.__extends(t,e),t.prototype.getStateFromStores=function(){return{currentScreenType:_.default.currentScreenType(),currentRecoveryMethod:_.default.currentRecoveryMethod()}},t.prototype.getInitialScreenType=function(){return this.props.preauthed?a.SetupScreenTypes.WAITING_FOR_PREAUTH_DICT:this.props.device_limit_sw_nonce?a.SetupScreenTypes.LOADING:this.props.first_panel?this.props.first_panel:a.SetupScreenTypes.SIGN_IN},t.prototype.UNSAFE_componentWillMount=function(){r.default.setIsPrimary(this.props.primary),r.default.setIsPairing(this.props.pairing),r.default.setEmail(this.props.email),r.default.setInitials(this.props.initials),r.default.setAccountPhotoUrl(this.props.account_photo_url),r.default.setPlanText(this.props.plan_text),r.default.initializeCarousel(this.props.show_carousel),r.default.changeScreen(this.state.currentScreenType),r.default.setTeam(this.props.team),r.default.setRole(this.props.role),r.default.setScriptNonce(this.props.script_nonce),r.default.setCaptchaReady(!1),r.default.setEncryptionOptions(this.props.encryption_options)},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),r.default.reportEvent("setup_view_loaded",{google_login_desktop_variant:s.GOOGLE_LOGIN_DESKTOP,apple_login_desktop_variant:s.APPLE_LOGIN_DESKTOP,first_panel:this.state.currentScreenType}),r.default.setHostNonce(this.props.host_nonce),r.default.ensureClientConnection(),c.SetupWizardHostNonceFetcher.start(),r.default.getClientInfoAndTag(),r.default.getPlatform(),this.state.currentScreenType===a.SetupScreenTypes.DONE&&r.default.maybeFetchDropboxPath(),r.default.setIsTopmost(!0),this.state.currentScreenType===a.SetupScreenTypes.WAITING_FOR_PREAUTH_DICT&&r.default.enterPreauthedFlow(),this.props.device_limit_sw_nonce&&(r.default.setDeviceLimitNonce(this.props.device_limit_sw_nonce),r.default.tryDeviceLimitPreauth()),this.state.currentScreenType===a.SetupScreenTypes.SIGN_IN&&r.default.getShouldShowInfiniteHardDowngradeMsg(this.props.primary)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),c.SetupWizardHostNonceFetcher.stop()},t.prototype.render=function(){return o.default.createElement(p.SetupWizardCarousel,{screenType:this.state.currentScreenType,recoveryMethod:this.state.currentRecoveryMethod})},t})(u.SetupStoreComponent);t.SetupWizardController=l;var d=i.requireCssWithComponent(l,["/static/css/legacy_packages/components-vflhqG2jM.css","/static/css/components/button-vfllw60O5.css","/static/css/third_party_auth-vfleTp-5K.css","/static/css/client/setup/setup_wizard-vflU1wlkH.css"]);t.default=d})),define("modules/clean/react/client/setup_wizard/space_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLargeDropbox=function(e){return e>10737418240},t.isLowDiskSpace=function(e,t,n){return e-t<Math.min(.1*n,524288e3)}})),define("modules/clean/react/client/setup_wizard/store",["require","exports","tslib","modules/core/browser","modules/clean/flux/base_store","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/space_util","modules/clean/server_side_client_view_bridge","modules/clean/react/client/view_management"],(function(e,t,n,o,i,s,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importStar(r),a=n.__importStar(a);var _=(function(e){function t(){var t=e.call(this)||this;return t._init(),t}return n.__extends(t,e),t.prototype._init=function(){this._currentScreenType=s.SetupScreenTypes.SIGN_IN,this._currentScreenWidth=s.SETUP_WIZARD_CAROUSEL_WIDTH,this._currentScreenHeight=s.SETUP_WIZARD_CAROUSEL_HEIGHT,this._contentStartsOnlineOnly=!1,this._infiniteExposed=!1,this._willInstallKext=!1,this._isUnconsented=!1,this._fileProviderEnabled=!1,this._isPrimary=!0,this._isPairing=!1,this._hasSecondary=!1,this._fieldErrors={},this._provider=void 0,this._providerCheckpointToken=void 0,this._ssoState=s.SSOStates.OFF,this._isTopmost=!1,this._googleSignupData={isGoogleSignUp:!1,emailSig:void 0,refreshToken:void 0},this._isNewAccount=!1,this._disabledState=!1,this._diskUsageIsSet=!1,this._preauthed=!1,this._postLinkScreens=[],this._defaultRootPolicy=s.INFINITE_ROOT_POLICY_CHOICE.LOCAL,this._adminDefaultRootPolicy=null,this._showInfiniteHardDowngradeMsg=!1,this._currentHost=null,this._currentUser=null,this._deviceLimitNonce=null,this._skuContent=null,this._showMoveDropbox=!0,this._linkedDevices=[],this._tfaRecoveryToken=void 0,this._recoveryOptions=["code"],this._currentRecoveryMethod="code",this._backupPhoneLastTwoDigits="",this._tfaBackupCodeInputValue="",this._backupTextSent=!1,this._backupPhoneCodeInputValue="",this._activeBackupButton="",this._platform=void 0,this._isFedrampUser=!1,this._clientShowCarousel=!1},t.prototype._ensureClientConnection=function(){a.init()},t.prototype._setDisabledState=function(e){this._disabledState=e,this.emit_change()},t.prototype._setHostNonce=function(e){this._hostNonce=e,this.emit_change()},t.prototype._setScriptNonce=function(e){this._scriptNonce=e},t.prototype._setCaptchaReady=function(e){this._captchaReady=e},t.prototype._setClientInfo=function(e){this._clientInfo=e},t.prototype._setTag=function(e){this._tag=e},t.prototype._setDealCode=function(e){this._dealCode=e},t.prototype._setGoogleSignUpData=function(e){this._googleSignupData=e},t.prototype._setIsPrimary=function(e){return this._isPrimary=e},t.prototype._setIsPairing=function(e){return this._isPairing=e},t.prototype._setHasSecondary=function(e){this._hasSecondary=e},t.prototype._setMultiDisabled=function(e){this._multiDisabled=e},t.prototype._setIsNewAccount=function(e){this._isNewAccount=e},t.prototype._setRole=function(e){this._role=e},t.prototype._setTeam=function(e){this._team=e},t.prototype._setContentStartsOnlineOnly=function(e){this._contentStartsOnlineOnly=e,this.emit_change()},t.prototype._setInfiniteExposed=function(e){this._infiniteExposed=e},t.prototype._setWillInstallKext=function(e){this._willInstallKext=e},t.prototype._setIsUnconsented=function(e){this._isUnconsented=e},t.prototype._setFileProviderEnabled=function(e){this._fileProviderEnabled=e},t.prototype._setEmail=function(e){this._email=e},t.prototype._setInitials=function(e){this._initials=e},t.prototype._setAccountPhotoUrl=function(e){this._accountPhotoUrl=e},t.prototype._setPlanText=function(e){this._planText=e},t.prototype._setName=function(e){this._name=e},t.prototype._setDropboxPath=function(e){this._dropboxPath=e,this.emit_change()},t.prototype._setCurrentError=function(e){this._currentError=e},t.prototype._setFieldErrors=function(e){this._fieldErrors=e,this.emit_change()},t.prototype._setGenericError=function(e){this._genericError=e,this.emit_change()},t.prototype._clearFieldErrors=function(){this._fieldErrors={},this.emit_change()},t.prototype._removeFieldError=function(e){delete this._fieldErrors[e],this._fieldErrors=n.__assign({},this._fieldErrors),this.emit_change()},t.prototype._clearGenericError=function(){this._setGenericError(void 0)},t.prototype._setSsoState=function(e){this._ssoState=e,this.emit_change()},t.prototype._setDigits=function(e){this._digits=e,this.emit_change()},t.prototype._setIsEmail2FA=function(e){this._isEmail2FA=e,this.emit_change()},t.prototype._setCheckpointToken=function(e){this._checkpointToken=e},t.prototype._setFolderRename=function(e){this._oldName=e.old_name,this._newName=e.new_name},t.prototype._setDiskUsage=function(e){this._freeSpace=e.free_space,this._syncSpaceUsed=e.sync_space_used,this._totalSpace=e.total_space,this._diskUsageIsSet=!0},t.prototype._pushPostLinkScreen=function(e){this._postLinkScreens.push(e)},t.prototype._popPostLinkScreen=function(){var e=this._postLinkScreens.pop();e&&this._changeCurrentScreen(e)},t.prototype._setProviderCheckpointToken=function(e){return this._providerCheckpointToken=e},t.prototype._setProvider=function(e){return this._provider=e},t.prototype._setClipboardText=function(e){this._clipboardText=e,this.emit_change()},t.prototype._setShowMoveDropbox=function(e){this._showMoveDropbox=e},t.prototype._setOnboardingInfo=function(e){this._onboardingType=e.onboardingType,this._onboardingVariant=e.onboardingVariant},t.prototype._setIsFedrampUser=function(e){this._isFedrampUser=e},t.prototype._setIsTopmost=function(e){var t=new Set([s.SetupScreenTypes.ADVANCED_SETTINGS,s.SetupScreenTypes.LARGE_DROPBOX,s.SetupScreenTypes.LOW_DISK,s.SetupScreenTypes.SCALE_MITIGATION]),n=e;"win"===this._platform&&t.has(this._currentScreenType)&&(n=!1),this._isTopmost!==n&&(a.IsBridgeFunctionSupported("setIsTopmostViewLevel").then((function(e){if(e)return a.SetIsTopmostViewLevel(n)})),this._isTopmost=n)},t.prototype._changeCurrentScreen=function(e){this._currentScreenType=e,this._disabledState=!1,this._maybeResizeViewForScreen(e),this._clearGenericError(),this.emit_change()},t.prototype._maybeResizeViewForScreen=function(e){var t=s.SETUP_WIZARD_CAROUSEL_WIDTH,n=s.SETUP_WIZARD_CAROUSEL_HEIGHT;e!==s.SetupScreenTypes.DEVICE_LIMIT_LANDING&&e!==s.SetupScreenTypes.DEVICE_LIMIT_MANAGE&&e!==s.SetupScreenTypes.DEVICE_LIMIT_COMPLETE||(t=s.DEVICE_LIMIT_VIEW_WIDTH,n=s.DEVICE_LIMIT_VIEW_HEIGHT),this._currentScreenWidth===t&&this._currentScreenHeight===n||(this._currentScreenWidth=t,this._currentScreenHeight=n,c.resizeView({width:this._currentScreenWidth,height:this._currentScreenHeight}))},t.prototype._openDBFolder=function(){a.ViewManagementClose()},t.prototype._linkSecondary=function(){a.SetupWizardFinished(!0)},t.prototype._setPreauthed=function(e){this._preauthed=e},t.prototype._setDefaultRootPolicy=function(e){this._defaultRootPolicy=e},t.prototype._setAdminDefaultRootPolicy=function(e){this._adminDefaultRootPolicy=e},t.prototype._setShowInfiniteHardDowngradeMsg=function(e){this._showInfiniteHardDowngradeMsg=e,this.emit_change()},t.prototype._setCurrentHost=function(e){this._currentHost=e,this.emit_change()},t.prototype._setCurrentUser=function(e){this._currentUser=e,this.emit_change()},t.prototype._setDeviceLimitNonce=function(e){this._deviceLimitNonce=e,this.emit_change()},t.prototype._setSkuContent=function(e){this._skuContent=e,this.emit_change()},t.prototype._setCurrentRecoveryMethod=function(e){this._currentRecoveryMethod=e,this.emit_change()},t.prototype._setRecoveryOptions=function(e){this._recoveryOptions=e,this.emit_change()},t.prototype._setLinkedDevices=function(e){this._linkedDevices=[];for(var t=0,n=e;t<n.length;t++){var o=n[t];this._linkedDevices.push({name:o.name,icon:o.icon,lastActive:o.last_active})}this.emit_change()},t.prototype._setBackupPhoneLastTwoDigits=function(e){this._backupPhoneLastTwoDigits=e,this.emit_change()},t.prototype._setTfaRecoveryToken=function(e){this._tfaRecoveryToken=e,this.emit_change()},t.prototype._setTfaBackupCodeInputValue=function(e){this._tfaBackupCodeInputValue=e,this.emit_change()},t.prototype._setBackupTextSent=function(e){this._backupTextSent=e,this.emit_change()},t.prototype._setBackupPhoneCodeInputValue=function(e){this._backupPhoneCodeInputValue=e,this.emit_change()},t.prototype._setActiveBackupButton=function(e){this._activeBackupButton=e,this.emit_change()},t.prototype._signOut=function(){o.redirect(o.get_uri().setPath("/client/setup_wizard/sign_out").toString())},t.prototype._initializeCarousel=function(e){this._clientShowCarousel=e,e||(this._currentScreenHeight=s.LEGACY_SETUP_WIZARD_HEIGHT,this._currentScreenWidth=s.LEGACY_SETUP_WIZARD_WIDTH,this.emit_change())},t.prototype._setPlatform=function(e){this._platform=e,this.emit_change()},t.prototype._setEncryptionOptions=function(e){this._encryptionOptions=e,this.emit_change()},t.prototype.defaultRootPolicy=function(){return this._defaultRootPolicy},t.prototype.adminDefaultRootPolicy=function(){return this._adminDefaultRootPolicy},t.prototype.effectiveDefaultRootPolicy=function(){switch(this._defaultRootPolicy){case s.INFINITE_ROOT_POLICY_CHOICE.ADMIN_DEFAULT:return this._adminDefaultRootPolicy;case s.INFINITE_ROOT_POLICY_CHOICE.LOCAL:return s.INFINITE_ROOT_POLICY.LOCAL;case s.INFINITE_ROOT_POLICY_CHOICE.ON_DEMAND:return s.INFINITE_ROOT_POLICY.ON_DEMAND}},t.prototype.currentScreenType=function(){return this._currentScreenType},t.prototype.disabledState=function(){return this._disabledState},t.prototype.hostNonce=function(){return this._hostNonce},t.prototype.scriptNonce=function(){return this._scriptNonce},t.prototype.captchaReady=function(){return this._captchaReady},t.prototype.clientInfo=function(){return this._clientInfo},t.prototype.tag=function(){return this._tag},t.prototype.googleSignUpData=function(){return this._googleSignupData},t.prototype.isGoogleSignUp=function(){return this._googleSignupData.isGoogleSignUp},t.prototype.isNewAccount=function(){return this._isNewAccount},t.prototype.isPrimary=function(){return this._isPrimary},t.prototype.isPairing=function(){return this._isPairing},t.prototype.hasSecondary=function(){return this._hasSecondary},t.prototype.multiDisabled=function(){return this._multiDisabled},t.prototype.role=function(){return this._role},t.prototype.team=function(){return this._team},t.prototype.contentStartsOnlineOnly=function(){return this._contentStartsOnlineOnly},t.prototype.infiniteExposed=function(){return this._infiniteExposed},t.prototype.willInstallKext=function(){return this._willInstallKext},t.prototype.isUnconsented=function(){return this._isUnconsented},t.prototype.fileProviderEnabled=function(){return this._fileProviderEnabled},t.prototype.dealCode=function(){return this._dealCode},t.prototype.emailTrimmed=function(){return null==this._email?this._email:this._email.replace(/\s+$/g,"")},t.prototype.initials=function(){return this._initials},t.prototype.accountPhotoUrl=function(){return this._accountPhotoUrl},t.prototype.planText=function(){return this._planText},t.prototype.name=function(){return this._name},t.prototype.dropboxPath=function(){return this._dropboxPath},t.prototype.currentError=function(){return this._currentError},t.prototype.fieldErrors=function(){return this._fieldErrors},t.prototype.genericError=function(){return this._genericError},t.prototype.digits=function(){return this._digits},t.prototype.isEmail2FA=function(){return this._isEmail2FA},t.prototype.checkpointToken=function(){return this._checkpointToken},t.prototype.oldName=function(){return this._oldName},t.prototype.newName=function(){return this._newName},t.prototype.ssoState=function(){return this._ssoState},t.prototype.providerCheckpointToken=function(){return this._providerCheckpointToken},t.prototype.provider=function(){return this._provider},t.prototype.clipboardText=function(){return this._clipboardText},t.prototype.onboardingType=function(){return this._onboardingType},t.prototype.onboardingVariant=function(){return this._onboardingVariant},t.prototype.freeSpace=function(){return this._freeSpace},t.prototype.syncSpaceUsed=function(){return this._syncSpaceUsed},t.prototype.totalSpace=function(){return this._totalSpace},t.prototype.isLowDiskSpace=function(){return!!this._diskUsageIsSet&&r.isLowDiskSpace(this._freeSpace,this._syncSpaceUsed,this._totalSpace)},t.prototype.isLargeDropbox=function(){return!!this._diskUsageIsSet&&r.isLargeDropbox(this._syncSpaceUsed)},t.prototype.preauthed=function(){return this._preauthed},t.prototype.showInfiniteHardDowngradeMsg=function(){return this._showInfiniteHardDowngradeMsg},t.prototype.currentHost=function(){return this._currentHost},t.prototype.currentUser=function(){return this._currentUser},t.prototype.deviceLimitNonce=function(){return this._deviceLimitNonce},t.prototype.skuContent=function(){return this._skuContent},t.prototype.currentRecoveryMethod=function(){return this._currentRecoveryMethod},t.prototype.getRecoveryOptions=function(){return this._recoveryOptions},t.prototype.getLinkedDevices=function(){return this._linkedDevices},t.prototype.getBackupPhoneLastTwoDigits=function(){return this._backupPhoneLastTwoDigits},t.prototype.showMoveDropbox=function(){return this._showMoveDropbox},t.prototype.tfaRecoveryToken=function(){return this._tfaRecoveryToken},t.prototype.tfaBackupCodeInputValue=function(){return this._tfaBackupCodeInputValue},t.prototype.backupTextSent=function(){return this._backupTextSent},t.prototype.backupPhoneCodeInputValue=function(){return this._backupPhoneCodeInputValue},t.prototype.activeBackupButton=function(){return this._activeBackupButton},t.prototype.currentScreenWidth=function(){return this._currentScreenWidth},t.prototype.currentScreenHeight=function(){return this._currentScreenHeight},t.prototype.platform=function(){return this._platform},t.prototype.isFedrampUser=function(){return this._isFedrampUser},t.prototype.clientShowCarousel=function(){return this._clientShowCarousel},t.prototype.encryptionOptions=function(){return this._encryptionOptions},t.prototype._new_payload=function(e){var t=e.action;switch(t.type){case s.SetupActionTypes.ENSURE_CLIENT_CONNECTION:return this._ensureClientConnection();case s.SetupActionTypes.POP_POST_LINK_SCREEN:return this._popPostLinkScreen();case s.SetupActionTypes.PUSH_POST_LINK_SCREEN:return this._pushPostLinkScreen(t.data.screenType);case s.SetupActionTypes.SET_DISABLED_STATE:return this._setDisabledState(t.data);case s.SetupActionTypes.SET_HOST_NONCE:return this._setHostNonce(t.data);case s.SetupActionTypes.SET_SCRIPT_NONCE:return this._setScriptNonce(t.data);case s.SetupActionTypes.SET_CLIENT_INFO:return this._setClientInfo(t.data);case s.SetupActionTypes.SET_TAG:return this._setTag(t.data);case s.SetupActionTypes.SET_GOOGLE_SIGN_UP_DATA:return this._setGoogleSignUpData(t.data);case s.SetupActionTypes.SET_IS_PRIMARY:return this._setIsPrimary(t.data);case s.SetupActionTypes.SET_IS_PAIRING:return this._setIsPairing(t.data);case s.SetupActionTypes.SET_HAS_SECONDARY:return this._setHasSecondary(t.data);case s.SetupActionTypes.SET_MULTI_DISABLED:return this._setMultiDisabled(t.data);case s.SetupActionTypes.SET_IS_NEW_ACCOUNT:return this._setIsNewAccount(t.data);case s.SetupActionTypes.SET_ROLE:return this._setRole(t.data);case s.SetupActionTypes.SET_TEAM:return this._setTeam(t.data);case s.SetupActionTypes.SET_CONTENT_STARTS_ONLINE_ONLY:return this._setContentStartsOnlineOnly(t.data);case s.SetupActionTypes.SET_INFINITE_EXPOSED:return this._setInfiniteExposed(t.data);case s.SetupActionTypes.SET_WILL_INSTALL_KEXT:return this._setWillInstallKext(t.data);case s.SetupActionTypes.SET_IS_UNCONSENTED:return this._setIsUnconsented(t.data);case s.SetupActionTypes.SET_FILE_PROVIDER_ENABLED:return this._setFileProviderEnabled(t.data);case s.SetupActionTypes.SET_DEAL_CODE:return this._setDealCode(t.data);case s.SetupActionTypes.SET_EMAIL:return this._setEmail(t.data);case s.SetupActionTypes.SET_INITIALS:return this._setInitials(t.data);case s.SetupActionTypes.SET_ACCOUNT_PHOTO_URL:return this._setAccountPhotoUrl(t.data);case s.SetupActionTypes.SET_PLAN_TEXT:return this._setPlanText(t.data);case s.SetupActionTypes.SET_NAME:return this._setName(t.data);case s.SetupActionTypes.SET_DROPBOX_PATH:return this._setDropboxPath(t.data);case s.SetupActionTypes.SET_DIGITS:return this._setDigits(t.data);case s.SetupActionTypes.SET_IS_EMAIL_2FA:return this._setIsEmail2FA(t.data);case s.SetupActionTypes.SET_CHECKPOINT_TOKEN:return this._setCheckpointToken(t.data);case s.SetupActionTypes.SET_PROVIDER_CHECKPOINT_TOKEN:return this._setProviderCheckpointToken(t.data);case s.SetupActionTypes.SET_PROVIDER:return this._setProvider(t.data);case s.SetupActionTypes.SET_CLIPBOARD_TEXT:return this._setClipboardText(t.data);case s.SetupActionTypes.SET_FOLDER_RENAME:return this._setFolderRename(t.data);case s.SetupActionTypes.SET_DISK_USAGE:return this._setDiskUsage(t.data);case s.SetupActionTypes.SET_ONBOARDING_INFO:return this._setOnboardingInfo(t.data);case s.SetupActionTypes.CHANGE_SCREEN:if(this._changeCurrentScreen(t.data.screenType),t.data.error)return this._setCurrentError(t.data.error);break;case s.SetupActionTypes.SET_FIELD_ERRORS:return this._setFieldErrors(t.data);case s.SetupActionTypes.REMOVE_FIELD_ERROR:return this._removeFieldError(t.data);case s.SetupActionTypes.CLEAR_FIELD_ERRORS:return this._clearFieldErrors();case s.SetupActionTypes.SET_GENERIC_ERROR:return this._setGenericError(t.data);case s.SetupActionTypes.CLEAR_GENERIC_ERROR:return this._clearGenericError();case s.SetupActionTypes.SET_SSO_STATE:return this._setSsoState(t.data);case s.SetupActionTypes.SET_IS_TOPMOST:return this._setIsTopmost(t.data);case s.SetupActionTypes.OPEN_DB_FOLDER:return this._openDBFolder();case s.SetupActionTypes.LINK_SECONDARY:return this._linkSecondary();case s.SetupActionTypes.SET_CAPTCHA_READY:return this._setCaptchaReady(t.data);case s.SetupActionTypes.SET_PREAUTHED:return this._setPreauthed(t.data);case s.SetupActionTypes.SET_DEFAULT_ROOT_POLICY:return this._setDefaultRootPolicy(t.data);case s.SetupActionTypes.SET_ADMIN_DEFAULT_ROOT_POLICY:return this._setAdminDefaultRootPolicy(t.data);case s.SetupActionTypes.SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG:return this._setShowInfiniteHardDowngradeMsg(t.data);case s.SetupActionTypes.SET_CURRENT_HOST:return this._setCurrentHost(t.data.id);case s.SetupActionTypes.SET_CURRENT_USER:return this._setCurrentUser(t.data.user);case s.SetupActionTypes.SET_DEVICE_LIMIT_NONCE:return this._setDeviceLimitNonce(t.data.deviceLimitNonce);case s.SetupActionTypes.SIGN_OUT:return this._signOut();case s.SetupActionTypes.SET_SKU_CONTENT:return this._setSkuContent(t.data.skuContent);case s.SetupActionTypes.SET_CURRENT_RECOVERY_METHOD:return this._setCurrentRecoveryMethod(t.data);case s.SetupActionTypes.SET_RECOVERY_OPTIONS:return this._setRecoveryOptions(t.data);case s.SetupActionTypes.SET_LINKED_DEVICES:return this._setLinkedDevices(t.data);case s.SetupActionTypes.SET_SHOW_MOVE_DROPBOX:return this._setShowMoveDropbox(t.data);case s.SetupActionTypes.SET_BACKUP_PHONE_LAST_TWO_DIGITS:return this._setBackupPhoneLastTwoDigits(t.data);case s.SetupActionTypes.SET_TFA_RECOVERY_TOKEN:return this._setTfaRecoveryToken(t.data);case s.SetupActionTypes.SET_TFA_BACKUP_CODE_INPUT_VALUE:return this._setTfaBackupCodeInputValue(t.data);case s.SetupActionTypes.SET_BACKUP_TEXT_SENT:return this._setBackupTextSent(t.data);case s.SetupActionTypes.SET_BACKUP_PHONE_CODE_INPUT_VALUE:return this._setBackupPhoneCodeInputValue(t.data);case s.SetupActionTypes.SET_ACTIVE_BACKUP_BUTTON:return this._setActiveBackupButton(t.data);case s.SetupActionTypes.INITIALIZE_CAROUSEL:return this._initializeCarousel(t.data);case s.SetupActionTypes.SET_PLATFORM:return this._setPlatform(t.data);case s.SetupActionTypes.SET_IS_FEDRAMP_USER:return this._setIsFedrampUser(t.data);case s.SetupActionTypes.SET_ENCRYPTION_OPTIONS:return this._setEncryptionOptions(t.data)}},t})(i.Store);t.SetupStore=_;var u=new _;t.default=u})),define("modules/clean/react/dropbox_header",["require","exports","tslib","react","prop-types","modules/clean/react/css","modules/clean/react/image","modules/clean/static_urls","modules/core/i18n"],(function(e,t,n,o,i,s,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),i=n.__importStar(i);var _=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e,t;e=a.static_url("/static/images/logo_catalog/dropbox_logo_glyph_2015_m1-vfleInWIl.svg"),t=a.static_url("/static/images/logo_catalog/dropbox_logo_text_2015_m1-vflV-vZRB.svg");var n=o.default.createElement(r.Image,{className:"dropbox-logo--glyph",src:e,srcHiRes:e}),i=o.default.createElement(r.Image,{className:"dropbox-logo--type",src:t,srcHiRes:t}),s=o.default.createElement("span",null,n,i);return"glyph"===this.props.variant?s=n:"text"===this.props.variant&&(s=i),o.default.createElement("h1",{id:"dropbox-logo",className:"dropbox-logo dropbox-logo--"+this.props.variant+" "+this.props.className,"aria-label":this.props.ariaLabel},s)},t.displayName="DropboxLogo",t.propTypes={children:i.object,className:i.string,ariaLabel:i.string,experiments:i.object,variant:i.oneOf(["logo","glyph","text"]).isRequired},t.defaultProps={className:"",experiments:{},variant:"logo",ariaLabel:c.intl.formatMessage({id:"rIir19",defaultMessage:"Dropbox"})},t})(o.default.Component);t.DropboxLogo=_;var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return o.default.createElement("header",{className:"dropbox-mast-head "+this.props.className},this.props.children?this.props.children:o.default.createElement("nav",{className:"dropbox-mast-head__nav o-grid"},o.default.createElement("div",{className:"o-grid__col o-grid__col--4-of-12 u-font-left"},o.default.createElement("a",{href:"/downloading",className:"c-btn c-btn--tertiary"},"Download the App")),o.default.createElement("div",{className:"o-grid__col o-grid__col--4-of-12 u-font-center"},o.default.createElement(_,{className:"dropbox-mast-head-logo",variant:"logo"})),o.default.createElement("div",{className:"o-grid__col o-grid__col--4-of-12 u-font-right"},o.default.createElement("a",{href:"login",className:"c-btn c-btn--tertiary"},"Sign In"))))},t.displayName="_DropboxHeader",t.propTypes={children:i.object,className:i.string,experiments:i.object},t.defaultProps={className:"",experiments:{}},t})(o.default.Component),p=s.requireCssWithComponent(u,["/static/css/react/components/header-vflgUf-1K.css"]);t.DropboxHeader=p})),define("modules/clean/validators/email_validator",["require","exports","tslib","modules/clean/validators/input_validator","modules/core/i18n"],(function(e,t,n,o,i){"use strict";var s,r;Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=void 0,(s=(function(){function e(){}return e.initClass=function(){this.EMPTY_MSG=i.intl.formatMessage({id:"I7g4FQ",defaultMessage:"Please enter an email address"}),this.WRONG_NUM_ATS_MSG=i.intl.formatMessage({id:"579xSI",defaultMessage:"An email address must contain a single @"}),this.BAD_USERNAME_MSG=i.intl.formatMessage({id:"s/Hxx+",defaultMessage:"The username portion of the email address is invalid (the portion before the @)"}),this.BAD_DOMAIN_MSG=i.intl.formatMessage({id:"MiLg40",defaultMessage:"The domain portion of the email address is invalid (the portion after the @)"}),this.USERNAME_PATTERN=new RegExp("^[\\w!#$%&'*+\\-\\/=?^`{|}~.]+@.*$","i"),this.DOMAIN_PATTERN=new RegExp("^.*@([a-z0-9][a-z0-9\\-]*\\.)+([a-z]{2,15}|xn--[a-z0-9\\-])$","i"),r=function(e){var t=null!=e?e.split("@"):void 0;return 2===(null!=t?t.length:void 0)},this.validate=o.default.composeValidators([[""+this.EMPTY_MSG,o.default.notEmptyValidator()],[""+this.WRONG_NUM_ATS_MSG,r],[""+this.BAD_USERNAME_MSG,o.default.regexValidator(this.USERNAME_PATTERN)],[""+this.BAD_DOMAIN_MSG,o.default.regexValidator(this.DOMAIN_PATTERN)]])},e})()).initClass(),s=s,t.default=s})),define("modules/clean/validators/input_validator",["require","exports"],(function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),n=(function(){function e(){}return e.groupValidationResults=function(e){var t={},n=!0;for(var o in e){for(var i=e[o],s=!0,r=0,a=Array.from(i);r<a.length;r++){var c=a[r];s=s&&c.valid}t[""+o]={valid:s,result:i},n=n&&s}return{valid:n,validation_result:t}},e.composeValidators=function(e){return function(t){for(var n=[],o=0,i=Array.from(e);o<i.length;o++){var s=i[o],r=Array.from(s),a=r[0],c=r[1];n.push({valid:c(t),message:a})}return n}},e.regexValidator=function(e){return function(t){return!(null==t||!t.match(e))}},e.minLengthValidator=function(e){return function(t){return(null!=t?t.length:void 0)>=e}},e.maxLengthValidator=function(e){return function(t){return(null!=t?t.length:void 0)<=e}},e.notEmptyValidator=function(){return function(e){return(null!=e?e.length:void 0)>0}},e.trueValidator=function(){return function(e){return!!e}},e})(),t.default=n})),define("modules/clean/validators/password_validator",["require","exports","tslib","modules/clean/validators/input_validator","modules/core/i18n"],(function(e,t,n,o,i){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),(s=(function(){function e(){}return e.initClass=function(){this.EMPTY_MSG=i.intl.formatMessage({id:"LhlWCW",defaultMessage:"Please enter a password"}),this.TOO_SHORT_MSG=i.intl.formatMessage({id:"MskMEF",defaultMessage:"Passwords must be 6 characters or more"}),this.MIN_LENGTH=6,this.validate=o.default.composeValidators([[""+this.EMPTY_MSG,o.default.notEmptyValidator()],[""+this.TOO_SHORT_MSG,o.default.minLengthValidator(this.MIN_LENGTH)]])},e})()).initClass(),s=s,t.default=s}));
//# sourceMappingURL=pkg-legacy-bc.min.js-vflBFeTlp.map