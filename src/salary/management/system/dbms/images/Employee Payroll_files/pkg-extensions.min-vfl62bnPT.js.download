define("modules/clean/cloud_docs/cloud_doc_api_client",["require","exports","tslib"],(function(e,t,n){"use strict";function r(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/api_v2/user_client"],t,n)})).then(n.__importStar)];case 1:return[2,(new(0,t.sent().UserApiV2Client)).ns("cloud_docs")]}}))}))}function i(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/api_v2/noauth_client"],t,n)})).then(n.__importStar)];case 1:return[2,(new(0,t.sent().NoAuthApiV2Client)).ns("cloud_docs")]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudDocToken=function(e,t,i,o){(function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("get_token",{cloud_doc_id:t},{subjectUserId:e})]}}))}))})(e,t).then(i,o)},t.getLockProviderAsync=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("get_lock_provider",{file_id:t},{subjectUserId:e})]}}))}))},t.getNavigationProperties=function(e,t,i,o){(function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("get_navigation_properties",{cloud_doc_id:t},{subjectUserId:e})]}}))}))})(e,t).then(i,o)},t.dismissPreferredEditorPrompt=function(e,t,i){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("preferred_editor_prompt/disable",{integration_name:t,preferred_editor_doc_type:i},{subjectUserId:e})]}}))}))},t.getPassSnackbarAsync=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("pass_snackbar/get",{cloud_doc_id:t},{subjectUserId:e})]}}))}))},t.setPassSnackbarAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("pass_snackbar/set",void 0,{subjectUserId:e})]}}))}))},t.getUserEducationSnackbarAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("user_education_snackbar/get",void 0,{subjectUserId:e})]}}))}))},t.setUserEducationSnackbarAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("user_education_snackbar/set",void 0,{subjectUserId:e})]}}))}))},t.getSignInSnackbarAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("signin_snackbar/get",void 0,{subjectUserId:e})]}}))}))},t.setSignInSnackbarAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("signin_snackbar/set",void 0,{subjectUserId:e})]}}))}))},t.getShortcutsSurveyAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("shortcuts_survey/get",void 0,{subjectUserId:e})]}}))}))},t.setShortcutsSurveyAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("shortcuts_survey/set",void 0,{subjectUserId:e})]}}))}))},t.getGoogleSurveyAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("google_survey/get",void 0,{subjectUserId:e})]}}))}))},t.setGoogleSurveyAsync=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("google_survey/set",void 0,{subjectUserId:e})]}}))}))},t.getTeamSettings=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,r()];case 1:return[2,t.sent().rpc("team_settings/get",void 0,{subjectUserId:e})]}}))}))},t.getPreferredUrl=function(e,t,i){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("get_preferred_editor_url",{file_id:t,file_ext:i},{subjectUserId:e})]}}))}))},t.logTokenInUse=function(e,t,i){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return[2,n.sent().rpc("log_token_in_use",{doc_id:t,auth_token:i},{subjectUserId:e}).catch((function(){return new Promise((function(){return null}))}))]}}))}))},t.encryptEmail=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,i()];case 1:return[2,t.sent().rpc("logged_out/encrypt_email",{email:e},{})]}}))}))}})),define("modules/clean/cloud_docs/constants",["require","exports","tslib","external/lodash","modules/clean/filepath","modules/clean/static_urls","modules/core/i18n"],(function(e,t,n,r,i,o,a){"use strict";var s,c,u,l,d,_;Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),(function(e){e.PAPER="paper",e.PAPER_TEMPLATE="papert",e.PAPER_BINDER="binder"})(t.PaperNewFileTypes||(t.PaperNewFileTypes={})),(function(e){e.PAPER="paper",e.PAPER_TEMPLATE="papert",e.PAPER_BINDER="binder"})(t.PaperFileTypes||(t.PaperFileTypes={})),(function(e){e.GOOGLE_DSS_DOC="gdoc",e.GOOGLE_DSS_SHEET="gsheet",e.GOOGLE_DSS_SLIDES="gslides"})(l=t.GoogleFileTypes||(t.GoogleFileTypes={})),(function(e){e.SIMPLE_POINTER="dlink"})(d=t.PointerFileTypes||(t.PointerFileTypes={})),(function(e){e.WORD="docx",e.EXCEL="xlsx",e.POWERPOINT="pptx"})(_=t.MicrosoftFileTypes||(t.MicrosoftFileTypes={})),(function(e){e.WORD="word",e.EXCEL="excel",e.POWERPOINT="powerpoint"})(t.MicrosoftEditors||(t.MicrosoftEditors={})),(function(e){e.HOME="new_file_menu_home",e.BROWSE="new_file_menu_browse"})(t.NewFileMenuFromType||(t.NewFileMenuFromType={})),t.CLOUD_EDITOR_TO_PRODUCT_NAME={preview:a.intl.formatMessage({id:"GqeH/g",defaultMessage:"preview"}),word:a.intl.formatMessage({id:"Y9FcUQ",defaultMessage:"Word for the web"}),excel:a.intl.formatMessage({id:"o3mRdr",defaultMessage:"Excel for the web"}),powerpoint:a.intl.formatMessage({id:"RTj2SO",defaultMessage:"PowerPoint for the web"}),gdoc:a.intl.formatMessage({id:"+HsOFj",defaultMessage:"Google Docs"}),gsheet:a.intl.formatMessage({id:"cpuRML",defaultMessage:"Google Sheets"}),gslides:a.intl.formatMessage({id:"PcJCVL",defaultMessage:"Google Slides"}),paper:a.intl.formatMessage({id:"neBk7u",defaultMessage:"Dropbox Paper"}),papert:a.intl.formatMessage({id:"Rvv7NR",defaultMessage:"Dropbox Paper Template"}),binder:a.intl.formatMessage({id:"X5Hrgk",defaultMessage:"Dropbox Binder"})},t.isMicrosoftFileType=function(e){return r.values(_).includes(e)},t.isPointerFileType=function(e){return r.values(d).includes(e)},t.isGoogleFileType=function(e){return r.values(l).includes(e)},t.LOADING_PAGE_URL="/cloud_docs/new",t.QueryParamBlackList={platform:!0,dc_open_id:!0,web_open_id:!0,ts:!0,fileid_gid:!0},t.DSS_TYPE_TO_OPEN_WITH_ICONS=((s={})[l.GOOGLE_DSS_DOC]=o.static_url("/static/images/cloud_docs/gdoc-vfljy0OpJ.svg"),s[l.GOOGLE_DSS_SHEET]=o.static_url("/static/images/cloud_docs/gsheet-vflWVpJ8G.svg"),s[l.GOOGLE_DSS_SLIDES]=o.static_url("/static/images/cloud_docs/gslides-vflvsGNC8.svg"),s),t.DSS_TYPE_TO_TEXT=((c={})[l.GOOGLE_DSS_DOC]=a.intl.formatMessage({id:"+HsOFj",defaultMessage:"Google Docs"}),c[l.GOOGLE_DSS_SHEET]=a.intl.formatMessage({id:"cpuRML",defaultMessage:"Google Sheets"}),c[l.GOOGLE_DSS_SLIDES]=a.intl.formatMessage({id:"PcJCVL",defaultMessage:"Google Slides"}),c),t.GOOGLE_DOC_SUPPORTED_EXTS=[".docx",".gdoc"],t.GOOGLE_SHEET_SUPPORTED_EXTS=[".xlsx",".gsheet"],t.GOOGLE_SLIDES_SUPPORTED_EXTS=[".pptx",".gslides"],t.DSS_TYPE_TO_SUPPORTED_EXTS=((u={})[l.GOOGLE_DSS_DOC]=t.GOOGLE_DOC_SUPPORTED_EXTS,u[l.GOOGLE_DSS_SHEET]=t.GOOGLE_SHEET_SUPPORTED_EXTS,u[l.GOOGLE_DSS_SLIDES]=t.GOOGLE_SLIDES_SUPPORTED_EXTS,u),t.POINTER_EXTS=["web"],t.CLOUD_BASED_FILE_EXTS=["binder","paper","papert","web","gdoc","gsheet","gslides"],t.CLOUD_ENHANCED_FILE_EXTS=["docx","pptx","xlsx"],t.MICROSOFT_FILE_EXTS=["docx","pptx","xlsx"],t.HELLOSIGN_FILE_EXTS=["doc","docx","gif","html","jpeg","jpg","pdf","png","ppsx","ppt","pptx","txt","xls","xlsx"],t.isCloudDocByExtension=function(e){return t.isCloudBasedFileByExtension(e)||t.isCloudEnhancedFileByExtension(e)},t.isCloudBasedFileByExtension=function(e){return!!e&&(e.length>0&&"."===e[0]&&(e=e.substr(1)),t.CLOUD_BASED_FILE_EXTS.includes(e.toLowerCase()))},t.isCloudEnhancedFileByExtension=function(e){return!!e&&(e.length>0&&"."===e[0]&&(e=e.substr(1)),t.CLOUD_ENHANCED_FILE_EXTS.includes(e.toLowerCase()))},t.isMicrosoftFileByExtension=function(e){return!!e&&(e.length>0&&"."===e[0]&&(e=e.substr(1)),t.MICROSOFT_FILE_EXTS.includes(e.toLowerCase()))},t.isHellosignFileByExtension=function(e){return!!e&&(e.length>0&&"."===e[0]&&(e=e.substr(1)),t.HELLOSIGN_FILE_EXTS.includes(e.toLowerCase()))},t.isPointerByExtension=function(e){return t.POINTER_EXTS.includes(i.file_extension(e))},(function(e){e.WEB="web",e.WEB_HOME="web_home",e.WEB_BROWSE="web_browse",e.UNKOWN="unknown"})(t.ActionSourceValue||(t.ActionSourceValue={})),t.CLOUD_DOCS_AMP_NAMESPACE="cloud_docs_perf",t.CLOUD_DOCS_LOGGED_OUT_UX_COOKIE_NAME="cd_u_gdd",t.CLOUD_DOCS_LOGGED_OUT_UX_COOKIE_PERIOD=30,t.CLOUD_DOCS_STORMCROW_LOGGED_OUT_UX_GOOGLE="cloud_docs_logged_out_ux_google",t.CLOUD_DOCS_PASS_LOG_DELAY_MS=3e4})),define("modules/clean/cloud_docs/types",["require","exports","tslib"],(function(e,t,n){"use strict";var r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.BroadcastError="cloud-docs-broadcast-error",e.ChildReady="cloud-docs-child-frame-ready",e.ChildViewable="cloud-docs-child-frame-viewable",e.ChildInteractive="cloud-docs-child-frame-interactive",e.OpenAddAccessUI="cloud-docs-open-add-access-ui",e.NavigateNewFragment="cloud-docs-navigate-new-fragment",e.OpenSharingUI="cloud-docs-open-sharing-ui",e.TitleChanged="cloud-docs-title-changed",e.ReloadHost="cloud-docs-reload-host",e.ProviderFrameCalled="cloud-docs-provider-frame-called"})(i=t.CloudDocActionsToDropbox||(t.CloudDocActionsToDropbox={})),(function(e){e.LogEvent="gdd-log-event",e.Ready="gdd-ready",e.FrameLoaded="gdd-frame-loaded"})(o=t.GDDSpecificActionsToDropbox||(t.GDDSpecificActionsToDropbox={})),(function(e){e.GetToken="cloud-docs-get-token",e.NavigateNewDoc="cloud-docs-navigate-new-doc",e.NavigateCompleted="cloud-docs-navigate-completed",e.OpenSearchUi="open-search-ui",e.OpenDocMentionUI="open-doc-mention-ui",e.MountDropboxNotificationsDropdown="cloud-docs-mount-dropbox-notifications-dropdown"})(a=t.PaperSpecificActionsToDropbox||(t.PaperSpecificActionsToDropbox={})),(function(e){e.AppLoadingStatus="App_LoadingStatus",e.AppNavigated="App_Navigated",e.BroadcastError="Broadcast_Error",e.BroadcastInitialized="Broadcast_Initialized",e.BroadcastMediaState="Broadcast_MediaState",e.BroadcastState="Broadcast_State",e.EditNotification="Edit_Notification",e.FileRename="File_Rename",e.QueryLoadingStatus="QueryLoadingStatus",e.UIClose="UI_Close",e.UIEdit="UI_Edit",e.UIFileVersions="UI_FileVersions",e.UIReportAbuse="UI_ReportAbuse",e.UIShareForm="UI_ShareForm",e.UISharing="UI_Sharing",e.UISignIn="UI_SignIn"})(s=t.WopiSpecificActionsToDropbox||(t.WopiSpecificActionsToDropbox={})),(function(e){e.Init="intermediate-frame-init"})(t.CloudDocActionsToIntermediateFrame||(t.CloudDocActionsToIntermediateFrame={})),(function(e){e.HostReady="cloud-docs-host-ready",e.AddAccessUIResponse="cloud-docs-add-access-response",e.NavigateNewFragment="cloud-docs-navigate-new-fragment",e.NavigateNewHistory="cloud-docs-navigate-new-history",e.MetadataChanged="cloud-docs-metadata-changed",e.FrameMessengerParentReady="parent-ready"})(t.CloudDocActionsToProvider||(t.CloudDocActionsToProvider={})),(function(e){e.NavigateNewDoc="cloud-docs-navigate-new-doc",e.GrantToken="cloud-docs-token",e.SearchUiClosed="search-ui-closed",e.DocMentionUIClosed="doc-mention-ui-closed",e.MemberCountChanged="cloud-docs-member-count-changed"})(t.PaperSpecificActionsToProvider||(t.PaperSpecificActionsToProvider={})),(function(e){e.HostReady="Host_PostmessageReady",e.PerformanceTiming="Host_PerfTiming"})(t.WopiSpecificActionsToProvider||(t.WopiSpecificActionsToProvider={}));var c=function(){};t.ChildReadyMessage=c;var u=function(){};t.HostReadyMessage=u;var l=function(){};t.ChildViewableMessage=l;var d=function(){};t.ChildInteractiveMessage=d;var _=function(){};t.IntermediateFrameInitMessage=_;var g=function(){};t.OpenAddAccessUIMessage=g;var p=function(){},f=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(p);t.NavigateNewHistoryMessageToProvider=f;var E=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(p);t.NavigateNewFragmentMessageToProvider=E;var m=function(){};t.NavigateNewFragmentMessageToDropbox=m;var S=function(){};t.ReloadHostMessage=S;var h=function(){};t.TitleChangedMessage=h;var v=function(){};t.BroadcastErrorMessage=v;var y=function(){};t.OpenSharingUIMessage=y;var I=function(){};t.AddAccessUIResponseMessage=I;var b=function(){};t.MetadataChangedMessage=b;var T=function(){};t.GddLogEventMessage=T;var M=function(){};t.ProviderFrameCalledMessage=M;var O=function(){};t.GetTokenMessage=O;var A=function(){};t.GrantTokenMessage=A;var w=function(){};t.NavigateNewDocMessage=w;var N=function(){};t.NavigateCompletedMessage=N;var x=function(){};t.MountDropboxNotificationsDropdownMessage=x;var D=function(){};t.GddReadyMessage=D;var P=function(){};t.GddFrameLoadedMessage=P,(function(e){e.Navigate="navigate",e.SendInfo="send-info"})(t.SearchResultClickAction||(t.SearchResultClickAction={}));var C=function(){};t.OpenSearchUiMessage=C;var F=function(){};t.SearchUiClosedMessage=F;var R=function(){};t.OpenDocMentionUIMessage=R,(function(e){e.CloudDoc="cloud-doc",e.File="file",e.Folder="folder",e.Paper="paper",e.PaperFolder="paper-folder"})(t.SearchUIResultType||(t.SearchUIResultType={}));var L=function(){};t.DocMentionUIClosedMessage=L;var U=function(){};t.MemberCountChanged=U;var G=function(e,t){this.action=e,this.parameters=t};t.WopiSpecificMessageToDropbox=G;var k,B=function(){};t.FrameMessengerParentReady=B,(function(e){e.closed="closed",e.prefilled="prefilled",e.unfilled="unfilled",e.linkSettings="linksettings"})(t.ShareModalVariant||(t.ShareModalVariant={})),t.SimplePointer={".tag":"simple_pointer"},t.GddRegisterClientCalled={".tag":"gdd_register_client_called"},t.LoadIframeAttempt={".tag":"load_iframe_attempt"},t.LoadIframeSuccess={".tag":"load_iframe_success"},t.LoadIframeFailed={".tag":"load_iframe_failed"},t.LoadIframeBrowserCapabilities={".tag":"load_iframe_browser_capabilities"},t.LoadingScreenEnd={".tag":"loading_screen_end"},t.LoadingScreenTimeout={".tag":"loading_screen_timeout"},t.ReceivedMessageAclFixerClosed={".tag":"received_message_acl_fixer_closed"},t.ReceivedMessageAclFixerOpened={".tag":"received_message_acl_fixer_opened"},t.ReceivedMessageClientFragmentsChanged={".tag":"received_message_client_fragments_changed"},t.ReceivedMessageClientReady={".tag":"received_message_client_ready"},t.SentMessageHostFragmentsChanged={".tag":"sent_message_host_fragments_changed"},t.SentMessageHostReady={".tag":"sent_message_host_ready"},t.SentMessageMetadataChanged={".tag":"sent_message_metadata_changed"},t.ReceivedMessageSharingOpened={".tag":"received_message_sharing_opened"},t.ReceivedMessageTitleChanged={".tag":"received_message_title_changed"},t.ReceivedMessageReloadHost={".tag":"received_message_reload_host"},t.RestoreAttempt={".tag":"modal_restore_attempt"},t.RestoreSuccess={".tag":"modal_restore_success"},t.RestoreFailed={".tag":"modal_restore_failed"},t.BackHome={".tag":"modal_back_home"},t.PermissionUpgraded={".tag":"showed_modal_permission_upgraded"},t.PermissionDowngraded={".tag":"showed_modal_permission_downgraded"},t.Unauthenticated={".tag":"showed_modal_unauthenticated"},t.PermissionDenied={".tag":"showed_modal_permission_denied"},t.DeletedCanRestore={".tag":"showed_modal_deleted_can_restore"},t.DeletedCantRestore={".tag":"showed_modal_deleted_cant_restore"},t.PermanentlyDeleted={".tag":"showed_modal_permanently_deleted"},t.UserNotLoggedIn={".tag":"showed_modal_user_not_logged_in"},t.NearQuota={".tag":"showed_modal_near_quota"},t.OverQuota={".tag":"showed_modal_over_quota"},t.FileLocked={".tag":"showed_modal_file_locked"},t.MaxAccessUrlChanged={".tag":"max_access_url_changed"},t.actionReceivedToEvent=((r={})[i.BroadcastError]=null,r[i.ChildReady]=t.ReceivedMessageClientReady,r[i.ChildViewable]=null,r[i.ChildInteractive]=null,r[i.OpenAddAccessUI]=t.ReceivedMessageAclFixerOpened,r[i.NavigateNewFragment]=t.ReceivedMessageClientFragmentsChanged,r[i.OpenSharingUI]=t.ReceivedMessageSharingOpened,r[i.TitleChanged]=t.ReceivedMessageTitleChanged,r[i.ReloadHost]=t.ReceivedMessageReloadHost,r[i.ProviderFrameCalled]=null,r[o.LogEvent]=null,r[o.Ready]=null,r[o.FrameLoaded]=null,r[s.AppLoadingStatus]=null,r[s.AppNavigated]=null,r[s.BroadcastError]=null,r[s.BroadcastInitialized]=null,r[s.BroadcastMediaState]=null,r[s.BroadcastState]=null,r[s.EditNotification]=null,r[s.FileRename]=null,r[s.QueryLoadingStatus]=null,r[s.UIClose]=null,r[s.UIEdit]=null,r[s.UIFileVersions]=null,r[s.UIReportAbuse]=null,r[s.UIShareForm]=null,r[s.UISharing]=null,r[s.UISignIn]=null,r[a.GetToken]=null,r[a.NavigateNewDoc]=null,r[a.NavigateCompleted]=null,r[a.OpenSearchUi]=null,r[a.OpenDocMentionUI]=null,r[a.MountDropboxNotificationsDropdown]=null,r),t.editorTypeToClient={paper:{".tag":"dropbox_paper"},gdoc:{".tag":"gdd_docs"},gsheet:{".tag":"gdd_sheets"},gslides:{".tag":"gdd_slides"},wopi:{".tag":"wopi"},word:{".tag":"word"},excel:{".tag":"excel"},powerpoint:{".tag":"wopi"}},t.getPlatform=function(e){return e||"web"},(function(e){e.GOOGLE_DSS="GOOGLE_DSS",e.PAPER_INTEGRATION="PAPER_INTEGRATION",e.OFFICE_ONLINE="OFFICE_ONLINE"})(k=t.IntegrationName||(t.IntegrationName={})),t.PartnerIntegrationGoogle={".tag":"google_integration"},t.PartnerIntegrationMicrosoft={".tag":"microsoft_integration"},t.PartnerIntegrationPaper={".tag":"paper_integration"},t.GetPartnerIntegration=function(e){return e===k.GOOGLE_DSS?t.PartnerIntegrationGoogle:e===k.OFFICE_ONLINE?t.PartnerIntegrationMicrosoft:e===k.PAPER_INTEGRATION?t.PartnerIntegrationPaper:{".tag":"other"}},t.PreCreateAction={".tag":"pre_create"},t.CreateAction={".tag":"create"},t.OpenAction={".tag":"open"},t.PreOpenAction={".tag":"pre_open"},t.PreviewAction={".tag":"preview"},t.LoadingSnackbarImpression={".tag":"loading_snack_bar_impression"},t.LoadingSnackbarOpenPreview={".tag":"loading_snack_bar_open_preview"},t.DynamicRoutingModalImpression={".tag":"dynamic_routing_modal_impression"},t.UserActionEventType={PRE_CREATE:t.PreCreateAction,CREATE:t.CreateAction,OPEN:t.OpenAction,PRE_OPEN:t.PreOpenAction,PREVIEW:t.PreviewAction,LOADING_SNACKBAR_IMPRESSION:t.LoadingSnackbarImpression,LOADING_SNACKBAR_OPEN_PREVIEW:t.LoadingSnackbarOpenPreview,DYNAMIC_ROUTING_MODAL_IMPRESSION:t.DynamicRoutingModalImpression},t.WebBrowseSource={".tag":"web_browse"},t.WebHomeSource={".tag":"web_home"},t.WebSearchSource={".tag":"web_search"},t.WebPreviewSource={".tag":"web_preview"},t.WebSource={".tag":"web"},t.BrowserExtensionSource={".tag":"browser_extension"},t.UserActionSourceType={WEB:t.WebSource,WEB_BROWSE:t.WebBrowseSource,WEB_HOME:t.WebHomeSource,WEB_SEARCH:t.WebSearchSource,WEB_PREVIEW:t.WebPreviewSource,BROWSER_EXTENSION:t.BrowserExtensionSource},t.GoogleDocsEditor={".tag":"google_docs"},t.GoogleSheetsEditor={".tag":"google_sheets"},t.GoogleSlidesEditor={".tag":"google_slides"},t.WordOnlineEditor={".tag":"word_online"},t.ExcelOnlineEditor={".tag":"excel_online"},t.PowerpointOnlineEditor={".tag":"powerpoint_online"},t.PaperWebEditor={".tag":"paper_web"},t.UserActionEditorType={GOOGLE_DOCS:t.GoogleDocsEditor,GOOGLE_SHEETS:t.GoogleSheetsEditor,GOOGLE_SLIDES:t.GoogleSlidesEditor,WORD_ONLINE:t.WordOnlineEditor,EXCEL_ONLINE:t.ExcelOnlineEditor,POWERPOINT_ONLINE:t.PowerpointOnlineEditor,PAPER_WEB:t.PaperWebEditor};var j=function(){};t.UserActionPreOpenMessage=j;var W=function(){};t.UserActionPreCreateMessage=W;var H=function(){};t.UserActionCreateMessage=H;var V=function(){};t.UserActionPreviewMessage=V;var X=function(){};t.UserActionLoadingSnackbarImpressionMessage=X;var q=function(){};t.UserActionLoadingSnackbarOpenPreviewMessage=q;var Y=function(){};t.UserActionDynamicRoutingModalImpressionMessage=Y,(function(e){e.Impression="impression",e.Yes="yes",e.No="no",e.SignIn="sign in",e.Preview="preview",e.Edit="edit"})(t.PromptActionTypes||(t.PromptActionTypes={})),(function(e){e[e.GDD_INTEGRATION=1]="GDD_INTEGRATION",e[e.PAPER_INTEGRATION=2]="PAPER_INTEGRATION"})(t.CloudDocProviderIntegration||(t.CloudDocProviderIntegration={})),t.IntegrationViewOnly={".tag":"view_only"},t.IntegrationCreateAndEdit={".tag":"create_and_edit"}})),define("modules/clean/react/extensions/client",["require","exports","tslib","modules/clean/api_v2/user_client","modules/clean/react/extensions/feature_flags","modules/clean/cloud_docs/cloud_doc_api_client","modules/clean/cloud_docs/types","modules/clean/react/app_actions/apis"],(function(e,t,n,r,i,o,a,s){"use strict";function c(e){return"app_id"in e}var u;function l(){return d()}function d(e){return void 0===e&&(e=u.DISABLED),{displayState:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isAppId=c,(function(e){e[e.LOADING=0]="LOADING",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED"})(u=t.DisplayState||(t.DisplayState={})),t.emptyExtensionsConfig=l,t.actionCompareFn=function(e,t){return e.priority&&t.priority?t.priority-e.priority:e.priority?-1:t.priority?1:e.description<t.description?-1:e.description>t.description?1:0},t.newExtensionsConfig=d;var _,g=(function(){function e(e){this.loaded=!1,this.state={actions:[],actionMapping:[],categoryInfos:[],bylines:{},featureFlags:{},sharingServiceInfo:{},cloudDocsInfo:{openWithGddSupported:!1},actionIdToAppAction:{},appActionsEnabled:!1,categoryMapsByExt:{},openMenuSurveyEnabled:!1,shareMenuSurveyEnabled:!1},this.client=e}return e.prototype.getActionsForFile=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getActionsForFileBatch([e],t)];case 1:return[2,n.sent()[e.file_id]||l()]}}))}))},e.prototype.getActionsForFileBatch=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){var r;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,this.loadState(t)];case 1:return r=n.sent(),[2,this.getExtensionsConfigsForFiles(r,e)]}}))}))},e.prototype.getFeatureFlags=function(){return this.state.featureFlags},e.prototype.updateLinkStateForAction=function(e,t){for(var r=this.state.actions,i=0,o=r;i<o.length;i++){var a=o[i];a.id===e&&(a.link_state=t)}this.state=n.__assign(n.__assign({},this.state),{actions:r})},e.prototype.loadState=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,r;return n.__generator(this,(function(n){switch(n.label){case 0:if(this.loaded)return[3,4];this.stateRequest||(this.stateRequest=this.fetchActions(e)),t=this.stateRequest,n.label=1;case 1:return n.trys.push([1,3,,4]),r=this,[4,this.stateRequest];case 2:return r.state=n.sent(),[3,4];case 3:return n.sent(),this.stateRequest===t&&(this.stateRequest=void 0),[3,4];case 4:return[2,this.state]}}))}))},e.prototype.getExtensionsConfigsForFiles=function(e,t){var n={};return t.forEach((function(t){n[t.file_id]=d(e.appActionsEnabled&&!t.is_dir?u.ENABLED:u.DISABLED)})),n},e.prototype.fetchActions=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,r,o,a,s,u,l;return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this.client.ns("app_actions").rpc("get_actions_for_user",{include_cloud_editors:!0,include_unlinked_ga_extensions:!0},{subjectUserId:e.id}),[4,Promise.all([t,this.refreshSharingServiceInfo(e.id),this.getCloudDocsInfo(e)])];case 1:return r=n.sent(),o=r[0],a=r[1],s=r[2],u=(function(e){var t={};e.actions.forEach((function(e){!t[e.id]&&e.app_id&&(t[e.id]=e)}));var n={};e.action_mapping.forEach((function(e){var r=e.matcher;if("extension"===r[".tag"]){var i=r.extension,o=new Map;e.action_ids.forEach((function(e){var n=t[e],r=o.get(n.category);r?r.push(n.id):(r=[n.id],o.set(n.category,r))})),n[i]=o}}));var r={};e.bylines.forEach((function(e){var t=e.extension_id[".tag"];c(e.extension_id)&&(t=e.extension_id.app_id),r[t]=e.byline}));var o=i.parseFeatureFlags(e.stormcrow_assignments);return{actionIdToAppAction:t,bylines:r,categoryMapsByExt:n,featureFlags:o}})(o),this.loaded=!0,[2,{actions:o.actions,actionMapping:o.action_mapping,categoryInfos:o.category_infos,bylines:u.bylines,featureFlags:u.featureFlags,sharingServiceInfo:a,cloudDocsInfo:s,appActionsEnabled:!0,actionIdToAppAction:u.actionIdToAppAction,categoryMapsByExt:u.categoryMapsByExt,openMenuSurveyEnabled:!1,shareMenuSurveyEnabled:!1}];case 2:if((l=n.sent()).error&&"feature_gated"===l.error[".tag"])return this.loaded=!0,[2,this.state];throw l;case 3:return[2]}}))}))},e.prototype.fetchMenuSurveyEnabledState=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,s.getTooltipHistory(e,["realign_open_menu_survey","realign_share_menu_survey"])];case 1:return[2,{openMenuSurveyEnabled:!(t=n.sent()).realign_open_menu_survey,shareMenuSurveyEnabled:!t.realign_share_menu_survey}]}}))}))},e.prototype.setOpenMenuSurveyViewed=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){return[2,s.markTooltipViewed(e,"realign_open_menu_survey")]}))}))},e.prototype.setShareMenuSurveyViewed=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){return[2,s.markTooltipViewed(e,"realign_share_menu_survey")]}))}))},e.prototype.getCloudDocsInfo=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,r;return n.__generator(this,(function(n){switch(n.label){case 0:if(t={openWithGddSupported:!1},!e.is_team)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o.getTeamSettings(e.id)];case 2:return r=n.sent(),t.openWithGddSupported=r.settings[a.CloudDocProviderIntegration.GDD_INTEGRATION][".tag"]===a.IntegrationCreateAndEdit[".tag"],[3,4];case 3:return n.sent(),t.openWithGddSupported=!1,[3,4];case 4:return[3,6];case 5:t.openWithGddSupported=!0,n.label=6;case 6:return[2,t]}}))}))},e.prototype.getSharingServiceInfo=function(){return n.__assign({},this.state.sharingServiceInfo)},e.prototype.getActions=function(){return this.state.actions},e.prototype.getActionMapping=function(){return this.state.actionMapping},e.prototype.getBylines=function(){return this.state.bylines},e.prototype.getCategoryInfos=function(){return this.state.categoryInfos},e.prototype.getCloudDocsInfoState=function(){return this.state.cloudDocsInfo},e.prototype.refreshSharingServiceInfo=function(e){return n.__awaiter(this,void 0,Promise,(function(){var t,r;return n.__generator(this,(function(i){switch(i.label){case 0:if(void 0!==this.sharingServiceReq)return[2,this.sharingServiceReq];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.client.ns("profile_services").rpc("list_services",void 0,{subjectUserId:e})];case 2:return t=i.sent(),r={},t.services.forEach((function(e){var t=e.service_type[".tag"];r[t]=e})),this.state=n.__assign(n.__assign({},this.state),{sharingServiceInfo:r}),[2,r];case 3:return i.sent(),this.sharingServiceReq=void 0,[2,{}];case 4:return[2]}}))}))},e})();t.Client=g,t.getExtensionsClient=function(){return _||(_=new g(new r.UserApiV2Client)),_}})),define("modules/clean/react/extensions/connect_flow",["require","exports","tslib","modules/clean/integrations/link_service","modules/clean/integrations/log_event","deep-integrations/platform/log_event","deep-integrations/instrumentation/common_context","deep-integrations/instrumentation/constants","deep-integrations/instrumentation/connect_service_flow_wrapper"],(function(e,t,n,r,i,o,a,s,c){"use strict";function u(e,t){return new Promise((function(n){return t({user:e,onRefresh:n})}))}function l(e,t){return t in e&&"is_connected"===e[t].connection_state[".tag"]}function d(e,t,d,_,g,p){return n.__awaiter(this,void 0,Promise,(function(){var f,E,m,S,h;return n.__generator(this,(function(n){switch(n.label){case 0:if(l(t,_))return[2,!0];f=o.withDefaults(i.createIntegrationsActionsLogger().logEvent,{extra:a.getCommonContextExtra({serviceList:Object.keys(t).map((function(e){return t[e]}))})}),(E=t[_])&&f(c.buildStartEvent(E.service_type,E.connection_state,g,s.InstrConnectServiceFlowOutcome.Connected)),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,r.linkService(e.id,_,p)];case 2:return n.sent(),[4,u(e,d)];case 3:return m=n.sent(),S=l(m,_),E&&f(S?c.buildEndEvent(E.service_type,g,s.InstrConnectServiceFlowOutcome.Connected,s.InstrConnectServiceFlowOutcome.Connected):c.buildEndEvent(E.service_type,g,s.InstrConnectServiceFlowOutcome.Connected,s.InstrConnectServiceFlowOutcome.Error)),[2,S];case 4:throw h=n.sent(),E&&f(c.buildEndEvent(E.service_type,g,s.InstrConnectServiceFlowOutcome.Connected,s.InstrConnectServiceFlowOutcome.Error,{error:JSON.stringify(h)})),h;case 5:return[2]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.presentInZoomFlow=function(e,t,n,r,i,o,a){d(e,t,n,"zoom",i,o).then((function(e){e&&(a&&a(),r())}))},t.shareInSlackFlow=function(t,r,i,o,a,s,c){var u=this;d(t,r,i,"slack_dropbox",a,s).then((function(r){return n.__awaiter(u,void 0,void 0,(function(){return n.__generator(this,(function(i){switch(i.label){case 0:return r?(c&&c(),[4,new Promise((function(t,n){e(["modules/clean/integrations/send_to_slack"],t,n)})).then(n.__importStar)]):[3,2];case 1:(0,i.sent().showSendToSlackModal)(t,o),i.label=2;case 2:return[2]}}))}))}))},t.shareInTrelloFlow=function(t,r,i,o,a,s,c){var u=this;d(t,r,i,"trello",a,s).then((function(r){return n.__awaiter(u,void 0,void 0,(function(){return n.__generator(this,(function(i){switch(i.label){case 0:return r?(c&&c(),[4,new Promise((function(t,n){e(["modules/clean/integrations/share_to_trello"],t,n)})).then(n.__importStar)]):[3,2];case 1:(0,i.sent().showShareToTrelloModal)(t,o),i.label=2;case 2:return[2]}}))}))}))},t.shareInCanvasFlow=function(t,r,i,o,a,s,c){var u=this;d(t,r,i,"canvas",a,s).then((function(r){return n.__awaiter(u,void 0,void 0,(function(){return n.__generator(this,(function(i){switch(i.label){case 0:return r?(c&&c(),[4,new Promise((function(t,n){e(["modules/clean/integrations/canvas/upload_to_canvas"],t,n)})).then(n.__importStar)]):[3,2];case 1:(0,i.sent().showUploadToCanvasModal)(t,o),i.label=2;case 2:return[2]}}))}))}))}})),define("modules/clean/react/extensions/file",["require","exports","modules/clean/filepath"],(function(e,t,n){"use strict";function r(e){return void 0!==e.ext}function i(e){return void 0!==e.fq_path}function o(e){return void 0!==e.filename}Object.defineProperty(t,"__esModule",{value:!0}),t.hasExt=r,t.hasFqPath=i,t.hasFilename=o,t.getFileExt=function(e){return r(e)?e.ext:i(e)?"."+n.file_extension(n.filename(e.fq_path)):o(e)?"."+n.file_extension(e.filename):void 0},t.isInVaultFolder=function(e){return!!e.is_in_vault_folder},t.isCloudDoc=function(e){return!!e.is_cloud_doc}})),define("modules/clean/react/extensions/feature_flags",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={testFlag:"test_gated_feature",expSplitShareBtn:"extensions_split_share_btn",appDirectory:"app_directory",hellosignDeepIntegration:"hellosign_deep_integration_sidebar"};t.parseFeatureFlags=function(e){var t={};return(function(){var e=[];for(var t in n)if(n.hasOwnProperty(t)){var r=t;e.push([r,n[r]])}return e})().forEach((function(n){var r=n[0],i=n[1],o=e[i];void 0!==o&&(t[r]=o)})),t}}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};define("modules/clean/react/extensions/split_share_button",["require","exports","modules/clean/react/async/loadable"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SplitShareButton=n.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/react/extensions/split_share_button_component"],t,n)})).then(__importStar).then((function(e){return e.SplitShareButton}))}})})),define("modules/clean/react/extensions/tooltips",["require","exports","modules/core/i18n"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipFromName=function(e){switch(e){case"open_with_edu":case"split_share_edu":case"edit_experiment_image":case"edit_experiment_pdf":case"upload_intercept_image":case"upload_intercept_pdf":case"desktop_notification":case"realign_open_menu_survey":case"realign_share_menu_survey":case"other":return{".tag":e}}};var r={open_with_edu:function(e){return e.hasExtensions},split_share_edu:function(e){return"ON"===e.featureFlags.expSplitShareBtn},upload_intercept_image:function(){return!1},upload_intercept_pdf:function(){return!1},edit_experiment_pdf:function(){return!1},edit_experiment_image:function(){return!1},desktop_notification:function(){return!1},realign_open_menu_survey:function(e){return e.hasExtensions},realign_share_menu_survey:function(e){return e.hasExtensions},other:function(){return!1}},i=["open_with_edu","split_share_edu","desktop_notification","realign_open_menu_survey","realign_share_menu_survey"];t.allowedTooltips=function(e,t,n){return i.filter((function(i){return r[i]({hasExtensions:e,fileExt:t,featureFlags:n})}))},(function(e){e.TOOLTIP_CONFIGS={open_with_edu:{tooltipTitle:n.intl.formatMessage({id:"VopzGG",defaultMessage:"Do more with your files"}),tooltipMessage:n.intl.formatMessage({id:"1vlc0Q",defaultMessage:"Work on this file in other apps. Updates you make will automatically save back to Dropbox."})}},e.EDU_SPLIT_SHARE_MAP={CONTROL:{tooltipTitle:n.intl.formatMessage({id:"v7foBc",defaultMessage:"Extend the power of Dropbox"}),tooltipMessage:n.intl.formatMessage({id:"VKi3Pj",defaultMessage:"Now you can send files to Slack or present in Zoom without leaving Dropbox."})}}})(t.EduTooltipExperiment||(t.EduTooltipExperiment={}))})),define("modules/clean/react/extensions/utils",["require","exports"],(function(e,t){"use strict";function n(e,t){return t in e&&"enabled"===e[t].service_availability[".tag"]}Object.defineProperty(t,"__esModule",{value:!0}),t.isSlackAvailable=function(e){return n(e,"slack_dropbox")},t.isZoomAvailable=function(e){return n(e,"zoom")},t.isTrelloAvailable=function(e){return n(e,"trello")}})),define("modules/clean/react/app_actions/app_actions_menu",["require","exports","tslib","modules/clean/react/async/loadable","modules/clean/web_timing_logger"],(function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsMenu=r.Loadable({loader:function(){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,i.waitForTTI()];case 1:return t.sent(),[4,new Promise((function(t,n){e(["modules/clean/react/extensions/extensions_menu_component_wrapper"],t,n)})).then(n.__importStar)];case 2:return[2,t.sent().ExtensionsMenu]}}))}))}}),t.UnconnectedExtensionsMenu=r.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/react/app_actions/unconnected_menu_wrapper"],t,n)})).then(n.__importStar).then((function(e){return e.UnconnectedMenu}))}})})),define("modules/clean/react/extensions/data/action_creators",["require","exports","tslib","modules/clean/react/extensions/client","modules/clean/react/extensions/data/types","modules/clean/integrations/data/actions"],(function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeExtensionsStore=function(e){var o=e.files,a=e.user;return function(e){return n.__awaiter(this,void 0,void 0,(function(){var s,c,u,l,d,_,g,p;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r.getExtensionsClient().getActionsForFileBatch(o,a)];case 1:return s=n.sent(),c=r.getExtensionsClient().getFeatureFlags(),e(t.setExtensionsFeatureFlags({featureFlags:c})),u=r.getExtensionsClient().getSharingServiceInfo(),e({type:i.ActionTypes.SET_SHARING_SERVICE_INFO_STATE,payload:{sharingServiceInfo:u}}),e({type:i.ActionTypes.UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES,payload:{fileExtensionsConfigs:s}}),l=r.getExtensionsClient().getActions(),d=r.getExtensionsClient().getActionMapping(),_=r.getExtensionsClient().getBylines(),g=r.getExtensionsClient().getCategoryInfos(),p=r.getExtensionsClient().getCloudDocsInfoState(),e(t.updateExtensionsState({actions:l,actionMapping:d,bylines:_,categoryInfos:g})),e(t.setCloudDocsInfoState({cloudDocsInfo:p})),[2]}}))}))}},t.setExtensionsFeatureFlags=function(e){var t=e.featureFlags;return{type:i.ActionTypes.SET_EXTENSIONS_FEATURE_FLAGS,payload:{featureFlags:t}}},t.updateLinkState=function(e){var n=e.actionId,i=e.linkState;return function(e){var o=r.getExtensionsClient();o.updateLinkStateForAction(n,i);var a=o.getActions(),s=o.getActionMapping(),c=o.getBylines(),u=o.getCategoryInfos();e(t.updateExtensionsState({actions:a,actionMapping:s,bylines:c,categoryInfos:u}))}},t.setOpenMenuSurveyViewed=function(e){return function(n){r.getExtensionsClient().setOpenMenuSurveyViewed(e),n(t.setOpenMenuSurveyEnabledState({openMenuSurveyEnabled:!1}))}},t.setShareMenuSurveyViewed=function(e){return function(n){r.getExtensionsClient().setShareMenuSurveyViewed(e),n(t.setShareMenuSurveyEnabledState({shareMenuSurveyEnabled:!1}))}},t.refreshSharingServiceInfo=function(e){var t=e.user,o=e.onRefresh;return function(e){return n.__awaiter(this,void 0,void 0,(function(){var a;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,r.getExtensionsClient().refreshSharingServiceInfo(t.id)];case 1:return n.sent(),[4,r.getExtensionsClient().getSharingServiceInfo()];case 2:return a=n.sent(),o&&o(a),e({type:i.ActionTypes.SET_SHARING_SERVICE_INFO_STATE,payload:{sharingServiceInfo:a}}),[2]}}))}))}},t.refreshSharingServiceInfoAdapter=function(e){var t=e.onRefresh;return function(e,n,r){var a=t&&function(e){"fulfilled"===e.state?t(i.convertToSharingServiceInfo(e.value)):t()};o.fetchListServices(a)(e,n,r)}},t.updateExtensionsState=function(e){var t=e.actions,n=e.actionMapping,r=e.bylines,o=e.categoryInfos;return{type:i.ActionTypes.UPDATE_EXTENSIONS_STATE,payload:{actions:t,actionMapping:n,bylines:r,categoryInfos:o}}},t.setCloudDocsInfoState=function(e){var t=e.cloudDocsInfo;return{type:i.ActionTypes.SET_CLOUD_DOCS_INFO_STATE,payload:{cloudDocsInfo:t}}},t.setOpenMenuSurveyEnabledState=function(e){var t=e.openMenuSurveyEnabled;return{type:i.ActionTypes.SET_OPEN_MENU_SURVEY_ENABLED_STATE,payload:{openMenuSurveyEnabled:t}}},t.setShareMenuSurveyEnabledState=function(e){var t=e.shareMenuSurveyEnabled;return{type:i.ActionTypes.SET_SHARE_MENU_SURVEY_ENABLED_STATE,payload:{shareMenuSurveyEnabled:t}}}})),define("modules/clean/react/extensions/data/reducer",["require","exports","tslib","modules/clean/react/extensions/data/types"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExtensionsState={actionMapping:[],actions:[],categoryInfos:[],bylines:{},featureFlags:{},fileExtensionsConfigs:{},sharingServiceInfo:{},cloudDocsInfo:{openWithGddSupported:!1},openMenuSurveyEnabled:!1,shareMenuSurveyEnabled:!1};t.extensionsReducer=function(e,i){switch(void 0===e&&(e=t.defaultExtensionsState),i.type){case r.ActionTypes.UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES:return(function(e,t){var r=t.payload.fileExtensionsConfigs;return n.__assign(n.__assign({},e),{fileExtensionsConfigs:n.__assign(n.__assign({},e.fileExtensionsConfigs),r)})})(e,i);case r.ActionTypes.SET_EXTENSIONS_FEATURE_FLAGS:return(function(e,t){var r=t.payload.featureFlags;return n.__assign(n.__assign({},e),{featureFlags:r})})(e,i);case r.ActionTypes.SET_SHARING_SERVICE_INFO_STATE:return(function(e,t){var r=t.payload.sharingServiceInfo;return n.__assign(n.__assign({},e),{sharingServiceInfo:r})})(e,i);case r.ActionTypes.UPDATE_EXTENSIONS_STATE:return(function(e,t){return n.__assign(n.__assign({},e),t.payload)})(e,i);case r.ActionTypes.SET_CLOUD_DOCS_INFO_STATE:return(function(e,t){var r=t.payload.cloudDocsInfo;return n.__assign(n.__assign({},e),{cloudDocsInfo:r})})(e,i);case r.ActionTypes.SET_OPEN_MENU_SURVEY_ENABLED_STATE:return(function(e,t){var r=t.payload.openMenuSurveyEnabled;return n.__assign(n.__assign({},e),{openMenuSurveyEnabled:r})})(e,i);case r.ActionTypes.SET_SHARE_MENU_SURVEY_ENABLED_STATE:return(function(e,t){var r=t.payload.shareMenuSurveyEnabled;return n.__assign(n.__assign({},e),{shareMenuSurveyEnabled:r})})(e,i)}return e}})),define("modules/clean/react/extensions/data/selectors",["require","exports","modules/clean/redux/namespaces","modules/clean/redux/selectors","modules/clean/react/extensions/data/reducer","modules/clean/react/extensions/client","modules/clean/integrations/data/selectors","modules/clean/react/extensions/data/types","modules/clean/react/extensions/file"],(function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionsState=function(e){return r.getStateAtNamespace(e,n.EXTENSIONS_NAMESPACE_KEY)||i.defaultExtensionsState},t.fileExtensionsConfigs=function(e){return t.getExtensionsState(e).fileExtensionsConfigs},t.getFeatureFlags=function(e){return t.getExtensionsState(e).featureFlags},t.extensionsEnabledForFile=function(e,n){return(function(e,n){return t.getExtensionsState(e).fileExtensionsConfigs[n]||o.emptyExtensionsConfig()})(e,n.file_id).displayState!==o.DisplayState.DISABLED},t.sharingServiceInfo=function(e){return t.getExtensionsState(e).sharingServiceInfo},t.getSharingServiceInfoAdapter=function(e){var t=a.getListServicesInfo(e).latestListServicesResult;return t&&s.convertToSharingServiceInfo(t)},t.getCloudDocInfo=function(e){return t.getExtensionsState(e).cloudDocsInfo},t.getActions=function(e){return t.getExtensionsState(e).actions},t.getBylines=function(e){return t.getExtensionsState(e).bylines},t.getCategoryInfos=function(e){return t.getExtensionsState(e).categoryInfos},t.getOpenMenuSurveyEnabled=function(e){return t.getExtensionsState(e).openMenuSurveyEnabled},t.getShareMenuSurveyEnabled=function(e){return t.getExtensionsState(e).shareMenuSurveyEnabled};var u=function(e,t){return void 0===t.filters||t.filters.every((function(t){return"matcher_any"===t[".tag"]&&!!t.matcher_any.some((function(t){if("extension"===t[".tag"]){var n=c.getFileExt(e);return t.extension===n}return"max_size_bytes"===t[".tag"]?e.bytes<=t.max_size_bytes:"is_file"===t[".tag"]?e.is_dir!==t.is_file:"is_cloud_doc"!==t[".tag"]||c.isCloudDoc(e)===t.is_cloud_doc}))}))};function l(e,n){return t.getActionsForFileImpl(n,t.getActions(e))}function d(e,n){return t.getShareActionsForFileImpl(n,t.getActions(e)).filter((function(e){return _(e)}))}function _(e){return"share_menu"===e.menu_alignment[".tag"]}t.getActionsForFileImpl=function(e,t){var n;return e.is_dir||c.isInVaultFolder(e)||(null===(n=e.per_node_metadata)||void 0===n?void 0:n.link_node)?[]:void 0===t?[]:t.filter((function(t){return u(e,t)}))},t.getShareActionsForFileImpl=function(e,t){var n=e.per_node_metadata;return c.isInVaultFolder(e)||(null==n?void 0:n.link_node)||(null==n?void 0:n.suppress_ns_partition)||(null==n?void 0:n.suppress_shared_link)?[]:t?t.filter((function(t){return u(e,t)})):[]},t.getActionsForFile=l,t.getFirstPartyActionIds=function(e,t){return l(e,t).map((function(e){return e.id})).filter((function(e){return e.startsWith("fp_action_id:")}))},t.getShareActionsForFile=d,t.getOpenActionsForFile=function(e,t){return l(e,t).filter((function(e){return!_(e)}))},t.getNonHellosignActionsForFile=function(e,t,n){return d(e,t).filter((function(e){return e.app_id!==n}))},t.isShareAction=_})),define("modules/clean/react/extensions/data/store",["require","exports","tslib","external/lodash","modules/clean/react/extensions/data/action_creators","modules/clean/redux/store","modules/clean/redux/namespaces","modules/clean/react/extensions/data/reducer","modules/clean/integrations/data/store"],(function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),t.getStore=r.once((function(){var e;return c.registerReducersForIntegration(),o.getStoreAndRegisterReducers(((e={})[a.EXTENSIONS_NAMESPACE_KEY]=s.extensionsReducer,e))})),t.initializeStore=function(e,n){var r=t.getStore();return c.initStoreForIntegration(e.id),n&&r.dispatch(i.initializeExtensionsStore({user:e,files:n})),r}})),define("modules/clean/react/extensions/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES="EXTENSIONS/UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES",e.SET_EXTENSIONS_FEATURE_FLAGS="EXTENSIONS/SET_EXTENSIONS_FEATURE_FLAGS",e.UPDATE_LINK_STATE="EXTENSIONS/UPDATE_LINK_STATE",e.SET_SHARING_SERVICE_INFO_STATE="EXTENSIONS/SET_SHARING_SERVICE_INFO_STATE",e.UPDATE_EXTENSIONS_STATE="EXTENSIONS/UPDATE_EXTENSIONS_STATE",e.SET_CLOUD_DOCS_INFO_STATE="EXTENSIONS/SET_CLOUD_DOCS_INFO_STATE",e.SET_OPEN_MENU_SURVEY_ENABLED_STATE="EXTENSIONS/SET_OPEN_MENU_SURVEY_ENABLED_STATE",e.SET_SHARE_MENU_SURVEY_ENABLED_STATE="EXTENSIONS/SET_SHARE_MENU_SURVEY_ENABLED_STATE"})(t.ActionTypes||(t.ActionTypes={})),(function(e){e.PrimaryButton="primary_button",e.SecondaryButton="secondary_button",e.SidebarPrimaryButton="sidebar_primary_button",e.CollapsedButton="collapsed_button",e.OpacityButton="opacity_button"})(t.TriggerType||(t.TriggerType={})),t.convertToSharingServiceInfo=function(e){try{var t={};return e.services.forEach((function(e){var n=e.service_type[".tag"];t[n]=e})),t}catch(e){}return{}}})),define("modules/clean/react/app_actions/feedback_modal",["require","exports","tslib","modules/clean/ajax","react","modules/clean/react/css","modules/clean/react/image","spectrum/button","modules/core/i18n","modules/clean/react/modal","spectrum/input","modules/clean/static_urls","modules/clean/filepath","modules/clean/file_store/utils","spectrum/dropdown_menu","dropins_sdk_refactor/dropins_sdk_internal","modules/constants/dropins"],(function(e,t,n,r,i,o,a,s,c,u,l,d,_,g,p,f,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),i=n.__importDefault(i),t.bugReport=c.intl.formatMessage({id:"JPP1Le",defaultMessage:"Report a problem"}),t.suggestSomething=c.intl.formatMessage({id:"GJAB8B",defaultMessage:"Suggest something"});var m="extensions-feedback",S=[t.bugReport,t.suggestSomething],h=(function(e){function o(n){var o=e.call(this,n)||this;return o.submitFeedback=function(){var e=o.state.detailsText;o.state.screenshotLinks.length>0&&(e+=" (Screenshot links: "+o.state.screenshotLinks.join("; ")+")");if(o.state.category===t.bugReport){var n="[Extensions]"+o.state.subjectText;r.SilentBackgroundRequest({url:"/support_ajax/support_form",data:{user_email:o.props.user.email,subject_posted:n,details_posted:e}})}else r.SilentBackgroundRequest({url:"/aa/app_choice_feedback",subject_user:o.props.user.id,data:{ext:o.getFileExt(),other_suggested_apps:o.state.subjectText,comments:e,surface:o.props.surface||"unknown",menu_contents:o.props.visibleMenuItems?o.props.visibleMenuItems.join(", "):""}});o.setState({showThankYouModal:!0})},o.handleSubjectChanged=function(e){o.setState({subjectText:e.currentTarget.value.trim()})},o.handleDetailsChanged=function(e){o.setState({detailsText:e.currentTarget.value.trim()})},o.handleChooseFromDropbox=function(){f.Dropbox.choose({linkType:"preview",multiselect:!0,success:function(e){var t=e.map((function(e){return e.link})),n=e.map((function(e){return e.name}));o.setState({screenshotLinks:t,attachmentNames:n})},extensions:["images","video"]})},o.isAnyFeedbackInput=function(){return o.state.subjectText.length>0||o.state.detailsText.length>0},o.handleCategoryChange=function(e){o.setState({category:e})},o.renderFeedbackModel=function(){return i.default.createElement(u.Modal,{className:m+"-modal",ariaLabel:"Feedback Modal",acceptButtonText:null,style:"clean",autoFocusPrimaryInput:!1,width:560},i.default.createElement("div",{className:m+"-inputs"},i.default.createElement("div",{className:m+"-title"},i.default.createElement("h1",{className:m+"-modal-header"},c.intl.formatMessage({id:"xDGiYl",defaultMessage:"Send feedback"}))),i.default.createElement("div",{className:m+"-container"},i.default.createElement(p.DropdownMenu,{id:"select--category",className:m+"-category-selector",onSelection:o.handleCategoryChange},i.default.createElement(p.DropdownMenuButton,{fullWidth:!0,className:"menu-button"},o.state.category),i.default.createElement(p.Menu,null,o.renderCategoryItems())),i.default.createElement("label",{htmlFor:m+"-subject-input",className:m+"-label"},c.intl.formatMessage({id:"jRg9vc",defaultMessage:"Subject"})),i.default.createElement(l.Input,{id:"subject-input",className:m+"-subject-input",onChange:o.handleSubjectChanged,"aria-label":c.intl.formatMessage({id:"4xSgV3",defaultMessage:"subject input"})}),i.default.createElement("label",{htmlFor:m+"-details-input",className:m+"-label"},c.intl.formatMessage({id:"3D3su5",defaultMessage:"Details"})),i.default.createElement("textarea",{id:"details-input",className:m+"-details-input",onChange:o.handleDetailsChanged,"aria-label":c.intl.formatMessage({id:"P04P4t",defaultMessage:"details input"}),rows:4}),i.default.createElement(s.Button,{variant:"secondary",className:m+"-screenshot-button",onClick:o.handleChooseFromDropbox},c.intl.formatMessage({id:"CCItA6",defaultMessage:"Add a screenshot"})),o.renderSelectedScreenshot())),i.default.createElement("div",{className:m+"-action-bar"},i.default.createElement(s.Button,{variant:"secondary",className:"action-bar-cancel-button",onClick:o.props.onBack},c.intl.formatMessage({id:"d9/SE1",defaultMessage:"Cancel"})),i.default.createElement("div",{className:m+"-action-bar-space"}),i.default.createElement(s.Button,{variant:"primary",className:"action-bar-submit-button",disabled:!o.isAnyFeedbackInput(),onClick:o.submitFeedback},c.intl.formatMessage({id:"Laz2WV",defaultMessage:"Submit"}))))},o.renderThankYouModal=function(){return i.default.createElement(u.Modal,{className:m+"-thank-you-modal",ariaLabel:"Feedback Modal",acceptButtonText:null,style:"clean"},i.default.createElement(a.Image,{className:m+"-thank-you-image",alt:c.intl.formatMessage({id:"a1DjGn",defaultMessage:"Thank you"}),src:d.static_url("/static/images/app_actions/feedback_comments-vfluWMAvS.png"),srcHiRes:d.static_url("/static/images/app_actions/feedback_comments@2x-vflWa-9nT.png")}),i.default.createElement("h1",{className:m+"-thank-you-header"},c.intl.formatMessage({id:"N0m/ev",defaultMessage:"Thanks for letting us know!"})),i.default.createElement("h2",{className:m+"-thank-you-subtext"},c.intl.formatMessage({id:"x3/o5z",defaultMessage:"Your feedback will help make Dropbox even better."})))},o.state={category:t.bugReport,subjectText:"",detailsText:"",screenshotLinks:[],attachmentNames:[],showThankYouModal:!1},f.Dropbox.init({appKey:E.CHOOSER_APP_KEY}),o}return n.__extends(o,e),o.prototype.getFileExt=function(){var e=this.props.file;return void 0===e?null:g.isSharedFile(e)&&e.filename?_.file_extension(e.filename):g.isBrowseFile(e)&&e.ext?e.ext:""},o.prototype.renderCategoryItems=function(){var e=this;return S.map((function(t){return i.default.createElement(p.MenuItem,{value:t,key:t,selected:e.state.category===t},t)}))},o.prototype.renderSelectedScreenshot=function(){return this.state.attachmentNames.map((function(e){return i.default.createElement("p",null,e)}))},o.prototype.render=function(){return this.state.showThankYouModal?this.renderThankYouModal():this.renderFeedbackModel()},o})(i.default.Component);t.FeedbackModal=o.requireCssWithComponent(h,["/static/css/app_actions/index-vflB50SBM.css"])})),define("modules/clean/react/app_actions/category",["require","exports","modules/core/i18n"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={0:{displayName:n.intl.formatMessage({id:"wYkgel",defaultMessage:"DEFAULT"})},1:{displayName:n.intl.formatMessage({id:"EMXHTJ",defaultMessage:"Send for signature"}),developerDescription:n.intl.formatMessage({id:"EMXHTJ",defaultMessage:"Send for signature"})},2:{displayName:n.intl.formatMessage({id:"aIQiHy",defaultMessage:"PDF Editing"}),developerDescription:n.intl.formatMessage({id:"fG5ZbA",defaultMessage:"PDF editing"})},3:{displayName:n.intl.formatMessage({id:"e6EJBF",defaultMessage:"View or Edit"}),developerDescription:n.intl.formatMessage({id:"p+tBI0",defaultMessage:"View or edit"})},4:{displayName:n.intl.formatMessage({id:"gN/zWT",defaultMessage:"Image Editing"}),developerDescription:n.intl.formatMessage({id:"KQT2xh",defaultMessage:"Image editing"})},5:{displayName:n.intl.formatMessage({id:"miE3lp",defaultMessage:"Video comment"}),developerDescription:n.intl.formatMessage({id:"miE3lp",defaultMessage:"Video comment"})},6:{displayName:n.intl.formatMessage({id:"Mcwc+5",defaultMessage:"Send fax"}),developerDescription:n.intl.formatMessage({id:"Mcwc+5",defaultMessage:"Send fax"})},8:{displayName:n.intl.formatMessage({id:"UwFkjc",defaultMessage:"Edit"}),developerDescription:n.intl.formatMessage({id:"RBrgq4",defaultMessage:"Video Editing"})},9:{displayName:n.intl.formatMessage({id:"Ufb68N",defaultMessage:"Send with"}),developerDescription:n.intl.formatMessage({id:"tBDUcB",defaultMessage:"Send Files"})},10:{displayName:n.intl.formatMessage({id:"sDGta5",defaultMessage:"Cloud Editors"}),developerDescription:n.intl.formatMessage({id:"sDGta5",defaultMessage:"Cloud Editors"})},11:{displayName:n.intl.formatMessage({id:"gffk/L",defaultMessage:"Send to notary"}),developerDescription:n.intl.formatMessage({id:"O/A0V6",defaultMessage:"Notarize"})},12:{displayName:n.intl.formatMessage({id:"oNuOaL",defaultMessage:"Expense"}),developerDescription:n.intl.formatMessage({id:"oNuOaL",defaultMessage:"Expense"})},13:{displayName:n.intl.formatMessage({id:"VlZABW",defaultMessage:"Publish"}),developerDescription:n.intl.formatMessage({id:"itZX4g",defaultMessage:"Publish Video"})},14:{displayName:n.intl.formatMessage({id:"E0v6mC",defaultMessage:"Share with"}),developerDescription:n.intl.formatMessage({id:"uukIVm",defaultMessage:"Share a file"})}};(function(e){function t(e){return r[e]||null}e.DEFAULT=0,e.ESIGNATURE=1,e.PDF_EDITING=2,e.VIEW_OR_EDIT=3,e.IMAGE_EDITING=4,e.VIDEO_COMMENT=5,e.SEND_FAX=6,e.OPEN_WITH_CLOUD_DOC=7,e.VIDEO_EDITING=8,e.SEND_WITH=9,e.CLOUD_EDITORS=10,e.SEND_TO_NOTARY=11,e.EXPENSE=12,e.PUBLISH=13,e.SHARE_WITH=14,e.getDisplayName=function(e){var n=t(e);return n&&n.displayName},e.getDeveloperDescription=function(e){var n=t(e);return n&&n.developerDescription||null}})(t.Category||(t.Category={}))})),define("modules/clean/react/app_actions/apis",["require","exports","tslib","modules/clean/api_v2/user_client","modules/clean/react/extensions/tooltips"],(function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTooltipHistory=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){var o,a,s,c,u;return n.__generator(this,(function(n){switch(n.label){case 0:o=new r.UserApiV2Client,n.label=1;case 1:return n.trys.push([1,3,,4]),a=t.map((function(e){return i.tooltipFromName(e)})),[4,o.ns("extensions").rpc("get_extensions_tooltip_history_v2",{tooltips:a},{subjectUserId:e})];case 2:return s=n.sent(),c={},s.view_states.forEach((function(e){c[e.tooltip[".tag"]]=e.viewed})),[2,c];case 3:return n.sent(),u={},t.forEach((function(e){u[e]=!0})),[2,u];case 4:return[2]}}))}))},t.markTooltipViewed=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var o,a;return n.__generator(this,(function(n){switch(n.label){case 0:return o=new r.UserApiV2Client,a=i.tooltipFromName(t),[4,o.ns("extensions").rpc("mark_extensions_tooltip_viewed",{tooltip:a},{subjectUserId:e})];case 1:return n.sent(),[2]}}))}))},t.hasUserSeenSurveyForApp=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,(new r.UserApiV2Client).ns("extensions").rpc("get_extension_survey_history",{app_id:t},{subjectUserId:e})];case 1:return[2,n.sent().survey_shown]}}))}))},t.markAppSurveyShown=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,(new r.UserApiV2Client).ns("extensions").rpc("mark_extension_survey_shown",{app_id:t},{subjectUserId:e})];case 1:return n.sent(),[2]}}))}))}}));
//# sourceMappingURL=pkg-extensions.min.js-vflhNa4OH.map