define("modules/clean/react/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button","modules/clean/react/title_bubble","modules/clean/em_string","modules/clean/filepath","dig-components/buttons","dig-components/tooltips","modules/clean/react/sticky_position"],(function(e,t,i,o,n,r,l,a,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),a=i.__importStar(a),t.PathFilterButton=function(e){var t=e.path,i=e.defaultText,u=e.dropdownClasses,p=e.disabled,f=e.onClick,m=e.useDigComponents,h=t&&!a.paths_are_equal(t,"/")?l.Emstring.em_snippet(a.filename(t),10,.6):null;if(m){var g=o.default.createElement(s.Button,{className:u,disabled:p,onClick:f,variant:"opacity",withDropdownIcon:!0},h||i);return t&&h?o.default.createElement(d.Tooltip,{title:t,placement:"bottom"},g):g}var _=o.default.createElement(n.DropdownButton,{className:u,disabled:p,onClick:f},h||i);return h?o.default.createElement(r.TitleBubble,{content:t,position:c.StickyPosition.BOTTOM},_):_}})),define("modules/clean/react/selectable_list",["require","exports","tslib","immutable","keymaster","react","external/lodash","react-dom","modules/core/browser_detection"],(function(e,t,i,o,n,r,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o),n=i.__importDefault(n),r=i.__importDefault(r),l=i.__importStar(l),a=i.__importStar(a),s=i.__importStar(s),t.SELECTABLE_LIST_KEY_SCOPE="SelectableList",t.SELECTABLE_TILE_GRID_KEY_SCOPE="SelectableTileGrid";var d,c,u,p="";function f(e,t,i,o,n,r){switch(e){case c.PREV:return Math.max(0,t-1);case c.NEXT:return Math.min(i-1,t+1);case c.PREV_ROW:case c.NEXT_ROW:return(function(e,t,i,o,n,r){if(void 0===r&&(r=!1),t<0||t>=i)return 0;n&&0!==n.length||(n=[0]);var a=l.sortedIndex(n,t),s=n[a]===t?a:a-1,d=n[s],u=(t-d)%o;switch(e){case c.NEXT_ROW:var p=n.length;if(s===p-1&&t+o>=i){var f=(i-d)%o;if((t-d)%o<f||0===f)return r?i-1:t}var m=s+1,h=m<n.length?n[m]:i;if(t+o-(o-((h-d)%o||o))<h){var g=h-1;return Math.min(t+o,g)}var _=m+1<p?n[m+1]-1:i-1;return Math.min(h+u,_);case c.PREV_ROW:if(0===s&&t-o<0)return r?0:t;if(t-o>=d)return t-o;var E=n[s-1],S=d-1,v=d-E,T=E+v-(v%o||o);return Math.min(T+u,S)}})(e,t,i,o,n,r)}}function m(e,t,i,o,n,r,l,a,s){switch(e){case c.PREV:case c.PREV_ROW:if(0===t)return l;for(var d=f(e,t,a.length,i,s,!0),u=Math.min(t,o)-d,p=t-Math.max(d,o),m=r;m>r-p;m--){var h=l.indexOf(a[m]);l.splice(h,1)}for(m=n-1;m>=n-u;m--)l.push(a[m]);break;case c.NEXT:case c.NEXT_ROW:if(t===a.length)return l;var g=f(e,t,a.length,i,s,!0);for(p=Math.min(g,o)-n,u=g-Math.max(t,o),m=n;m<n+p;m++){h=l.indexOf(a[m]);l.splice(h,1)}for(m=r+1;m<=r+u;m++)l.push(a[m])}return l}(function(e){e.KEYBOARD="keyboard",e.DRAG_TO_SELECT="drag_to_select"})(d=t.SelectableListActionSource||(t.SelectableListActionSource={})),(function(e){e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e[e.PREV_ROW=2]="PREV_ROW",e[e.NEXT_ROW=3]="NEXT_ROW"})(c=t.SelectDirection||(t.SelectDirection={})),(function(e){e.DEFAULT="DEFAULT",e.EXTEND="EXTEND",e.ONLY="ONLY"})(u=t.SelectOptions||(t.SelectOptions={})),t.findNeighboringItem=f,t.findSelectionRange=m;var h=(function(e){function l(t){var i=e.call(this,t)||this;return i.defaultProps={isActive:!0},i.isFocused=!1,i.updateSelection=function(e,t,n){void 0===n&&(n=!1);var r=i.props.selection,l=n?e.length?e[0]:i.props.itemIds[0]:r.anchor,a=r.merge({selected:o.OrderedSet(e),anchor:l});i.props.onSelectionChange(a,t)},i.handleSelectPrevious=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.PREV,d.KEYBOARD))},i.handleSelectPreviousRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.PREV_ROW,d.KEYBOARD))},i.handleExtendSelectionToPrevious=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.PREV,d.KEYBOARD))},i.handleExtendSelectionToPreviousRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.PREV_ROW,d.KEYBOARD))},i.handleSelectNext=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.NEXT,d.KEYBOARD))},i.handleSelectNextRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.selectNeighboringItem(c.NEXT_ROW,d.KEYBOARD))},i.handleExtendSelectionToNext=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.NEXT,d.KEYBOARD))},i.handleExtendSelectionToNextRow=function(e){i.isGlobalEvent(e)&&(e.preventDefault(),i.extendSelectionRange(c.NEXT_ROW,d.KEYBOARD))},i.handleKeyboardDeselectAll=function(e){var t=i.props.selection;e&&!i.isGlobalEvent(e)||!t.selected.size||i.handleDeselectAll(d.KEYBOARD)},i.handleDeselectAll=function(e){if(i.updateSelection([],e,!0),a.findDOMNode(i).contains(document.activeElement)){var t=document.activeElement;t.blur&&t.blur()}i.props.onDeselectAll&&i.props.onDeselectAll()},i.handleKeyboardSelectAll=function(e){var t=i.props,o=t.itemIds,n=t.selection;e&&!i.isGlobalEvent(e)||n.selected.size===o.length||i.handleSelectAll(d.KEYBOARD)},i.handleSelectAll=function(e){i.updateSelection(i.props.itemIds,e,!0)},i.handleDeselect=function(e,t,o){if(t)return i.extendOrShrinkSelectionByFile(e,o);i.updateSelectionById(e,"delete",o)},i.handleSelect=function(e,t,o){if(void 0===t&&(t=u.DEFAULT),t===u.EXTEND)return i.extendOrShrinkSelectionByFile(e);t===u.ONLY?i.updateSelection([e],o,!0):i.updateSelectionById(e,"add",o)},i.handleFocusFile=function(e){i.setState({focusedFileId:e})},i.isSelectableListEvent=function(){return i.isFocused},i.handleFocus=function(){i.isFocused=!0},i.handleBlur=function(){i.isFocused=!1},i.state={selection:t.selection,keyScope:t.keyScope},i}return i.__extends(l,e),l.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.keyScope!==e.keyScope&&(this.setState({keyScope:e.keyScope}),this.isFocused=!1)},l.prototype.componentDidMount=function(){this.setupKeyboardShortcuts(),this.setFocusedIdFromSelection(this.props.selection)},l.prototype.componentDidUpdate=function(e,t){e.selection&&this.props.selection&&e.selection.anchor!==this.props.selection.anchor&&this.setFocusedIdFromSelection(this.props.selection),this.state.keyScope!==t.keyScope&&this.setupKeyboardShortcuts(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():this.cleanupKeyboardShortcuts())},l.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},l.prototype.setupKeyboardShortcuts=function(){var e=this,i=this.state.keyScope;(p=n.default.getScope())!==i&&n.default.setScope(i);var o=n.default.filter||function(e){var t=e.target||e.srcElement;if(!(t instanceof Element))return!0;var i=t.tagName;return!("INPUT"===i||"SELECT"===i||"TEXTAREA"===i)};n.default.filter=function(t){var i=t.target||t.srcElement,n=i.tagName;return(!e.isSelectableListEvent()||"BUTTON"!==n)&&(i instanceof HTMLInputElement&&"checkbox"===i.type||o.call(e,t))},i===t.SELECTABLE_LIST_KEY_SCOPE?(n.default("up",i,this.handleSelectPrevious),n.default("shift+up",i,this.handleExtendSelectionToPrevious),n.default("down",i,this.handleSelectNext),n.default("shift+down",i,this.handleExtendSelectionToNext)):i===t.SELECTABLE_TILE_GRID_KEY_SCOPE&&(n.default("left",i,this.handleSelectPrevious),n.default("shift+left",i,this.handleExtendSelectionToPrevious),n.default("right",i,this.handleSelectNext),n.default("shift+right",i,this.handleExtendSelectionToNext),n.default("up",i,this.handleSelectPreviousRow),n.default("shift+up",i,this.handleExtendSelectionToPreviousRow),n.default("down",i,this.handleSelectNextRow),n.default("shift+down",i,this.handleExtendSelectionToNextRow)),n.default("escape",i,this.handleKeyboardDeselectAll),s.mac?n.default("command+a",i,this.handleKeyboardSelectAll):n.default("ctrl+a",i,this.handleKeyboardSelectAll)},l.prototype.cleanupKeyboardShortcuts=function(){n.default.clearScope(this.state.keyScope),p&&n.default.setScope(p),n.default.resetFilter()},l.prototype.setFocusedIdFromSelection=function(e){e.anchor&&0!==e.selected.size&&this.setState({focusedFileId:e.anchor})},l.prototype.selectNeighboringItem=function(e,t){var i=this.props,o=i.itemIds,n=i.selection,r=i.tilesPerRow,l=i.sectionStartIndices,a=o.indexOf(n.selected.last()),s=o[f(e,a,o.length,r,l)];this.setState({focusedFileId:s}),this.updateSelection([s],t,!0)},l.prototype.extendSelectionRange=function(e,t){var i=this.props,o=i.itemIds,n=i.selection,r=i.tilesPerRow,l=i.sectionStartIndices,a=n.anchor||o[0];if(a){var s=o.indexOf(n.selected.last()),d=n.selected.toArray(),c=o.indexOf(a),u=this.getRangeOfSelectedBlock(a);d=m(e,s,r,c,u.startIndex,u.endIndex,d,o,l),this.setState({focusedFileId:d[d.length-1]}),this.updateSelection(d,t)}},l.prototype.getRangeOfSelectedBlock=function(e){for(var t=this.props,i=t.itemIds,o=t.selection,n=i.indexOf(e),r=0,l=0;r=n,!(--n<0)&&o.selected.has(i[n]););for(n=r;;){var a=i[n];if(!a||!o.selected.has(a))break;l=n,n++}return{startIndex:r,endIndex:l}},l.prototype.extendOrShrinkSelectionByFile=function(e,t){var i=this.props,o=i.itemIds,n=i.selection,r=n.anchor||o[0];if(r){var l=o.indexOf(r),a=o.indexOf(e),s=this.getRangeOfSelectedBlock(r),d=s.startIndex,c=s.endIndex,u=[],p=[];o.forEach((function(e,t){d<=t&&t<=c&&u.push(e),(a<=t&&t<=l||l<=t&&t<=a)&&p.push(e)})),a<l&&p.reverse();var f=n.update("selected",(function(e){return e.subtract(u).union(p)}));this.setState({focusedFileId:e}),this.props.onSelectionChange(f,t)}},l.prototype.updateSelectionById=function(e,t,i){var o=this.props.selection,n="add"===t?e:o.anchor,r=o.selected[t](e),l=o.merge({selected:r,anchor:n||null});this.props.onSelectionChange(l,i)},l.prototype.isGlobalEvent=function(e){var t=e.target instanceof HTMLInputElement,i=e.target instanceof HTMLElement,o=t&&"checkbox"===e.target.type,n=i&&(e.target.classList.contains("mc-popover-selectable-item")||e.target.classList.contains("mc-popover-content-item")||e.target.classList.contains("mc-popover-trigger"));return!document.activeElement||document.activeElement===document.body||e.target instanceof Element&&(a.findDOMNode(this).contains(e.target)&&(!t||o)&&!n)},l.prototype.render=function(){var e=this.props.children,t=this.state.focusedFileId;if(!e)return null;var i=e;return"function"==typeof e&&(i=e({focusedFileId:t,updateSelection:this.updateSelection,handleDeselect:this.handleDeselect,handleDeselectAll:this.handleDeselectAll,handleFocusFile:this.handleFocusFile,handleSelect:this.handleSelect,handleSelectAll:this.handleSelectAll,isSelectableListEvent:this.isSelectableListEvent})),r.default.createElement("div",{className:"selectable-list",onBlur:this.handleBlur,onFocus:this.handleFocus},i)},l})(r.default.PureComponent);t.SelectableList=h})),define("modules/clean/react/tree_view",["require","exports","tslib","classnames","immutable","react","react-dom","external/lodash","modules/clean/react/icon/folder_icon","spectrum/icon_content","jquery","modules/clean/ajax","modules/clean/em_string","modules/clean/filepath","modules/clean/keycode","modules/clean/react/css","modules/clean/react/sprite","modules/core/i18n","modules/core/notify"],(function(e,t,i,o,n,r,l,a,s,d,c,u,p,f,m,h,g,_,E){"use strict";var S;Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),n=i.__importStar(n),r=i.__importDefault(r),l=i.__importStar(l),a=i.__importStar(a),c=i.__importDefault(c),u=i.__importStar(u),t.MAX_LABEL_LENGTH=20,t.INDENT_SIZE_PX=15,(function(e){e[e.None=0]="None",e[e.TreeItem=1]="TreeItem",e[e.HeaderItem=2]="HeaderItem",e[e.StaticHeader=3]="StaticHeader"})(S=t.RootStyle||(t.RootStyle={}));var v=function(e){this.key=e.key,this.label=e.label?e.label:"",this.icon=e.icon?e.icon:"",this.disabled=!!e.disabled,this.canExpand=!!e.canExpand,this.forceExpanded=!!e.forceExpanded,this.readOnly=!!e.readOnly};t.TreeItem=v;var T=(function(){function e(e){var t=n.Map();this.rootItem=e.rootItem,this.items=e.items,this.childItemsByParentKey=e.childItemsByParentKey||t,this.parentItemByChildKey=e.parentItemByChildKey||n.Map()}return e.createWithRootItem=function(t){return new e({rootItem:t,items:n.Map([[t.key,t]])})},e.prototype.getParentItem=function(e){if(e){var t=this.parentItemByChildKey.get(e.key);return t?this.items.get(t):null}},e.prototype.getChildItems=function(e){return this.childItemsByParentKey.get(e.key)||null},e.prototype.isParent=function(e){return this.childItemsByParentKey.has(e.key)},e.prototype.getClosestExistingChildFromKey=function(e){for(var t,i=e.split("/"),o=this.rootItem,n=function(e){var n=i.slice(0,e).join("/"),l=null===(t=r.getChildItems(o))||void 0===t?void 0:t.find((function(e){return e.key===n}));if(void 0===l)return{value:o};o=l},r=this,l=2;l<i.length+1;l++){var a=n(l);if("object"==typeof a)return a.value}return o},e.prototype.setChildItems=function(t,i){i=n.List(i);var o=n.Map(i.map((function(e){return[e.key,e]}))),r=n.Map(this.items).merge(o),l=n.Map(this.childItemsByParentKey).set(t.key,i),a=n.Map(this.parentItemByChildKey);return i.forEach((function(e){return a=a.set(e.key,t.key)})),new e({rootItem:this.rootItem,items:r,childItemsByParentKey:l,parentItemByChildKey:a})},e})();t.Tree=T;var b=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.render=function(){return r.default.createElement("ul",{className:"tree-view__group",role:"group"},this.props.children)},t})(r.default.Component),I=(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){if(e.preventDefault(),e.stopPropagation(),!t.props.item.disabled){var i=l.findDOMNode(t.refs.expandButton);i&&i.contains(e.target)||t.props.onClick&&t.props.onClick(t.props.item)}},t.handleExpandClick=function(e){e.preventDefault(),t.props.onExpandButtonClick&&t.props.onExpandButtonClick(t.props.item,!t.props.isExpanded)},t}return i.__extends(n,e),n.prototype.renderExpandButton=function(){return r.default.createElement("div",{className:"tree-view__expand-button",onClick:this.handleExpandClick,ref:"expandButton",role:"button"},r.default.createElement(g.Sprite,{group:"web",name:this.props.isExpanded?"bullet_minus":"bullet_plus",alt:this.props.isExpanded?_.intl.formatMessage({id:"nPGI06",defaultMessage:"Collapse"}):_.intl.formatMessage({id:"mGnlBs",defaultMessage:"Expand"})}))},n.prototype.renderIcon=function(){var e=this.props.item,t=e.icon,i=e.disabled;return r.default.createElement("div",{className:"tree-view__icon-wrapper"},r.default.createElement(d.IconContent,{className:"tree-view__item-icon",name:s.convertLegacyFolderIconToSpectrum(t,"small"),disabled:i,height:19,width:19}))},n.prototype.render=function(){var e=!this.props.canExpand,i=o.default({"tree-view__item":!0,"tree-view__item--leaf":e}),n=this.props.canExpand&&!this.props.showAsHeader;return r.default.createElement("li",{key:this.props.item.key,id:this.props.id,className:i,onClick:this.handleClick,role:"treeitem","aria-disabled":this.props.item.disabled,"aria-label":this.props.item.label,"aria-level":this.props.level+1,"aria-selected":!!this.props.isSelected||void 0,"aria-expanded":n?this.props.isExpanded:void 0},r.default.createElement("span",{className:o.default({"tree-view__item-row":!0,"tree-view__item-row--disabled":this.props.item.disabled}),style:{paddingLeft:this.props.showAsHeader?0:this.props.level*t.INDENT_SIZE_PX}},this.props.showAsHeader||e?void 0:this.renderExpandButton(),this.props.item.icon?this.renderIcon():void 0,this.props.item.label?r.default.createElement("span",{className:"tree-view__item-label"},p.Emstring.em_snippet(this.props.item.label,t.MAX_LABEL_LENGTH)):void 0),this.props.children)},n.defaultProps={isSelected:!1,isExpanded:!1,canExpand:!1,level:0,onClick:a.noop,onExpandButtonClick:a.noop,showAsHeader:!1},n})(r.default.Component);t.TreeItemView=I;var y,w=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.renderIcon=function(){return this.props.item.icon?r.default.createElement(g.Sprite,{className:"tree-view__header-icon",group:"web",name:this.props.item.icon,alt:""}):null},t.prototype.render=function(){return r.default.createElement("div",{className:"tree-view__item-row"},this.renderIcon(),r.default.createElement("h3",{className:"tree-view__header",id:this.props.id},this.props.item.label))},t})(r.default.Component),M=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedItemKey:null,expandedItemKeys:n.Set([t.props.tree.rootItem.key]),showFocused:!1},t.selectItem=function(e){t.setState({selectedItemKey:null!=e&&e.key?e.key:null}),t.props.onItemSelected(e)},t.handleExpandButtonClick=function(e,i){t.setState({expandedItemKeys:t.setItemExpanded(e.key,i)}),t.props.onItemExpanded(e,i)},t.handleKeyDown=function(e){switch(e.which){case m.KeyCode.UP:t.advanceSelection(!0)&&e.preventDefault();break;case m.KeyCode.DOWN:t.advanceSelection(!1)&&e.preventDefault();break;case m.KeyCode.RIGHT:if(null!=t.state.selectedItemKey){var i=t.props.tree.items.get(t.state.selectedItemKey);t.canItemExpand(i)&&(t.handleExpandButtonClick(i,!0),e.preventDefault())}break;case m.KeyCode.LEFT:if(t.state.selectedItemKey){i=t.props.tree.items.get(t.state.selectedItemKey);t.canItemExpand(i)&&(t.handleExpandButtonClick(i,!1),e.preventDefault())}}},t.handleOnFocus=function(){return t.setState({showFocused:!0})},t.handleOnBlur=function(){return t.setState({showFocused:!1})},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){c.default(l.findDOMNode(this)).on({keydown:this.handleKeyDown})},t.prototype.componentWillReceiveProps=function(e){e.resetSelectedItem&&e.resetSelectedItem!==this.props.resetSelectedItem&&this.setState({selectedItemKey:null})},t.prototype.componentWillUnmount=function(){c.default(l.findDOMNode(this)).off("keydown")},t.prototype.componentDidUpdate=function(e,t){if(this.state.selectedItemKey&&this.state.selectedItemKey!==t.selectedItemKey){var i=c.default(l.findDOMNode(this)),o=i.find('[aria-selected="true"]').eq(0);o.length&&this.scrollElementIntoViewIfNeeded(o,i)}},t.prototype.scrollElementIntoViewIfNeeded=function(e,t){var i=t.scrollTop(),o=i+e.position().top;if(o-i<0)t.scrollTop(o);else{var n=t.innerHeight(),r=i+n,l=e.innerHeight();o+l>r&&t.scrollTop(o-n+l)}},t.prototype.hasSelectableRootItem=function(){var e=this.props.rootStyle;return e===S.TreeItem||e===S.HeaderItem},t.prototype.getHTMLIdPrefix=function(){return this.HTMLIdPrefix||(this.HTMLIdPrefix="tree-view-"+Math.floor(16777215*Math.random()).toString(16))},t.prototype.getLastLeafOf=function(e){var t=this.props.tree.getChildItems(e);return this.state.expandedItemKeys.contains(e.key)&&null!=t&&t.size>0?this.getLastLeafOf(t.last()):e},t.prototype.getPrevItem=function(e){if(!e)return null;var t=this.props.tree.getParentItem(e);if(!t)return null;var i=this.props.tree.getChildItems(t),o=i.indexOf(e);return o>0?this.getLastLeafOf(i.get(o-1)):0===o?t===this.props.tree.rootItem&&!this.hasSelectableRootItem()?null:t:null},t.prototype.getNextItem=function(e,t){if(void 0===t&&(t=!0),!e)return null;var i=this.state.expandedItemKeys.contains(e.key)&&this.props.tree.isParent(e);if(t&&i)return this.props.tree.getChildItems(e).first();var o=this.props.tree.getParentItem(e);if(!o)return null;var n=this.props.tree.getChildItems(o),r=n.size-1,l=n.indexOf(e);return l===r?this.getNextItem(o,!1):0<=l&&l<r&&n.get(l+1)||null},t.prototype.advanceSelection=function(e){if(void 0===e&&(e=!1),!this.state.selectedItemKey){var t=void 0;if(this.hasSelectableRootItem())t=this.props.tree.rootItem;else{var i=this.props.tree.getChildItems(this.props.tree.rootItem);t=i?i.first():null}return this.selectItem(t),!0}var o=this.props.tree.items.get(this.state.selectedItemKey),n=e?this.getPrevItem(o):this.getNextItem(o);return!!n&&(this.selectItem(n),!0)},t.prototype.getValidHTMLIdForItem=function(e){return(""+this.getHTMLIdPrefix()+e.key).replace(/\s+/g,"_")},t.prototype.setItemExpanded=function(e,t){return t?this.state.expandedItemKeys.add(e):this.state.expandedItemKeys.delete(e)},t.prototype.canItemExpand=function(e){return e&&(e.canExpand||this.props.tree.isParent(e))},t.prototype.renderSingleItem=function(e,t,o,n){void 0===n&&(n={});var l=i.__assign({id:this.getValidHTMLIdForItem(e),key:e.key,item:e,isSelected:this.state.selectedItemKey===e.key,isExpanded:this.state.expandedItemKeys.contains(e.key)||e.forceExpanded,canExpand:this.canItemExpand(e)&&!e.forceExpanded,level:t,onClick:this.selectItem,onExpandButtonClick:this.handleExpandButtonClick},n),a=this.props.treeItemView;return r.default.createElement(a,i.__assign({},l),o)},t.prototype.renderItemAndDescendants=function(e,t){var i,o=this.state.expandedItemKeys.contains(e.key)||e.forceExpanded;return this.props.tree.isParent(e)&&o&&(i=this.renderChildrenOfItemAsGroup(e,t+1)),this.renderSingleItem(e,t,i)},t.prototype.renderChildrenOfItemAsGroup=function(e,t){var i=this;if(!e||!this.props.tree.isParent(e))return null;var o=this.props.tree.getChildItems(e).map((function(e){return i.renderItemAndDescendants(e,t)}));return r.default.createElement(b,null,o.toJS())},t.prototype.render=function(){var e,t,i,n=this.props.tree.rootItem;if(this.props.rootStyle===S.TreeItem)t=r.default.createElement(b,null,this.renderItemAndDescendants(n,0));else if(this.props.rootStyle===S.HeaderItem)e=this.getValidHTMLIdForItem(n),t=r.default.createElement(b,null,this.renderSingleItem(n,0,null,{showAsHeader:!0,id:e}),this.renderChildrenOfItemAsGroup(n,0));else if(this.props.rootStyle===S.StaticHeader)e=this.getValidHTMLIdForItem(n),t=r.default.createElement(b,null,r.default.createElement(w,{item:n,id:e}),this.renderChildrenOfItemAsGroup(n,0));else{if(this.props.rootStyle!==S.None)throw new Error("Unknown root style: "+this.props.rootStyle);t=this.renderChildrenOfItemAsGroup(this.props.tree.rootItem,0)}if(this.state.selectedItemKey){var l=this.props.tree.items.get(this.state.selectedItemKey);i=this.getValidHTMLIdForItem(l)}return r.default.createElement("div",{role:"tree",tabIndex:0,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,className:o.default("tree-view","ax-focusable",{"is-focused":this.state.showFocused}),"aria-labelledby":e||void 0,"aria-activedescendant":i},t,this.props.children)},t.defaultProps={rootStyle:S.None,onItemSelected:function(e){},onItemExpanded:function(e,t){},treeItemView:I},t})(r.default.Component);t.TreeView=h.requireCssWithComponent(M,["/static/css/react/tree_view-vfltE0_vb.css","/static/css/accessibility-vfliGZNRm.css"]),(function(e){e.BRIEFCASE="s_briefcase",e.HOUSE="s_house",e.DROPBOX="dropbox"})(y=t.RootIcon||(t.RootIcon={}));var L=(function(e){function t(t,i){var o=e.call(this,t)||this;return o.folderNsId=i,o}return i.__extends(t,e),t})(v);t.FolderTreeItem=L;var F=function(e){return new L({key:e.path,label:f.filename(e.path),canExpand:e.has_subdirs,icon:e.icon,disabled:e.read_only},e.contained_ns)},C=(function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t._pendingAjaxRequest=null,t.state={showLoadingScreen:!1,tree:T.createWithRootItem(new v({key:"/",icon:t.props.rootIcon,label:t.props.treeRootName}))},t.asyncFetchSubFoldersForItem=function(e){var i=e===t.state.tree.rootItem;i&&t.setState({showLoadingScreen:!0}),t._pendingAjaxRequest&&t._pendingAjaxRequest.abort(),t._pendingAjaxRequest=t.props.mkAjaxRequest(e.key),Promise.resolve(t._pendingAjaxRequest).then((function(i){var o=t.parseFolderList(i),n=t.state.tree.setChildItems(e,o);t.setState({tree:n})})).catch(t.props.handleError).then((function(){if(null!=t._pendingAjaxRequest){t._pendingAjaxRequest=null,i&&(t.props.isLoadingAdditionalData||t.setState({showLoadingScreen:!1}));var e=l.findDOMNode(t.refs.treeView);e&&e.focus()}}))},t.handleItemSelected=function(e){null!==e&&(e instanceof L?t.props.onFolderSelected(e.key,e.folderNsId,e.icon):t.props.onFolderSelected(e.key,void 0,e.icon))},t.handleExpandButtonClick=function(e,i){i&&!t.state.tree.isParent(e)&&t.asyncFetchSubFoldersForItem(e)},t.renderLoadingMessage=function(){return r.default.createElement("span",{className:"tree-view__loading-label"},_.intl.formatMessage({id:"9fef95",defaultMessage:"Loading your folders…"}))},t}return i.__extends(o,e),o.prototype.componentDidMount=function(){this.asyncFetchSubFoldersForItem(this.state.tree.rootItem)},o.prototype.componentWillReceiveProps=function(e){e.isLoadingAdditionalData||e.isLoadingAdditionalData===this.props.isLoadingAdditionalData||this.setState({showLoadingScreen:!1})},o.prototype.componentWillUnmount=function(){this._pendingAjaxRequest&&(this._pendingAjaxRequest.abort(),this._pendingAjaxRequest=null)},o.prototype.parseFolderList=function(e){return e.map(F)},o.prototype.render=function(){var e=this.props.isRootSelectable?S.HeaderItem:S.StaticHeader;return r.default.createElement(t.TreeView,{ref:"treeView",tree:this.state.tree,rootStyle:e,onItemSelected:this.handleItemSelected,onItemExpanded:this.handleExpandButtonClick,resetSelectedItem:this.props.resetSelectedItem},this.state.showLoadingScreen?this.renderLoadingMessage():void 0)},o.defaultProps={onFolderSelected:function(e,t,i){},handleError:function(e){E.Notify.error(_.intl.formatMessage({id:"dFFA0Z",defaultMessage:"An error occurred while trying to load your folder."}))}},o})(r.default.Component),D=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t})(C);t.FolderTreeView=D;var R=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.parseFolderList=function(e){var t=this,i=-1,o=e.map((function(e,o){var n=e.path;return t.props.pinnedFolder&&n===t.props.pinnedFolder&&(i=o),F(e)}));if(-1!==i){var n=o[i];o.splice(i,1),o.unshift(n)}return o},t})(C);t.PinnedFolderTreeView=R,t.AdminFolderTreeView=function(e){var t=e.mkAjaxRequest||function(t){return(function(e,t,i){var o={ns_id:i,ns_path:t,hide_tmfs:!0};return u.WebRequestOref({url:"/browse_util/tree_view_team_folder_contents",type:"POST",subject_user:e,data:o,dataType:"json"})})(e.userId,t,e.rootNSID)};return r.default.createElement(D,i.__assign({},e,{rootIcon:y.DROPBOX,mkAjaxRequest:t}))},t.UserFolderTreeView=function(e){var t=e.mkAjaxRequest||function(t){return(function(e,t){var i={folder:t};return u.WebRequestOref({url:"/browse_util/tree_view_folders",type:"POST",subject_user:e,data:i,dataType:"json"})})(e.user.id,t)},o=e.forceRootSelectable||"edit"===e.user.user_root_permissions,n=e.is_paired?e.user.is_team?y.BRIEFCASE:y.HOUSE:y.DROPBOX,l=i.__assign(i.__assign({},e),{mkAjaxRequest:t,isRootSelectable:o,rootIcon:n});if(e.user.is_cdm_member){var a=e.user.cdm_tmf_path;return r.default.createElement(R,i.__assign({},l,{pinnedFolder:a}))}return r.default.createElement(D,i.__assign({},l))}})),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],(function(e,t,i,o){"use strict";var n,r,l,a;Object.defineProperty(t,"__esModule",{value:!0});var s=o.intl.formatMessage({id:"P+XAua",defaultMessage:"Name"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=40,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_SEARCH_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[3]+"%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[2]+"%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[1]+"%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"})},{sortField:i.SortField.SHARED_WITH,label:o.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),popoverTriggerLabel:o.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),isSortOrderOptionDisabled:!0},{sortField:i.SortField.CATEGORY,label:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"})},{sortField:i.SortField.EXTENSION,label:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"})},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"})}],t.GRID_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:s,popoverTriggerLabel:s},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"})},{sortField:i.SortField.CATEGORY,label:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:o.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"})},{sortField:i.SortField.EXTENSION,label:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:o.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"})},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"})}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:i.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:i.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.RELEVANCE,label:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),isLocked:!1,isSortDisabled:!1},{sortField:i.SortField.SIZE,label:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:o.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:i.SortField.RELEVANCE,label:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:o.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),isLocked:!1,isSortDisabled:!1},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:o.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:i.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:i.SortField.MODIFIED,label:o.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),popoverTriggerLabel:o.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[i.NewFolderCreationState.CREATE_FOLDER_INACTIVE,i.NewFolderCreationState.PENDING_INPUT,i.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[i.RenameState.PENDING_INPUT,i.RenameState.SAVING_INPUT],t.AllViewTypes=[i.ViewType.Grid,i.ViewType.LargeGrid,i.ViewType.List,i.ViewType.CondensedList],t.ViewTypeLabels=((n={})[i.ViewType.Grid]=o.intl.formatMessage({id:"x0/ZcU",defaultMessage:"Small"}),n[i.ViewType.List]=o.intl.formatMessage({id:"of/6qv",defaultMessage:"List"}),n[i.ViewType.CondensedList]=o.intl.formatMessage({id:"kiJCvJ",defaultMessage:"Condensed List"}),n[i.ViewType.LargeGrid]=o.intl.formatMessage({id:"c4/R0k",defaultMessage:"Large"}),n),t.AllDropTargetHighlightModes=[i.DropTargetHighlightMode.NONE,i.DropTargetHighlightMode.ALL_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,i.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[i.SortField.FILENAME,i.SortField.MODIFIED,i.SortField.CATEGORY,i.SortField.EXTENSION,i.SortField.SIZE,i.SortField.SHARED_WITH,i.SortField.SYNC_SETTING,i.SortField.FILE_COUNTS],t.SortIsFilename=[i.SortField.FILENAME,i.SortField.CATEGORY,i.SortField.EXTENSION,i.SortField.SHARED_WITH,i.SortField.SYNC_SETTING],t.AllLoadingStates=[i.LoadingState.LOADED,i.LoadingState.LOADING_FIRST_PAGE,i.LoadingState.LOADING_REMAINING_PAGES,i.LoadingState.LOAD_ERROR],t.AllSortDirections=[i.SortDirection.ASCENDING,i.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=((r={})[i.ViewType.Grid]=256,r[i.ViewType.LargeGrid]=512,r[i.ViewType.List]=32,r),t.ViewTypeGridSizes=((l={})[i.ViewType.Grid]=160,l[i.ViewType.LargeGrid]=480,l[i.ViewType.List]=0,l),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.COLUMNS_STORAGE_KEY="browse_columns",t.VIEW_TYPE_STORAGE_KEY="files_view_types",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_TEXT_SEARCH=":search/text",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["jpg","jpeg","png","tiff","tif","gif","bmp","webp","wbmp","psd","svg","svgz","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes=((a={})[t.VIEW_TYPE_GLOBAL_SCOPE]=i.ViewType.List,a[t.VIEW_TYPE_SCOPE_TEXT_SEARCH]=i.ViewType.List,a[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=i.ViewType.LargeGrid,a)})),define("modules/clean/react/files_view/drag_drop/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new o.ScopedEventHandlers(document);t.setupExternalDragHandler=function(e,t,i,r,l,a,s){n.add(e,"dragenter",(function(e){(t()||i())&&!o.closestElement(e.target,l)&&a()&&(s(null),r())}))},t.cleanupExternalDragHandler=function(e){n.remove(e,"dragenter")},t.onFileDragEnterItem=function(e,t,o,n,r,l,a,s){if(t||o)if(e.is_dir&&!(n&&o)){if(r)return;var d=l.isCurrentPathWriteable()&&!i.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:d,isMovingIntoVault:Boolean(e.is_in_vault_folder)})}else a(null),s()}})),define("modules/clean/react/files_view/drag_drop/drag_to_select",["require","exports","tslib","react","modules/clean/react/css","modules/clean/react/files_view/types","modules/clean/react/selectable_list","external/lodash"],(function(e,t,i,o,n,r,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),t.isItemInSelectArea=function(e,t){return!(e.top+e.height<t.top||e.top>t.top+t.height||e.left+e.width<t.left||e.left>t.left+t.width)},t.shouldMouseDownInitiateDragToSelect=function(e,o,n,r){return!d(e)&&(e.target===e.currentTarget||(null==n||!n.selected||!n.selected.some((function(e){return r[e]&&t.isItemInSelectArea(r[e],i.__assign(i.__assign({},o),{height:0,width:0}))}))))};var s=a.throttle((function(e,i,o,n,a){Object.keys(e).forEach((function(s){t.isItemInSelectArea(e[s],i)?(null==a?void 0:a.selected.has(s))||o(s,l.SelectOptions.DEFAULT,r.FilesViewActionSource.DRAG_TO_SELECT):(null==a?void 0:a.selected.has(s))&&n(s,!1,r.FilesViewActionSource.DRAG_TO_SELECT)}))}),25),d=function(e){for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(!0===t.draggable)return!0;t=t.parentElement}return!1};t.DragToSelectController=n.requireCssWithComponent((function(e){var i=o.default.useState(!1),n=i[0],l=i[1],d=o.default.useState(!1),c=d[0],u=d[1],p=o.default.useState(0),f=p[0],m=p[1],h=o.default.useRef(null),g=o.default.useRef({}),_=o.default.useState({top:0,left:0}),E=_[0],S=_[1],v=o.default.useState({top:0,left:0,width:0,height:0}),T=v[0],b=v[1];o.default.useEffect((function(){var e=a.throttle(I,8);return c&&(window.document.addEventListener("mouseup",y),window.document.addEventListener("mousemove",e)),function(){window.document.removeEventListener("mousemove",e),window.document.removeEventListener("mouseup",y)}}),[c,n]),o.default.useEffect((function(){return window.document.addEventListener("click",w,!0),function(){window.document.removeEventListener("click",w,!0)}}),[f]),o.default.useEffect((function(){n&&s(g.current,T,e.handleSelect,e.handleDeselect,e.selection)}),[n,T,e.selection]);var I=function(t){var i;if(c){if(1!==t.buttons)return u(!1),void l(!1);var o=null===(i=h.current)||void 0===i?void 0:i.getBoundingClientRect(),a=t.clientX-((null==o?void 0:o.left)||0),s=t.clientY-((null==o?void 0:o.top)||0);s<0&&(s=0),a<0&&(a=0),o&&a-10>o.width&&(a=o.width-10),o&&s-20>o.height&&(s=o.height-20);var d={top:Math.min(E.top,s),left:Math.min(E.left,a),height:Math.abs(E.top-s),width:Math.abs(E.left-a)};!n&&d.width<=5&&d.height<=5||(n?n&&b(d):(t.preventDefault(),e.updateSelection([],r.FilesViewActionSource.DRAG_TO_SELECT,!0),b(d),l(!0)))}},y=function(e){c&&(n&&m(Date.now()),l(!1),u(!1),b({top:0,left:0,width:0,height:0}),S({top:0,left:0}),e.preventDefault())},w=function(e){Date.now()-f<50&&e.preventDefault(),window.document.removeEventListener("click",w,!0)};return e.isDragToSelectEnabled?o.default.createElement("div",{className:"files-view_drag-to-select",onMouseDown:function(i){var o;if(!i.isDefaultPrevented()&&!c&&1===i.buttons){var n=null===(o=h.current)||void 0===o?void 0:o.getBoundingClientRect(),r=i.clientX-((null==n?void 0:n.left)||0),l=i.clientY-((null==n?void 0:n.top)||0);t.shouldMouseDownInitiateDragToSelect(i,{top:l,left:r},e.selection,g.current)&&(S({top:l,left:r}),b({top:l,left:r,width:0,height:0}),u(!0))}},ref:h},o.default.createElement("div",{className:"files-view_drag-to-select-removal"},e.children({registerSelectableItem:function(e,t){var i,o=t.top+40,n=null===(i=h.current)||void 0===i?void 0:i.getBoundingClientRect();if(n){var r=t.width||n.width;g.current[e]={top:o,width:r,left:t.left,height:t.height}}}})),n&&o.default.createElement("div",{className:"files-view_select-box",style:{top:T.top+"px",left:T.left+"px",width:T.width+"px",height:T.height+"px"}})):o.default.createElement("div",null,e.children({registerSelectableItem:function(e,t){}}))}),["/static/css/files_view/drag_to_select-vflMvddNq.css"])})),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","modules/clean/keycode","modules/clean/react/no-jquery","modules/core/dom"],(function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=i.__importStar(r);var l=["/","\\",":","?","*","<",">","|"],a=null;t.handleKeyPress=function(e,t,i,s){var d=null!=e.which?e.which:e.keyCode,c=String.fromCharCode(d);d<o.KeyCode.SPACE||l.includes(c)||!n.closestElement(document.activeElement,".brws-checkbox-cell")&&r.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||d===o.KeyCode.SPACE&&!t()||(d===o.KeyCode.SPACE&&t()&&e.preventDefault(),i(c),null!=a&&clearTimeout(a),a=setTimeout((function(){s()}),1e3))}})),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","immutable","external/lodash","react","spectrum/media_table","spectrum/table","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/types"],(function(e,t,i,o,n,r,l,a,s,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o),n=i.__importStar(n),r=i.__importDefault(r);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},t.prototype.setupKeyboardShortcuts=function(){var e=this;s.setupFilesViewKeyboardShortcuts({viewType:d.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEvent(this),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return o.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:n.noop,deselectAllAction:n.noop,onCopyToClipboard:n.noop,onCutToClipboard:n.noop,onDelete:n.noop,onFocusSearchBar:this.props.onFocusSearchBar,onNavigateToFileOrFolder:n.noop,onNavigateToParentFolder:this.props.onNavigateToParentFolder,onPasteFromClipboard:this.props.onPasteFromClipboard,onShowRename:n.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.cleanupKeyboardShortcuts=function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")},t.prototype._renderTitle=function(){return r.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,i=e.subtitleLink,o=e.subtitleOnClick;return t&&i?r.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:i,onClick:o},t):t?r.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(r.default.createElement(l.MediaRow,{key:-t-1}));var i=[],o=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0);for(t=0;t<o;t++)i.push(r.default.createElement(l.MediaRow,{key:t+1}));return r.default.createElement(a.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table"},r.default.createElement(a.TableHead,null),r.default.createElement(a.TableBody,null,e,r.default.createElement(l.MediaRow,{key:0},r.default.createElement(l.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),i))},t.defaultProps={numRowsAbove:2,totalRows:14,onFocusSearchBar:n.noop,onPasteFromClipboard:n.noop,onNavigateToParentFolder:n.noop,onOpenKeyboardShortcutModal:n.noop},t})(r.default.PureComponent);t.EmptyFolderTable=c})),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],(function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=function(e){var t=e.file,r=e.isSelected,l=e.dropTargetHighlightMode;if(l===o.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(n.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(l){case o.DropTargetHighlightMode.ALL_FOLDERS:return!0;case o.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!r;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!r&&t.type!==i.FileTypes.SHARED_FOLDER;case o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!r&&![i.FileTypes.SHARED_FOLDER,i.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1},t.isSharingDisabledForFile=function(e){var t=e.context,o=e.file,l=(e.user,e.expVaultEnableViewOnlySharing),a=void 0!==l&&l,s=o.per_node_metadata,d=!!((null==s?void 0:s.link_node)||(null==s?void 0:s.suppress_ns_partition)||(null==s?void 0:s.suppress_shared_link));return o.isDeleted||o.is_dir&&r.shouldUsePublicFolderSharing(t.config,o.fq_path)||n.File.isTeamMemberFolder(o)||!n.File.canViewFileMembers(o,t)||t.isInsideVaultFolder&&!a||o.type===i.FileTypes.VAULT_FOLDER||o.type===i.FileTypes.SANDBOX||d},t.isExtensionsMenuDisabledForContext=function(e){return e.context.isInsideVaultFolder}})),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","keymaster","react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/types","modules/clean/react/no-jquery","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],(function(e,t,i,o,n,r,l,a,s,d,c,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),n=i.__importStar(n),l=i.__importStar(l),d=i.__importStar(d),c=i.__importStar(c),t.FILES_VIEW_SHORTCUTS=[{key:u.intl.formatMessage({id:"kOb587",defaultMessage:"/"}),desc:u.intl.formatMessage({id:"vOBkFB",defaultMessage:"Search"})},{windowsKey:u.intl.formatMessage({id:"JD6thv",defaultMessage:"Ctrl + a"}),macKey:u.intl.formatMessage({id:"vXQEej",defaultMessage:"⌘ + a"}),desc:u.intl.formatMessage({id:"n7drWm",defaultMessage:"Select all files"})},{windowsKey:u.intl.formatMessage({id:"yY9fAj",defaultMessage:"Esc"}),macKey:u.intl.formatMessage({id:"yIq4Am",defaultMessage:"esc"}),desc:u.intl.formatMessage({id:"m7zp3J",defaultMessage:"Deselect all files"})},{windowsKey:u.intl.formatMessage({id:"BmNZ7+",defaultMessage:"Ctrl + c"}),macKey:u.intl.formatMessage({id:"L/3I1a",defaultMessage:"⌘ + c"}),desc:u.intl.formatMessage({id:"jD02CF",defaultMessage:"Copy selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"TeH7ne",defaultMessage:"Ctrl + x"}),macKey:u.intl.formatMessage({id:"Hjoc2x",defaultMessage:"⌘ + x"}),desc:u.intl.formatMessage({id:"JvfueH",defaultMessage:"Cut selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"pApXZD",defaultMessage:"Ctrl + v"}),macKey:u.intl.formatMessage({id:"1MiQRb",defaultMessage:"⌘ + v"}),desc:u.intl.formatMessage({id:"ORvNm9",defaultMessage:"Paste selected file(s) into the current folder"})},{key:u.intl.formatMessage({id:"u3d9dU",defaultMessage:"F2"}),desc:u.intl.formatMessage({id:"GrOPDo",defaultMessage:"Rename selected file"})},{windowsKey:u.intl.formatMessage({id:"kHlg2I",defaultMessage:"Delete"}),macKey:u.intl.formatMessage({id:"ZZU2Yr",defaultMessage:"delete"}),desc:u.intl.formatMessage({id:"45XRF8",defaultMessage:"Delete selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"8X8aMD",defaultMessage:"Ctrl + z"}),macKey:u.intl.formatMessage({id:"10+RMZ",defaultMessage:"⌘ + z"}),desc:u.intl.formatMessage({id:"HGnEOI",defaultMessage:"Undo recent move/copy/rename/delete"})},{key:u.intl.formatMessage({id:"YQJt5v",defaultMessage:"?"}),desc:u.intl.formatMessage({id:"mFXmY0",defaultMessage:"Show keyboard shortcuts"})}],t.FILES_VIEW_LIST_SHORTCUTS=i.__spreadArrays([{key:u.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:u.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:u.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:u.intl.formatMessage({id:"rJHa1d",defaultMessage:"Go up a folder"})},{key:u.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:u.intl.formatMessage({id:"+WMBQW",defaultMessage:"Open folder"})}],t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=i.__spreadArrays([{key:u.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:u.intl.formatMessage({id:"Xg+zFf",defaultMessage:"Select file in previous row (hold shift to select range)"})},{key:u.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:u.intl.formatMessage({id:"erVlBC",defaultMessage:"Select file in next row (hold shift to select range)"})},{key:u.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:u.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:u.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})}],t.FILES_VIEW_SHORTCUTS);var f="",m=new s.ScopedEventHandlers(document);function h(e,t){return function(i){e(i)&&(i.preventDefault(),"function"==typeof t&&t(i))}}function g(e){var t=e.user,i=e.viewType,o=e.getSelectedFiles,n=e.isCurrentPathWriteable,l=e.onShowHelpMenu,a=e.onDelete,s=e.onShowRename,c=e.onFocusSearchBar,f=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,h=e.selectAllAction,g=e.onCopyToClipboard,_=e.onCutToClipboard,E=e.onPasteFromClipboard,S=e.deselectAllAction,v=function(){var e=o(),t=e.some((function(e){return e.read_only}));if(1===e.size)if(n()&&!t){var i=e.first();i.isDeleted?p.Notify.error(u.intl.formatMessage({id:"CCUrto",defaultMessage:"Deleted files can’t be renamed."})):s(i)}else p.Notify.warning(u.intl.formatMessage({id:"jXim1P",defaultMessage:"You don’t have permission to rename files in this folder."}))},T=function(){var e=o();e.size&&a(e)},b=function(){d.performUndo()},I=function(){var e=o();1===e.size&&f(e.first())},y=function(){var e=o(),t=e.first();1===e.size&&t.is_dir&&f(t)},w=function(e,o){r.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:i,keyboard_shortcut_type:e}),o()};return{renameFile:function(){w("rename",v)},focusSearchBar:function(){w("search",c)},showHelpMenu:function(){w("help",l)},selectAll:function(){w("select-all",h)},copyToClipboard:function(){w("copy",g)},cutToClipboard:function(){w("cut",_)},deleteFiles:function(){w("delete",T)},pasteFromClipboard:function(){w("paste",E)},undoAction:function(){w("undo",b)},deselectFiles:function(){w("deselect",S)},navigateToFileOrFolder:function(){w("navigate-file-folder",I)},navigateToFolder:function(){w("navigate-folder",y)},navigateToParent:function(){w("navigate-parent",m)}}}t.generateGetIsGlobalEvent=function(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&n.findDOMNode(e).contains(t.target)}},t.resetFilesViewKeyboardShortcuts=function(e){var t;t=e,o.default.clearScope(t),o.default.setScope(f),m.remove(e,"keydown"),m.remove(e,"keyup")},t.getActionsAndAttachLogging=g,t.setupFilesViewKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsItemEvent,n=e.getIsGlobalEvent;(f=o.default.getScope())!==t&&o.default.setScope(t);var r=g(e);o.default("f2",t,h(i,r.renameFile)),o.default("/",t,h(n,r.focusSearchBar)),o.default("shift+/",t,h(n,r.showHelpMenu)),o.default("escape",t,h(n,r.deselectFiles)),c.mac?(o.default("command+a",t,h(n,r.selectAll)),o.default("command+c",t,h(i,r.copyToClipboard)),o.default("backspace",t,h(i,r.deleteFiles)),o.default("command+v",t,h(n,r.pasteFromClipboard)),o.default("command+x",t,h(i,r.cutToClipboard)),o.default("command+z",t,h(n,r.undoAction))):(o.default("ctrl+a",t,h(n,r.selectAll)),o.default("ctrl+c",t,h(i,r.copyToClipboard)),o.default("delete",t,h(i,r.deleteFiles)),o.default("ctrl+v",t,h(n,r.pasteFromClipboard)),o.default("ctrl+x",t,h(i,r.cutToClipboard)),o.default("ctrl+z",t,h(n,r.undoAction))),e.viewType===a.ViewType.List&&(o.default("right",t,h(i,r.navigateToFolder)),o.default("left",t,h(n,r.navigateToParent)))},t.setupFileJumpKeyboardShortcuts=function(e){var t=e.scope,i=e.getIsFileJumping,n=e.onAddFileJumpKeyCode,r=e.onResetFileJump;m.add(t,"keypress",(function(e){o.default.getScope()===t&&l.handleKeyPress(e,i,n,r)}))},t.resetFileJumpKeyboardShortcuts=function(e){m.remove(e,"keypress")}})),define("modules/clean/react/files_view/name_input",["require","exports","tslib","react","modules/clean/keycode","modules/clean/react/files_view/types","dig-components/text_fields"],(function(e,t,i,o,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o);var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=o.default.createRef(),t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(r.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===n.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:r.NameInputActionSource.ESC})):e.keyCode===n.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(r.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return i.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame((function(){if(e.inputRef.current){var t=e.inputRef.current.value,i=e.props.isDir?t.length:t.lastIndexOf(".");i<0&&(i=t.length),e.inputRef.current.setSelectionRange(0,i)}}))},t.prototype.submitIfChanged=function(e){if(this.inputRef.current){var t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}},t.prototype.render=function(){return o.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},o.default.createElement(l.TextInput,{ref:this.inputRef,defaultValue:this.props.defaultValue,className:this.props.className,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(o.default.PureComponent);t.NameInput=s})),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/async/loadable","modules/core/browser_detection","modules/core/i18n"],(function(e,t,i,o,n,r,l,a,s,d,c,u){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),n=i.__importDefault(n),a=i.__importStar(a),t.AsyncFilesViewMobileOverflowMenu=d.Loadable({loader:function(){return new Promise((function(t,i){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,i)})).then(i.__importStar).then((function(e){return e.FilesViewMobileOverflowMenu}))}}),(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(p=t.OverflowMenuSize||(t.OverflowMenuSize={}));var f=(function(e){function r(t){var i=e.call(this,t)||this;return i.handleSelection=function(e){e.performAction()},i.handleMenuToggle=function(e){var t=e.isOpen;if(t&&i.props.onMenuOpen&&i.props.onMenuOpen(),r.isDynamicProps(i.props)&&t){var o=i.props.getOverflowMenuActions(i.props.file,!!i.props.canDisplayFolderSizes);i.setState({actionSection:o})}},i.handlePreventMouseDown=function(e){e.preventDefault(),e.stopPropagation()},i.handleMobileMenuOpen=function(e){return function(t){i.handlePreventMouseDown(t),i.handleMenuToggle({isOpen:!0}),e()}},i.handleClick=function(e){return function(t){i.handlePreventMouseDown(t),e({})}},i.state={actionSection:r.isDynamicProps(t)?[]:t.actionSection},i}return i.__extends(r,e),r.prototype.render=function(){var e=this,l=this.props,a=l.isResponsive,d=l.size,u=l.showBorders,f=l.ariaHidden,h=r.isDynamicProps(this.props)?this.props:{},g=h.file,_=void 0===g?void 0:g,E=h.thumbStore,S=void 0===E?void 0:E,v=a&&c.is_mobile_or_tablet(),T=d===p.Small?"small":"standard";return o.default.createElement("div",{"aria-hidden":f?"true":void 0,className:"browse-overflow-menu"},v?o.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(t){var i=t.openMobileMenu;return o.default.createElement(m,{onClick:e.handleMobileMenuOpen(i),showBorders:u,size:T})},file:_,actionSection:this.state.actionSection,thumbStore:S}):o.default.createElement(s.Menu.Wrapper,{onSelection:this.handleSelection,onToggle:this.handleMenuToggle,onClick:this.handlePreventMouseDown,onDoubleClick:this.handlePreventMouseDown,isPortaled:!1},(function(t){var r=t.getTriggerProps,l=t.getContentProps,a=t.openMenu;return o.default.createElement(o.default.Fragment,null,o.default.createElement(m,{triggerProps:r(),onClick:e.handleClick(a),showBorders:u,size:T,tabIndex:f?-1:0}),o.default.createElement(s.Menu.Content,i.__assign({placement:"bottom-end"},l(),{className:"browse-overflow-menu-content"}),e.state.actionSection.map((function(e,t){return o.default.createElement(s.Menu.Segment,{key:"action-group-"+t},e.map((function(e,t){return o.default.createElement(s.Menu.ActionItem,{key:t+"-"+e.label,value:e,disabled:e.disabled,className:n.default("browse-overflow-menu-item",e.className)},e.label)})))}))))})))},r.isDynamicProps=function(e){return"file"in e},r.defaultProps={onMenuToggle:function(){},isResponsive:!0},r})(o.default.Component);t.FilesViewOverflowMenu=f;var m=function(e){var t=e.size,n=e.showBorders,s=e.onClick,d=e.tabIndex,c=e.triggerProps,p=u.intl.formatMessage({id:"oeNPkV",defaultMessage:"More actions"});return o.default.createElement(r.IconButton,i.__assign({},c,{"aria-label":p,onClick:s,size:t,variant:n?"outline":"transparent",tabIndex:d}),o.default.createElement(l.UIIcon,{src:a.MoreHorizontalLine,size:t}))}})),define("modules/clean/react/files_view/overflow_menu_item_section",["require","exports","tslib","react","spectrum/popover"],(function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),t.OverflowMenuItemSection=function(e){var t=e.actionSection,r=e.showSeparators,l=void 0===r||r,a=e.renderItem;return 0===t.length?null:o.default.createElement(o.default.Fragment,null,t.map((function(e){return e.map((function(e,t){return o.default.createElement(o.default.Fragment,{key:t+"-"+e.label},a(e))}))})).reduce((function(e,t,r){return i.__spreadArrays(e,l?[o.default.createElement(n.PopoverItemGroupSeparator,{key:r})]:[],t)})))}})),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable"],(function(e,t,i,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),t.StarContainer=n.Loadable({loader:function(){return i.__awaiter(void 0,void 0,void 0,(function(){var t,n,r,l;return i.__generator(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t,i){e(["modules/clean/react/starred/browse_exports"],t,i)})).then(i.__importStar)];case 1:return t=a.sent(),n=t.idTypePairFromStarrableItem,r=t.Star,l=t.StarredSource,[2,function(e){var t=e.item,i=e.user,a=e.className,s=e.onStarClick,d=e.isReadOnly,c=e.tabIndex,u=n(t),p=u.id,f=u.type;return o.default.createElement("div",{className:a},o.default.createElement(r,{id:p,key:"star",idType:f,isDir:Boolean(t.is_dir),user:i,onStarClick:s,source:l.BROWSE,isReadOnly:d,tabIndex:c}))}]}}))}))}})})),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","classnames","react","spectrum/file_icon/get_extension","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect"],(function(e,t,i,o,n,r,l,a,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o);var u=(function(e){function t(t){var i=e.call(this,t)||this;i._thumbRequestId=null,i.handleThumbnailError=function(){i.setState({thumbnailSrc:null})};var o=t.thumbStore,n=t.file.thumbnail_url_tmpl;return i.state={thumbnailSrc:n?o.get_thumb(n):null},i}return i.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,i=e.file,o=e.thumbStore,n=i.fq_path||i.filename||"",d=r.getExtension(n);if(d&&l.IMAGE_THUMBNAIL_EXTENSIONS.includes(d)){var c=s.getThumbnailUrlForItem(i.thumbnail_url_tmpl,this.props.thumbnailSize?this.props.thumbnailSize:l.ViewTypeThumbnailSizes[a.ViewType.List]);c&&(this._thumbRequestId=o.bind_url(c,{onSuccess:function(){t.setState({thumbnailSrc:o.get_thumb(c)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,i=e.showCDMUserEducationEffects,r=e.iconSize,l=this.state.thumbnailSrc,a=t.fq_path||t.filename;return l?n.default.createElement(d.LockBadge,{file:this.props.file,variant:"preview-small"},n.default.createElement("img",{alt:a,draggable:!1,className:o.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:l,onError:this.handleThumbnailError})):n.default.createElement(p,{file:t,showCDMUserEducationEffects:i,iconSize:r})},t})((n=i.__importDefault(n)).default.PureComponent);t.FileThumbnail=u;var p=function(e){var t=e.file,o=e.showCDMUserEducationEffects,r=e.iconSize,l=r?{height:r.toString(),width:r.toString()}:{},a=n.default.createElement(s.FileOrFolderIcon,i.__assign({className:"brws-file-name-cell-icon",file:t,showPreview:!1},l));return o?n.default.createElement(c.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},a):a}})),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","classnames","immutable","react","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_drop/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/files_view/view_file_button","modules/clean/react/icon/file_folder_icon","modules/clean/react/maestro/components/tile_grid","modules/clean/react/selectable_list","modules/clean/react/sticky_position","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,t,i,o,n,r,l,a,s,d,c,u,p,f,m,h,g,_,E,S,v,T,b,I,y,w,M,L,F){"use strict";function C(e){var t=e instanceof c.File?a.filename(e.fq_path):S.isFswm(e)?e.filename:e instanceof c.Paper?e.title:e.name;if(e instanceof c.File)switch(e.type){case s.FileTypes.FOLDER:t=F.intl.formatMessage({id:"C/gp+a",defaultMessage:"Folder, {alt}"},{alt:t});break;case s.FileTypes.PACKAGE:t=F.intl.formatMessage({id:"FhSkpL",defaultMessage:"Package, {alt}"},{alt:t});break;case s.FileTypes.SHARED_FOLDER:t=F.intl.formatMessage({id:"rWEPV0",defaultMessage:"Shared folder, {alt}"},{alt:t});break;case s.FileTypes.SANDBOX:t=F.intl.formatMessage({id:"+vbakm",defaultMessage:"Sandbox, {alt}"},{alt:t});break;case s.FileTypes.TEAM_SHARED_FOLDER:t=F.intl.formatMessage({id:"ZtOyAr",defaultMessage:"Team shared folder, {alt}"},{alt:t});break;case s.FileTypes.TEAM_MEMBER_FOLDER:t=F.intl.formatMessage({id:"1yRjbu",defaultMessage:"Team member folder, {alt}"},{alt:t});break;default:t=F.intl.formatMessage({id:"e8WrLw",defaultMessage:"File, {alt}"},{alt:t})}return t}Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),n=i.__importStar(n),r=i.__importDefault(r),a=i.__importStar(a),L=i.__importStar(L);var D=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var i=t.props,o=i.onStarClick,n=i.item;o&&o(n,e)},t}return i.__extends(t,e),t.prototype.render=function(){var e,t=this.props,i=t.fileRename,o=t.arePostTTIModulesLoaded,n=t.user,s=t.item,d=t.createRenameCancelHandler,p=t.createRenameSubmitHandler,f=t.isActionBarEnabled;if(e=s instanceof c.File?a.filename(s.fq_path):s instanceof c.FileSharedWithMe?s.filename:s instanceof c.Paper?s.title:s.name,s instanceof c.File&&i&&a.paths_are_equal(i.file.fq_path,s.fq_path)){if(i.state===E.RenameState.PENDING_INPUT)return r.default.createElement(_.TileLabelInput,{defaultValue:e,label:e,onCancel:d(s),onSubmit:p(s)});if(i.state===E.RenameState.SAVING_INPUT)return r.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:F.intl.formatMessage({id:"OefYpa",defaultMessage:"Renaming…"})})}var m=l.Emstring.em_snippet(e,14,.5),h=o&&s instanceof c.File&&!c.File.isNoAccessSharedFolder(s)&&!f,S=r.default.createElement(b.TileItemLabelText,{key:"label",label:m});if(e!==m){var v=e.length<=u.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:r.default.createElement("div",{className:"tile-label-tooltip"},e);S=r.default.createElement(w.TitleBubble,{content:v,position:y.StickyPosition.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},S)}var T=s instanceof c.File?this.onStarClickCallback:void 0,I=r.default.createElement(g.StarContainer,{item:s,user:n,className:"tile-star",key:"tileStar",onStarClick:T,tabIndex:-1});return r.default.createElement("span",null,[S,h&&!i&&I])},t})(r.default.PureComponent);t.TileLabel=D;var R=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileGridRef=r.default.createRef(),t.state={inSelectMode:!1,selectedIds:n.Set()},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(i){t.props.onRenameSubmit(e,i)}},t.logOverflowMenuOpen=function(){var e=t.props,i=e.selectedFiles,o=e.user,n=e.viewType,r=i?i.count((function(e){return e.is_dir})):0,l=i?i.count()-r:0;d.logContextMenuClick({uid:o.id,viewType:n,action_surface:M.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:l,numFoldersSelected:r})},t.hrefForItem=function(e,i){return i instanceof c.File?t.props.hrefForFile(e,i):i instanceof c.FileSharedWithMe?i.href:i.url},t.getTileItem=function(e,i){var o=t.props,n=o.activeDropTarget,l=o.isCreateFolderUIActive,a=o.isPhotosPage,s=o.items,d=o.selection,p=o.user,f=o.viewType,m=o.focusedFileIndex,h=o.disabledMultiselect,g=o.cutItems,_=t.state.inSelectMode;if(l){if(0===e)return t.getCreateFolderTile();e-=1}var b=s.get(e);if(!b){var I="Placeholder "+e;return{altText:I,id:I,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var y=S.isFile(b)||S.isFswm(b),w=b,M=_&&y,L=m===e,D=M&&d.selected.some((function(e){return w instanceof c.FileSharedWithMe?w.file_id===e:w.fq_path===e})),R=t.createToggleSelectHandler(w,D),O=t.createClickHandler({item:b,inSelectModeAndIsFile:M,toggleSelectHandler:R}),N=t.createViewFileHandler(b,E.FilesViewActionSource.ROW_DOUBLE_CLICK),A=t.createViewFileHandler(b,E.FilesViewActionSource.ROW_TITLE),P=(S.isFile(b)||S.isFswm(b))&&_?r.default.createElement(v.ViewFileButton,{isVisible:L||a,onClick:t.createViewFileHandler(b,E.FilesViewActionSource.ROW_PREVIEW_ICON),className:"tile__action-button--view-file"}):!S.isFile(b)&&!S.isFswm(b)||_?void 0:t.renderTileOverflowMenu(b,i,a),x=t.renderLabelElement(e),k=C(b),H=b===n,V=t.hrefForItem(p,b),B=b instanceof c.File||b instanceof c.FileSharedWithMe?T.getThumbnailUrlForItem(b.thumbnail_url_tmpl,u.ViewTypeThumbnailSizes[f]):void 0;return{file:w,paper:b instanceof c.Paper?b:void 0,fileSharedWithMe:b instanceof c.FileSharedWithMe?b:void 0,id:c.itemId(b),labelNode:x,altText:k,thumbnailUrl:B,actionNode:P,onClick:O,onDoubleClick:N,onLabelClick:A,isDraggable:!a&&(D||!M),isViewOnly:h,isFocused:L,isSelectable:y,handleToggleSelect:R,checkboxAriaText:F.intl.formatMessage({id:"o3Djy2",defaultMessage:"Select tile"}),href:V,onDragEnter:a?void 0:t.createDragEnterHandler(w,D,H),onDragStart:a?void 0:t.createDragStartHandler(w,D,R),isCheckboxFocusable:a,isCutToClipboard:g&&S.isCutToClipboard(b,g)}},t.shouldFileBeHighlightedDropTarget=function(e,i){var o=t.props.dropTargetHighlightMode;return f.shouldFileBeHighlightedDropTarget({file:e,isSelected:i,dropTargetHighlightMode:o})},t.scrollIntoView=function(e,i){var o=e.top,n=e.bottom,r=t.props.viewportTopOffset,l=void 0===r?0:r,a=t.getScrollPane(),s=a.height,d=a.scrollTop,c=a.scrollTo,u=s-l,p=d+u;o<d?c(0,o):n>p&&c(0,i&&n-o<u/2?n-u/2:n-u)},t}return i.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||m.resetFileJumpKeyboardShortcuts(I.SELECTABLE_TILE_GRID_KEY_SCOPE),m.resetFilesViewKeyboardShortcuts(I.SELECTABLE_TILE_GRID_KEY_SCOPE),p.cleanupExternalDragHandler(I.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===E.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===E.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():m.resetFilesViewKeyboardShortcuts(I.SELECTABLE_TILE_GRID_KEY_SCOPE))},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,i=e.totalNumItems,o=e.isCreateFolderUIActive,n=Math.max(t.size,i);return o&&(n+=1),n},t.prototype.createToggleSelectHandler=function(e,t){var i=this,o=e instanceof c.FileSharedWithMe?e.file_id:e.fq_path;return function(e){var n=i.props,r=n.onDeselectFile,l=n.onSelectFile,a=Boolean(!("keyCode"in e)&&e.shiftKey);t?r(o,a):l(o,a?I.SelectOptions.EXTEND:I.SelectOptions.DEFAULT)}},t.prototype.renderTileOverflowMenu=function(e,t,i){var o=this.props,n=o.getOverflowMenuActions,l=o.thumbStore;return o.arePostTTIModulesLoaded&&r.default.createElement(h.FilesViewOverflowMenu,{file:e,thumbStore:l,getOverflowMenuActions:n,size:h.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!i,onMenuOpen:this.logOverflowMenuOpen})},t.prototype.renderLabelElement=function(e){var t=this.props,i=t.items,o=t.focusedFileIndex,n=t.user,l=t.fileRename,a=t.arePostTTIModulesLoaded,s=t.onStarClick,d=t.isPhotosPage,c=t.isActionBarEnabled;if(!d){var u=i.get(e);if(u){var p=this.state.inSelectMode,f=o===e;return r.default.createElement(D,{item:u,user:n,fileRename:l,arePostTTIModulesLoaded:a,onStarClick:s,inSelectMode:p,isTileFocused:f,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler,isActionBarEnabled:c})}}},t.prototype.createViewFileHandler=function(e,t){var i=this;return function(o){if(o.preventDefault(),o.stopPropagation(),"click"===o.type){var n=o;if(0===n.button){var r=i.hrefForItem(i.props.user,e);if(S.hasModifierKey(n))return void L.open_tab(r)}}e instanceof c.File?i.props.onNavigateToFileOrFolder(e,{actionSource:t}):e instanceof c.FileSharedWithMe?i.props.onOpenFileSharedWithMe(e):e instanceof c.Paper&&i.props.onOpenPaper(e)}},t.prototype.createClickHandler=function(e){var t=this,i=e.item,o=(e.inSelectModeAndIsFile,e.toggleSelectHandler),n=i instanceof c.File||i instanceof c.FileSharedWithMe;return function(e){if(n){var r="keyCode"in e;if(e.preventDefault(),r)o(e);else{var l=i instanceof c.FileSharedWithMe?i.file_id:i.fq_path;t.props.onSelectFile&&(e.shiftKey?t.props.onSelectFile(l,I.SelectOptions.EXTEND):e.ctrlKey||e.metaKey?o(e):t.props.onSelectFile(l,I.SelectOptions.ONLY))}}}},t.prototype.setSelectedTiles=function(e){var t=n.Set().withMutations((function(t){e.selectedFiles.forEach((function(e){var i;t.add((i=e)instanceof c.FileSharedWithMe?i.file_id:i.fq_path)}))}));this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this;p.setupExternalDragHandler(I.SELECTABLE_TILE_GRID_KEY_SCOPE,(function(){return!!e.props.isDraggingInternalFiles}),(function(){return!!e.props.isDraggingExternalFiles}),this.props.onSetFileUploaderPath,".tile",(function(){return e.props.activeDropTarget}),this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,i=t.user,o=t.viewType,n=t.onDelete,r=t.onShowRename,l=t.deselectAll,a=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,d=t.onAddFileJumpKeyCode,c=t.onResetFileJump,u=t.onCopyToClipboard,p=t.onCutToClipboard,f=t.onFocusSearchBar,h=t.onPasteFromClipboard,g=t.selectAll,_=m.generateGetIsGlobalEvent(this),E=_;this.props.isPhotosPage||m.setupFileJumpKeyboardShortcuts({scope:I.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:d,onResetFileJump:c}),m.setupFilesViewKeyboardShortcuts({user:i,viewType:o,getIsGlobalEvent:_,getIsItemEvent:E,getSelectedFiles:function(){return e.props.selectedFiles},isCurrentPathWriteable:a,selectAllAction:g,deselectAllAction:l,onCopyToClipboard:u,onCutToClipboard:p,onDelete:n,onFocusSearchBar:f,onPasteFromClipboard:h,onShowRename:r,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:I.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})},t.prototype.createDragEnterHandler=function(e,t,i){var o=this;return function(n){o.props.onDragEnter(n,e,t,i)}},t.prototype.createDragStartHandler=function(e,t,i){var o=this;return function(n){t?o.props.onDragStart(n):(i(n),o.props.onDragStart(n,[e]))}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,i=e.onNewFolderCancel,o=e.onNewFolderSubmit,n=F.intl.formatMessage({id:"pxGZm3",defaultMessage:"New folder"}),l=r.default.createElement("div",null);return t===E.NewFolderCreationState.PENDING_INPUT?(n=F.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),l=r.default.createElement(_.TileLabelInput,{label:n,onCancel:i,onSubmit:o})):t===E.NewFolderCreationState.SAVING_INPUT&&(n=F.intl.formatMessage({id:"p58M12",defaultMessage:"Creating new folder…"}),l=r.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:n})),{altText:n,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:l}},t.prototype.getScrollPane=function(){var e=this.props.scrollContainer;if(e&&e.current){var t=e.current,i=t.clientHeight,o=t.scrollTop,n=t.scrollTo;return{height:i,scrollTop:o,scrollTo:n?n.bind(e.current):function(){}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):function(){}}},t.prototype.getWindow=function(){var e=this.props.scrollContainer;return e&&e.current?S.createFakeWindow(e.current):window},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,i=e.sections,n=e.viewType,l=e.viewportTopOffset,a=e.scrollContainer,s=e.scrollPositionOffset,d=e.registerSelectableTile,c=o.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":!0}),p=new Set;return this.state.selectedIds.forEach((function(e){return p.add(e)})),a&&!a.current?null:r.default.createElement("div",{role:"grid","aria-multiselectable":"true"},r.default.createElement(b.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:c,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:u.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:u.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:i.sectionStartIndices,sectionLabels:i.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:l,getTileItem:this.getTileItem,selectedIds:p,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:u.ViewTypeGridSizes[n],tileHeight:u.ViewTypeGridSizes[n],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:s||0,window:this.getWindow(),registerSelectableTile:d}))},t.defaultProps={enableMaxHeightGrouping:!1},t})(r.default.PureComponent);t.FilesViewTileGrid=R})),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","classnames","react","modules/clean/react/files_view/name_input"],(function(e,t,i,o,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),n=i.__importDefault(n),t.TileLabelInput=function(e){var t=o.default("tile-label-input",e.className),i=e.defaultValue||"";return n.default.createElement(r.NameInput,{className:t,defaultValue:i,label:e.label,onCancel:e.onCancel,onClick:function(e){e&&(e.stopPropagation(),e.preventDefault())},onSubmit:e.onSubmit})}})),define("modules/clean/react/files_view/util",["require","exports","tslib","retrieval-components/view-mode-toggle","modules/clean/filepath","modules/clean/pnm/utils","modules/clean/react/browse/models","modules/clean/react/files_view/types"],(function(e,t,i,o,n,r,l,a){"use strict";function s(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importStar(n),t.shouldHandleClick=function(e){return 0===e.button&&!s(e)},t.hasModifierKey=s,t.isFile=function(e){return e instanceof l.File},t.isFswm=function(e){return e instanceof l.FileSharedWithMe},t.getFilename=function(e){return t.isFile(e)?r.hasValidLinkNode(e.per_node_metadata)?n.filename_without_extension(n.filename(e.fq_path)):n.filename(e.fq_path):e.filename},t.createFakeWindow=function(e){return i.__assign(i.__assign({},window),{document:{documentElement:{get scrollHeight(){return e.scrollHeight},get scrollTop(){return e.scrollTop}},body:{get scrollTop(){return e.scrollTop}}},get innerHeight(){return e.clientHeight},get pageYOffset(){return e.scrollTop},addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e),requestAnimationFrame:requestAnimationFrame.bind(window),cancelAnimationFrame:cancelAnimationFrame.bind(window),scrollTo:e.scrollTo?e.scrollTo.bind(e):function(){}})},t.shouldClickDeselect=function(e){if(e.defaultPrevented)return!1;for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(0===t.tabIndex||t instanceof HTMLAnchorElement||t instanceof HTMLButtonElement||t instanceof HTMLInputElement||t instanceof HTMLLabelElement||"button"===t.getAttribute("role")||t.classList.contains("mc-popover"))return!1;t=t.parentElement}return!0},t.viewTypeFromViewMode=function(e){switch(e){case o.ViewMode.GRID:return a.ViewType.Grid;case o.ViewMode.TILE:return a.ViewType.LargeGrid;case o.ViewMode.CONDENSED_LIST:return a.ViewType.CondensedList;case o.ViewMode.LIST:return a.ViewType.List}},t.viewModeFromViewType=function(e){switch(e){case a.ViewType.Grid:return o.ViewMode.GRID;case a.ViewType.LargeGrid:return o.ViewMode.TILE;case a.ViewType.List:return o.ViewMode.LIST;case a.ViewType.CondensedList:return o.ViewMode.CONDENSED_LIST}},t.isCutToClipboard=function(e,t){if(!(e instanceof l.File))return!1;var i=t.get(e.fq_path);return Boolean(i&&i.file_id===e.file_id)}})),define("modules/clean/react/files_view/view_file_button",["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","dig-components/buttons","modules/core/i18n"],(function(e,t,i,o,n,r,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),t.ViewFileButton=function(e){var t=e.isVisible,i=e.className,s=e.onClick;return o.default.createElement(l.IconButton,{variant:"transparent","aria-label":a.intl.formatMessage({id:"K8mY77",defaultMessage:"View File"}),onClick:s,tabIndex:t?void 0:-1,className:i},o.default.createElement(r.UIIcon,{src:n.ShowLine}))}}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t};define("modules/clean/react/file_viewer/async_controller",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[".maestro-chrome","#maestro-nav","#page-footer","#page-content","#page-header","#page-sidebar","#flash-upload-container","#maestro-header","#maestro-header-portal","#maestro-prompt",".snackbar-container","#onboarding-sidebar-pagelet"].join();t.hideElementsBehindFileViewer=function(){Array.from(document.querySelectorAll(i)).forEach((function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"}))},t.showElementsBehindFileViewer=function(){Array.from(document.querySelectorAll(i)).forEach((function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""}))},t.asyncOpenPreview=function(t){var i=t.containerId,o=t.files,n=t.fileViewAction,r=t.fileViewOrigin,l=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,d=t.onFileViewerUnmount,c=(t.shouldFocusComment,t.shouldPresentInZoom),u=void 0!==c&&c,p=t.updateBrowserLocation,f=void 0===p||p,m=t.user;new Promise((function(t,i){e(["modules/clean/react/file_viewer/controller"],t,i)})).then(__importStar).then((function(e){e.open(o,a,m,i,{fileViewTarget:l,fileViewOrigin:r,fileViewAction:n,disableRouting:!f,onComponentDidMount:s,onComponentWillUnmount:d,shouldPresentInZoom:u})}))}})),define("modules/clean/react/maestro/components/tile_grid",["require","exports","tslib","classnames","react","react-dom","spectrum/culled_list","modules/clean/filepath","modules/clean/js_client_stopwatch","modules/clean/react/maestro/components/tile_element","modules/clean/react/maestro/components/tile_grid_logger"],(function(e,t,i,o,n,r,l,a,s,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importDefault(o),n=i.__importDefault(n),r=i.__importStar(r),a=i.__importStar(a);function u(e){var t=null;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!t||t.length!==i.length||!t.every((function(e,t){return e===i[t]})))return t=i,e.apply(void 0,i)}}t.memoizeCallback=u,t.TileItemLabelText=function(e){var t=e.className,i=e.label;return t=o.default("tile-label__text",t),n.default.createElement("div",{className:t},i)};var p=(function(e){function t(t){var i=e.call(this,t)||this;if(i.tileIndexToRowIndex=[],i.rowHeights=[],i.ttiReported=!1,i.itemRangeByRow=[],i.tileLoadLogger=null,i.updateScroll=function(e){var t=i.props,o=t.scrollToIndex,n=t.scrollIntoView,r=t.scrollPositionOffset;if(void 0!==o&&n){var l=i.tileIndexToRowIndex[o],a=i.rowHeights.slice(0,l).reduce((function(e,t){return e+t}),r);n({top:a,bottom:a+i.rowHeights[l]},e)}},i.updateOnResize=function(){window.requestAnimationFrame((function(){i.getAndUpdateTileLayout()}))},i.handleTTI=function(){i.ttiReported=!0;var e=i.props.handleTTI;e&&e()},i.setLastViewedPage=function(e){if(i.tileLoadLogger){var t=document.documentElement.scrollTop||document.body.scrollTop,o=Math.round(t/e);if(i.tileLoadLogger.pruneTrackedPages(),i.tileLoadLogger.logCompletedPages(),!i.tileLoadLogger.pagesCompletedLogging.has(o)&&!i.tileLoadLogger.pagesToLog.has(o))if(o!==i.tileLoadLogger.lastViewedPage){if(i.tileLoadLogger.lastViewedPage=o,i.tileLoadLogger.pageChangeTime=i.tileLoadLogger.getTimeNow(),!i.tileLoadLogger.startTimeByPage.get(o)){var n=i.tileLoadLogger.getTimeNow();i.tileLoadLogger.startTimeByPage.set(o,n)}}else(n=i.tileLoadLogger.getTimeNow())-i.tileLoadLogger.pageChangeTime>1e3&&i.tileLoadLogger.pagesToLog.add(o)}},i.logTileError=function(e){i.tileLoadLogger&&i.tileLoadLogger.recordTileError(e),i.props.logTileLoading&&c.InfiniteTileGridLogger.logThumbLoadError()},i.logTileLoaded=function(e,t,o){i.tileLoadLogger&&i.tileLoadLogger.recordTileLoaded(e,t,o)},i.renderTileElement=function(e,t,o,r){var l,s;if(e<0||e>i.props.totalNumItems)return null;var c=i.props.getTileItem(e,o);if(!c)return n.default.createElement(d.TilePlaceholder,{leftOffset:t,tileHeight:i.state.tileWidth,tileWidth:i.state.tileWidth});var u,p=i.ttiReported&&i.props.delayRenderFullTile,f=c.isSelectable&&!!i.props.selectedIds&&i.props.selectedIds.has(c.id),m=c.file&&i.props.shouldFileBeHighlightedDropTarget(c.file,f),h=m&&c.file===i.props.activeDropTarget,g="";c.fileSharedWithMe?(g=c.fileSharedWithMe.file_id,u={type:c.fileSharedWithMe.type,icon:c.fileSharedWithMe.icon,fq_path:"/"+c.fileSharedWithMe.filename,thumbnail_url_tmpl:c.fileSharedWithMe.thumbnail_url_tmpl,name:c.fileSharedWithMe.filename}):c.file&&(g=c.file.fq_path,u={type:c.file.type,icon:c.file.icon,fq_path:c.file.fq_path,thumbnail_url_tmpl:c.file.thumbnail_url_tmpl,name:a.filename(c.file.fq_path),isDeleted:c.file.isDeleted,is_locked:c.file.is_locked,is_lockholder:c.file.is_lockholder,lockholder_name:c.file.lockholder_name,lock_info:c.file.lock_info});var _=c.labelNode?i.props.labelHeight:0;null===(s=(l=i.props).registerSelectableTile)||void 0===s||s.call(l,g,{top:r,left:t,width:i.state.tileWidth,height:_+i.state.tileWidth});var E=0===e&&i.props.selectedIds&&0===i.props.selectedIds.size;return n.default.createElement(d.TileElement,{file:u,paper:c.paper,key:c.id,onClick:c.onClick,onDoubleClick:c.onDoubleClick,onLabelClick:c.onLabelClick,width:i.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:_,delayRenderFullTile:p,actionNode:c.actionNode,thumbnailUrl:c.thumbnailUrl,labelNode:c.labelNode,altText:c.altText,onThumbnailError:i.props.logTileLoading?i.logTileError:void 0,onThumbnailLoad:i.props.logTileLoading?i.logTileLoaded:void 0,isDraggable:c.isDraggable,onDragEnter:c.onDragEnter,onDragStart:c.onDragStart,isFocused:c.isFocused,isSelectable:c.isSelectable,isSelected:f,isViewOnly:c.isViewOnly,isActiveDropTarget:h,isAvailableDropTarget:m,handleToggleSelect:c.handleToggleSelect,checkboxAriaText:c.checkboxAriaText,checkboxTabIndex:c.isCheckboxFocusable?0:-1,thumbStore:i.props.thumbStore,href:c.href,overrideTabIndex:E,isCutToClipboard:c.isCutToClipboard})},i.renderRow=function(e,t,o){var r=i.getRowHeight(t);if(!e)return n.default.createElement(l.CulledItem,{className:i.props.rowClass,height:r,key:t,tagName:"div",topOffset:o});if(!Array.isArray(e))return n.default.createElement(l.CulledItem,{className:i.props.rowClass,height:r,key:t,tagName:"div",topOffset:o},e);for(var a=e,s=a[0],d=a[1],c=i.state.tileWidth+i.props.tilePadding,u=[],p=4,f=s;f<d;f++)u.push(i.renderTileElement(f,p,u.length,o)),p+=c;return n.default.createElement(l.CulledItem,{className:i.props.rowClass,height:r,key:t,tagName:"div",topOffset:o},u)},i.handleRangeInView=u((function(e,t){var o=i.props.onRangeInView;if(o&&0!==i.props.totalNumItems){var n=i.translateRowRangeToItemRange(e,t),r=n[0],l=n[1];isNaN(r)||isNaN(l)||o(r,l)}})),i.props.sectionLabels||i.props.sectionStartIndices){if(!i.props.sectionLabels||!i.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(i.props.sectionLabels.length!==i.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return i.state={tileWidth:i.props.maxTileWidth},s.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),i}return i.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame((function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)}))},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout(),this.updateScroll(!0)},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentDidUpdate=function(e){e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),this.tileLoadLogger=null)},t.prototype.getRowHeight=function(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];var t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t},t.prototype.getPageHeight=function(){var e=(document.documentElement.clientHeight||window.outerHeight)-(this.props.contentOffset||0),t=this.getRowHeight(),i=t*Math.ceil(e/t);return Math.max(i,t)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=r.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var i=t.clientWidth,o=Math.max(1,Math.floor(i/e)),n=this.props.maxTileWidth;return i%e>1&&(n=i/++o-this.props.tilePadding),this.state.tileWidth!==n&&this.setState({tileWidth:n}),this.props.tilesPerRow!==o&&this.props.onTilesPerRowChange(o),{tileWidth:n,tilesPerRow:o}},t.prototype.setupTileLogging=function(e,t){var i=this.getPageHeight(),o=t*Math.ceil(i/e);this.tileLoadLogger=new c.InfiniteTileGridLogger(this.props.totalNumItems,o,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var n=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,n),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,i)},t.prototype.translateRowRangeToItemRange=function(e,t){var i=this.itemRangeByRow;return[i[e][0],i[t][1]]},t.prototype.render=function(){var e=this;this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];var t=[],i=this.getRowHeight(),o=this.props,r=o.containerClass,a=o.enableMaxHeightGrouping,s=o.numThresholdRows,d=o.scrollDeltaThreshold,c=o.sectionStartIndices,u=o.sectionLabels,p=o.totalNumItems,f=o.window;if(c&&c.length>0)c.forEach((function(o,r){var l=p;r!==c.length-1&&(l=c[r+1]),e.rowHeights.push(32);var a=l-o,s=Math.ceil(a/e.props.tilesPerRow),d=u[r],f=n.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},d);t.push(f),e.itemRangeByRow.push([o,o]);for(var m=0;m<s;m++){var h=o+m*e.props.tilesPerRow,g=Math.min(h+e.props.tilesPerRow,l),_=[h,g];t.push(_),e.itemRangeByRow.push(_);for(var E=h;E<g;E++)e.tileIndexToRowIndex.push(e.rowHeights.length);e.rowHeights.push(i)}}));else for(var m=Math.ceil(p/this.props.tilesPerRow),h=0;h<m;h++){var g=h*this.props.tilesPerRow,_=Math.min(g+this.props.tilesPerRow,p),E=[g,_];t.push(E),this.itemRangeByRow.push(E);for(var S=g;S<_;S++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(i)}return n.default.createElement(l.CulledList,{enableMaxHeightGrouping:a,items:t,listItemHeight:this.rowHeights,itemBuffer:s,className:r,renderRow:this.renderRow,scrollThreshold:d,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:f})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(){return null},handleTTI:function(){}},t})(n.default.PureComponent);t.InfiniteTileGrid=p})),define("modules/clean/react/files_view/keyboard_focus",["require","exports","tslib","react"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastMouseDown=0,t.onFocus=function(e){Date.now()-t.lastMouseDown>500&&t.props.onKeyboardFocus(e)},t.onMouseDown=function(){t.lastMouseDown=Date.now()},t}return i.__extends(t,e),t.prototype.render=function(){return this.props.children({onFocus:this.onFocus,onMouseDown:this.onMouseDown})},t})((o=i.__importDefault(o)).default.PureComponent);t.WithKeyboardFocus=n})),define("modules/clean/undo",["require","exports","tslib","purify","react","modules/constants/undo_strings","modules/core/notify"],(function(e,t,i,o,n,r,l){"use strict";var a,s;function d(){s&&(s(a),s=void 0,a=null)}Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o),n=i.__importStar(n),t.performUndo=d,t.setHandleUndo=function(e,t){s=e,a=t||null},t.notifyWithUndo=function(e,t,i,o,u){if(void 0===u&&(u=r.UNDO),t&&Object.keys(t).length){a=t,s=i,o=null==o?30:o;var p=function(e){e.preventDefault(),d(),l.Notify.clear()};l.Notify.customSuccess(n.createElement(c,{message:e,undoButtonText:u,onUndo:p}),e,o)}else l.Notify.success(e)};var c=function(e){return"string"==typeof e.message?n.createElement("span",{"aria-live":"polite"},e.message," ",n.createElement("button",{className:"button-as-link",onClick:e.onUndo},e.undoButtonText)):n.createElement(n.Fragment,null,n.createElement("span",{"aria-live":"polite",dangerouslySetInnerHTML:{__html:o.sanitize(e.message.toHTML())}})," ",n.createElement("button",{className:"button-as-link",onClick:e.onUndo},e.undoButtonText))}})),define("retrieval-components/view-mode-toggle",["require","exports","tslib","retrieval-components/view-mode-toggle/view_mode_toggle"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.__exportStar(o,t)})),define("retrieval-components/view-mode-toggle/view_mode_toggle",["require","exports","tslib","react","react-intl","dig-components/icons/src","dig-components/menu","dig-components/buttons","dig-components/icons"],(function(e,t,i,o,n,r,l,a,s){"use strict";var d;function c(e,i,o){var l=n.defineMessage({id:"izeluw",defaultMessage:"Grid"}),a=n.defineMessage({id:"BOj5uG",defaultMessage:"Large grid"}),s=n.defineMessage({id:"kn0aTF",defaultMessage:"List"}),d=n.defineMessage({id:"+ElFUY",defaultMessage:"Large list"}),c=!i&&!o,u=[{mode:t.ViewMode.GRID,icon:r.GridViewDenseLine,label:e.formatMessage(l)},{mode:t.ViewMode.TILE,icon:r.GridViewLine,label:e.formatMessage(a)}];return c&&u.push({mode:t.ViewMode.CONDENSED_LIST,icon:r.ListViewDenseLine,label:e.formatMessage(s)}),u.push({mode:t.ViewMode.LIST,icon:r.ListViewLine,label:i?e.formatMessage(s):e.formatMessage(d)}),u}Object.defineProperty(t,"__esModule",{value:!0}),o=i.__importStar(o),(d=t.ViewMode||(t.ViewMode={})).GRID="grid",d.TILE="tile",d.CONDENSED_LIST="condensed_list",d.LIST="list",t.ViewModeToggle=function(e){var i=e.className,r=e.currentMode,d=e.disabled,u=e.onSelection,p=e.treatLargeListAsList,f=e.withoutCondensedListMode,m=n.defineMessage({id:"slo33I",defaultMessage:"Select view type"}),h=n.useIntl(),g=h.formatMessage(m),_=c(h,p,f),E=_.find((function(e){return e.mode===r}))||_.find((function(e){return e.mode===t.ViewMode.LIST}));return o.createElement(l.Menu.Wrapper,{onSelection:u},(function(e){var n=e.getTriggerProps,c=e.getContentProps;return o.createElement(o.Fragment,null,o.createElement(a.IconButton,Object.assign({className:i,variant:"transparent","aria-label":g,disabled:d,withDropdownIcon:!0},n()),o.createElement(s.UIIcon,{src:E.icon})),o.createElement(l.Menu.Content,Object.assign({},c(),{placement:"bottom-end"}),o.createElement(t.ViewModeMenu,{currentMode:r,treatLargeListAsList:p,withoutCondensedListMode:f})))}))},t.ViewModeMenu=function(e){var t=e.currentMode,i=e.treatLargeListAsList,r=e.withoutCondensedListMode,a=c(n.useIntl(),i,r);return o.createElement(l.Menu.Segment,null,a.map((function(e){return o.createElement(l.Menu.SelectItem,{key:e.mode,value:e.mode,selected:e.mode===t,"aria-checked":e.mode===t,withRightAccessory:o.createElement(s.UIIcon,{src:e.icon})},e.label)})))}}));
//# sourceMappingURL=pkg-selectable-list.min.js-vflKJ70l5.map